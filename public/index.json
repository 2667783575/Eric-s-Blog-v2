
[{"content":" ä¸ªäººç®€ä»‹ # Ericæ˜¯å…¸å‹çš„ç†å·¥ç”·ï¼Œæ¯èƒsoloã€‚æ€§æ ¼INTJï¼Œç•¥å¾®å­¤åƒ»ï¼Œæ··æ²Œå–„è‰¯ã€‚\nå–œæ¬¢å’Œæœ‹å‹æ‰“æ¸¸æˆï¼Œå–œæ¬¢èŒå® ï¼Œå–œæ¬¢æŒ–ç…¤çŒ«ï¼Œå–œæ¬¢ä¸å†·ä¸çƒ­çš„å¤©æ°”ï¼Œå–œæ¬¢æ¸©æš–çš„è¢«çªï¼Œå–œæ¬¢é›¨æ°´æ‰“æ¹¿æ³¥åœŸçš„æ°”æ¯ï¼Œå–œæ¬¢å¬éŸ³ä¹ï¼Œå–œæ¬¢åšæœ‰æ„ä¹‰çš„äº‹ï¼Œå–œæ¬¢è¯—å’Œæµªæ¼«ï¼Œå–œæ¬¢æœ‰äººå–œæ¬¢çš„æ„Ÿè§‰ã€‚\næ ¸å¿ƒæŠ€æœ¯æ ˆ # ğŸ’» ç¼–ç¨‹è¯­è¨€\nC++ â€”â€” ç³»ç»Ÿçº§å¼€å‘ä¸é«˜æ€§èƒ½è®¡ç®—\nâŒ¨ï¸ ç¼–è¾‘å™¨ \u0026amp; IDE\nNeovimï¼ˆç»ˆç«¯é«˜æ•ˆæµï¼‰ï½œVS Codeï¼ˆè½»é‡æ‰©å±•å¼ºï¼‰ï½œVisual Studioï¼ˆWindows/.NET æ·±åº¦é›†æˆï¼‰\nğŸ—ï¸ æ„å»ºç³»ç»Ÿ\nCMakeï¼ˆè·¨å¹³å°é…ç½®ï¼‰ï½œMakeï¼ˆç»å…¸è‡ªåŠ¨åŒ–ï¼‰\nğŸ”¥ ç¼–è¯‘å™¨\nClang/LLVMï¼ˆç°ä»£è¯Šæ–­ \u0026amp; å·¥å…·é“¾ï¼‰ï½œGCCï¼ˆGNU ç”Ÿæ€ä¸»åŠ›ï¼‰\nğŸ è°ƒè¯•å·¥å…·\nGDBï¼ˆLinux æ ‡é…ï¼‰ï½œLLDBï¼ˆLLVM è°ƒè¯•å™¨ï¼Œé›†æˆäº VS/Xcodeï¼‰\nä¸“ä¸š # ç¼–ç¨‹è¯­è¨€\nEricæ“…é•¿C++ï¼ŒæŒæ¡C++17ï¼Œå€¼ç±»å‹ï¼Œç§»åŠ¨è¯­ä¹‰ï¼Œå®Œç¾è½¬å‘ï¼Œæ¨¡æ¿å…ƒç¼–ç¨‹ï¼Œå¤šçº¿ç¨‹ï¼Œpromiseå¼‚æ­¥ï¼Œå¯¹Qtï¼Œcocos2dxç­‰æ¡†æ¶æœ‰ç®€å•ä½¿ç”¨ç»éªŒï¼›äº†è§£è¯­æ³•å¹¶å¯ä»¥åŸºæœ¬ä½¿ç”¨Python/C#/Java/Rustç­‰ã€‚\næ•°ç†åŸºç¡€\nEricå¯¹ç¦»æ•£æ•°å­¦ï¼Œå¾®ç§¯åˆ†ï¼Œçº§æ•°ç­‰æ•°å­¦ç†è®ºæŒæ¡æ¯”è¾ƒæ‰å®ï¼Œæœ‰è¾ƒå¥½çš„æ•°ç†åŸºç¡€ã€‚\nè®¡ç®—æœºåº•å±‚çŸ¥è¯†\nEricå·²ç»å­¦ä¹ è¿‡CSAPPçš„ä¸»è¦å†…å®¹å’Œè®¡ç®—æœºç»„æˆä¸ä½“ç³»æ¶æ„(COA)ï¼ŒæŒæ¡è®¡ç®—æœºçš„åˆ†å±‚è§†è§’ï¼Œå¯¹è®¡ç®—æœºä¸­ç¨‹åºè¿è¡Œçš„è®¡ç®—æœºç»„æˆä¸æ“ä½œç³»ç»Ÿçš„å·¥ä½œè¿‡ç¨‹æœ‰è¾ƒä¸ºæ·±åˆ»çš„ç†è§£ã€‚\nç®—æ³•èƒ½åŠ›\nEricæœ‰åŸºç¡€çš„æ•°æ®ç»“æ„ä¸ç®—æ³•èƒ½åŠ›ã€‚è®¤è¯†å„ç§å¸¸è§æ•°æ®ç»“æ„ï¼Œäº†è§£å¹¶æ‰‹å†™è¿‡å¹¶æŸ¥é›†ï¼ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œå›¾æŸ¥æ‰¾ç­‰åŸºç¡€ç®—æ³•ã€‚ä½†Ericçš„ç®—æ³•èƒ½åŠ›ä¾æ—§ç›¸å½“åŸºç¡€ï¼Œå¹¶ä¸èƒ½ä»ç®—æ³•ç«èµ›ä¸­è„±é¢–è€Œå‡ºï¼Œé‚æ”¾å¼ƒã€‚\nåç«¯\nEricå¯¹åç«¯å¼€å‘æœ‰ä¸€å®šè®¤è¯†ã€‚Ericä½¿ç”¨Java sshä¼ ç»ŸæŠ€æœ¯æ ˆå¼€å‘è¿‡åŸºäºTomcatçš„ç®€å•MVCåå°ç³»ç»Ÿï¼Œè®¤è¯†ORMï¼ŒDIå®¹å™¨ç­‰å¼€å‘åå°éœ€è¦çš„æŠ€æœ¯æ¡†æ¶ï¼Œä¹Ÿäº†è§£æ¯”è¾ƒç°ä»£çš„RestFul APIï¼ŒæŒæ¡SOLIDäº”åŸåˆ™ä¸ä¸€äº›åŸºæœ¬è®¾è®¡æ¨¡å¼ï¼Œäº†è§£MVVMï¼ŒDDDç­‰ç°ä»£æ¶æ„ã€‚\nå‰ç«¯\nEricå¯¹å‰ç«¯å¼€å‘æœ‰ä¸€å®šè®¤è¯†ã€‚EricåŒæ—¶æœ‰Reactå’ŒVueä¸¤æ´¾å‰ç«¯æ¡†æ¶çš„ä½¿ç”¨ç»éªŒï¼Œäº†è§£å‰ç«¯å“åº”å¼å¸ƒå±€çš„æ€æƒ³ï¼Œèƒ½å¤Ÿè¿›è¡ŒåŸºç¡€çš„å‰ç«¯å¼€å‘ï¼Œä½¿ç”¨è¿‡AntDesignç­‰ç»„ä»¶åº“ï¼ŒPiniaç­‰çŠ¶æ€ç®¡ç†æ¡†æ¶ï¼Œaxiosç­‰å¼‚æ­¥é€šä¿¡æ¡†æ¶ã€‚\nAI\nEricæœ‰å„ç§AIæ¡†æ¶çš„ä½¿ç”¨ç»éªŒï¼Œå¯¹yoloç­‰å›¾å½¢è¯†åˆ«aiï¼Œä¸€äº›tts aiè¿›è¡Œè¿‡åŸºæœ¬çš„ä½¿ç”¨ã€‚Ericäº†è§£æœ€ç®€å•çš„ReActç­‰Agentæ€è·¯ï¼Œäº†è§£åŸºç¡€çš„aiäº‘æœåŠ¡apiè°ƒç”¨ï¼Œå°è¯•è¿‡è‡ªå·±åšç®€å•çš„agentè½¯ä»¶ã€‚\nå¿—è¶£ # Ericä¸»è¦å¯¹æ•°æ®åº“ç­‰åº•å±‚ç³»ç»Ÿéå¸¸æ„Ÿå…´è¶£ï¼Œä½†å—é™äºå¸‚åœºä¸ç°å®ï¼Œæš‚ä¸”å°†ç›®å…‰ç§»åŠ¨åˆ°AI Infraï¼ŒML Sysç­‰åº•å±‚ä¸AIè®­ç»ƒï¼Œæ¨ç†ç­‰è¿‡ç¨‹ç»“åˆçš„æ›´åŠ å…·æœ‰å‰é€”çš„æ–¹å‘ã€‚\næ¨èé“¾æ¥ # spiderboyçš„åšå®¢\nSonnyCalcrçš„åšå®¢\n","date":"10 January 2026","externalUrl":null,"permalink":"/Eric-s-Blog-v2/posts/about/","section":"Posts","summary":"","title":"about","type":"posts"},{"content":"","date":"10 January 2026","externalUrl":null,"permalink":"/Eric-s-Blog-v2/categories/","section":"Categories","summary":"","title":"Categories","type":"categories"},{"content":"","date":"10 January 2026","externalUrl":null,"permalink":"/Eric-s-Blog-v2/","section":"Eric's Blog","summary":"","title":"Eric's Blog","type":"page"},{"content":"","date":"10 January 2026","externalUrl":null,"permalink":"/Eric-s-Blog-v2/posts/","section":"Posts","summary":"","title":"Posts","type":"posts"},{"content":"","date":"10 January 2026","externalUrl":null,"permalink":"/Eric-s-Blog-v2/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"},{"content":"","date":"10 January 2026","externalUrl":null,"permalink":"/Eric-s-Blog-v2/categories/%E7%94%9F%E6%B4%BB/","section":"Categories","summary":"","title":"ç”Ÿæ´»","type":"categories"},{"content":"","date":"10 January 2026","externalUrl":null,"permalink":"/Eric-s-Blog-v2/tags/%E8%87%AA%E6%88%91%E4%BB%8B%E7%BB%8D/","section":"Tags","summary":"","title":"è‡ªæˆ‘ä»‹ç»","type":"tags"},{"content":"","date":"8 November 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/tags/cpp/","section":"Tags","summary":"","title":"Cpp","type":"tags"},{"content":" ä»€ä¹ˆæ˜¯reference_wrapper # reference_wrapperå°±æ˜¯å¼•ç”¨åŒ…è£…å™¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªç±»æ¨¡æ¿ï¼Œå¯ä»¥ä»å®ƒç”Ÿæˆobjçš„æ¨¡æ¿ç±»ï¼Œä½¿å¾—è¯¥ç±»äº§ç”Ÿçš„å¯¹è±¡å…·æœ‰å’Œobjçš„å¼•ç”¨è¿‘ä¹å®Œå…¨ä¸€æ ·çš„è¡Œä¸ºã€‚\nä¸ºä»€ä¹ˆè¦æœ‰reference_wrapper # åœ¨cppä¸­ï¼Œå¦‚std::thread,std::bindè¿™æ ·çš„ç±»åªæ”¯æŒæ¥å—å€¼çš„æ‹·è´ï¼Œè€Œä¸æ¥å—å¼•ç”¨ã€‚\nä¸ºä»€ä¹ˆstd::threadåªæ¥å—å€¼æ‹·è´ï¼Ÿ # 1. å¤šçº¿ç¨‹èµ„æºç”Ÿå‘½å‘¨æœŸå¾ˆå±é™©, std::refå¯ä»¥å¼ºè¿«ç¨‹åºå‘˜çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆ # å¦‚æœé»˜è®¤ä½¿ç”¨å¼•ç”¨ä¼ é€’(å·¦å€¼å¼•ç”¨\u0026amp;æˆ–ä¸‡èƒ½å¼•ç”¨\u0026amp;\u0026amp;)ï¼Œåˆ™å¾ˆå®¹æ˜“å‡ºç°ç”Ÿå‘½å‘¨æœŸé—®é¢˜ ä½ åœ¨æŸä¸ªå¤§æ‹¬å·ä¸Šä¸‹æ–‡ä¸­ä¼ å…¥std::threadä¸€ä¸ªå±€éƒ¨å˜é‡çš„å¼•ç”¨ï¼Œå½“ç¦»å¼€æ­¤ä¸Šä¸‹æ–‡åï¼Œçº¿ç¨‹å®Œå…¨æœ‰å¯èƒ½ä»åœ¨æ‰§è¡Œï¼Œ è€Œè¯¥å˜é‡å·²ç»è¢«é‡Šæ”¾ ä¸‹é¢ä»£ç å‡è®¾std::threadé»˜è®¤ä¼ å¼•ç”¨\nvoid do_something(int\u0026amp; a){ std::this_thread::sleep_for(std::chrono::seconds(10));//æ¨¡æ‹Ÿçº¿ç¨‹ä¸€å¼€å§‹åšäº†ä¸€äº›å·¥ä½œï¼Œè€—æ—¶10s std::cout \u0026lt;\u0026lt; a \u0026lt;\u0026lt; std::endl; } void do_and_start_a_thread(){ int x = 1; std::thread t(do_something, x); t.detach(); std::this_thread::sleep_for(std::chrono::seconds(1));//æ¨¡æ‹Ÿè¿™é‡Œåšäº†ä¸€äº›å·¥ä½œï¼Œåªç”¨äº†1s } int main(){ do_and_start_a_thread(); } ä»ä¸Šé¢çš„ä»£ç çœ‹ï¼Œdo_and_start_a_thread()å‡½æ•°å¯åŠ¨äº†çº¿ç¨‹tå¹¶ä¼ å…¥å±€éƒ¨å˜é‡xï¼Œæˆ‘ä»¬å‡è®¾std::threadä»¥å¼•ç”¨çš„æ ¼å¼æ¥å—äº†xï¼Œ å¹¶ä¸”å°†xä¼ é€’ç»™äº†tï¼Œæ­¤æ—¶çº¿ç¨‹tä¸Šçš„do_somethingå‡½æ•°å’Œdo_and_start_a_threadå‡½æ•°å¹¶è¡Œï¼Œä¸”æ˜¾ç„¶1sådo_and_start_a_threadå‡½æ•°å…ˆç»“æŸ æ­¤æ—¶xè¢«é‡Šæ”¾æ‰äº†ï¼Œè€Œåˆè¿‡äº†9sï¼Œå½“do_something()è¿è¡Œåˆ°è®¿é—®açš„æ®µï¼Œaæ‰€å¼•ç”¨çš„xå´å·²ç»è¢«é‡Šæ”¾æ‰äº†å—ï¼Œé”™è¯¯å°±ä¼šå‘ç”Ÿã€‚\nä¸Šé¢åæ˜ äº†cppå¤šçº¿ç¨‹èµ„æºç”Ÿå‘½å‘¨æœŸç®¡ç†çš„å±é™©æ€§ï¼Œæ‰€ä»¥ç¨‹åºå‘˜ä½¿ç”¨std::refæ—¶ï¼Œå°±ä¼šæ„è¯†åˆ°è‡ªå·±æ­£åœ¨è¿›è¡Œå¤šçº¿ç¨‹ä¸­çš„å¼•ç”¨ï¼Œå‡å°å¤šçº¿ç¨‹é—®é¢˜å‘ç”Ÿçš„æ¦‚ç‡ã€‚\n2. std::threadéœ€è¦å…ˆæ„é€ æ–°çº¿ç¨‹ï¼Œç„¶ååœ¨æ–°çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨å‚æ•°ï¼Œè¿™æ„å‘³ç€å¿…é¡»æŠŠå‚æ•°å…ˆå­˜èµ·æ¥ï¼Œç„¶è€Œå¼•ç”¨æ˜¯ä¸èƒ½å­˜å‚¨çš„ã€‚ # æ— éœ€å¤šè¨€\n3. ä¸€è‡´æ€§åŸåˆ™ # è¿™é‡Œä¹Ÿæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œlambdaç­‰é»˜è®¤ä¹Ÿæ˜¯å€¼ä¼ é€’ï¼Œcppåº”ä¿æŒå„ä¸ªæ–¹é¢çš„ä¸€è‡´æ€§ã€‚\næ€»ç»“ # æ‰€ä»¥å¿…é¡»è¦æœ‰reference_wrapperè¿™æ ·çš„ç±»ï¼Œæ—¢å¯ä»¥è¢«ä½œä¸ºå¯¹è±¡æ‹·è´ï¼Œåˆå¯ä»¥ä½œä¸ºobjçš„å¼•ç”¨å‘æŒ¥ç›¸åº”çš„ä½œç”¨ã€‚\nå®ç°reference_wrapper # reference_wrapperåº”å…·å¤‡çš„åŠŸèƒ½ # æˆ‘ä»¬å…ˆå‰è¯´reference_wrapperå¿…é¡»å¯ä»¥ä½œä¸ºå¯¹è±¡æ‹·è´ï¼ŒåŒæ—¶åˆå¯ä»¥ä½œä¸ºå¼•ç”¨å‘æŒ¥ä½œç”¨ã€‚\nå‰è€…æ²¡ä»€ä¹ˆå¥½è¯´ï¼Œé»˜è®¤æ‹·è´æ„é€ å‡½æ•°å°±å¯ä»¥äº†ã€‚è€Œåè€…ï¼Œæˆ‘ä»¬è¦å®ç°å¼•ç”¨çš„æŒ‡å‘åŸå¯¹è±¡çš„ä½œç”¨ï¼Œæœ€è‡ªç„¶çš„ï¼Œå½“ç„¶æ˜¯æƒ³åˆ°ç”¨æŒ‡é’ˆæŒ‡å‘åŸå¯¹è±¡ï¼Œè€Œå¦‚ä½•ä½œä¸ºå¼•ç”¨ä½¿ç”¨ï¼Œåªè¦å®ç°ç±»å‹è½¬æ¢åˆ°T\u0026amp;çš„é‡è½½å³å¯ã€‚\nåˆç‰ˆä»£ç  # #include \u0026lt;functional\u0026gt; #include \u0026lt;memory\u0026gt; #include \u0026lt;type_traits\u0026gt; #include \u0026lt;utility\u0026gt; template \u0026lt;typename T\u0026gt; class reference_wrapper { private: // å­˜å‚¨å¼•ç”¨çš„æŒ‡é’ˆ T *_ptr; static T *_s_fun(T \u0026amp;ref) noexcept { return \u0026amp;ref; } public: template \u0026lt;typename U\u0026gt; explicit reference_wrapper(U \u0026amp;\u0026amp;ref) : _ptr(_s_fun(ref)) {} reference_wrapper(const reference_wrapper \u0026amp;other) = default; reference_wrapper \u0026amp;operator=(const reference_wrapper \u0026amp;other) = default; operator T \u0026amp;() const noexcept { return this-\u0026gt;get(); } T \u0026amp;get() const noexcept { return *_ptr; } }; è¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•ï¼Œä¹Ÿæ¼æ´ç™¾å‡ºçš„æ¨¡æ¿ï¼Œåœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†æ„é€ å‡½æ•°è·å–æŒ‡é’ˆï¼Œå­˜å‚¨æŒ‡é’ˆï¼Œå½“éœ€è¦ä½œä¸ºT\u0026amp;ä½¿ç”¨æ—¶è‡ªåŠ¨è½¬æ¢ç»™å‡ºåŸå¯¹è±¡çš„ç±»å¼•ç”¨åŠŸèƒ½ï¼Œå¹¶ç»™å‡ºäº†é»˜è®¤çš„æ‹·è´æ„é€ å‡½æ•°ã€‚\næ­¤æ—¶ï¼Œå®ƒå·²ç»å¯ä»¥ä½¿ç”¨äº†ã€‚\n#include \u0026#34;eee.h\u0026#34; #include \u0026lt;assert.h\u0026gt; #include \u0026lt;functional\u0026gt; #include \u0026lt;iostream\u0026gt; #include \u0026lt;string\u0026gt; #include \u0026lt;thread\u0026gt; #include \u0026lt;vector\u0026gt; void func(int \u0026amp;x) { x = 200; } int main() { int a = 0; reference_wrapper\u0026lt;int\u0026gt; a_r(a); func(a_r); assert(a == 200); } é€šè¿‡ç¼–è¯‘\nä½†æ˜¯å®ƒæœ‰ç€å¾ˆå¤šé—®é¢˜\nç‰¹æ®Šæƒ…å†µä¸‹ï¼Œæ‹·è´æ„é€ å‡½æ•°è¢«æ¨¡æ¿æ„é€ å‡½æ•°åŠ«æŒ # template \u0026lt;typename U\u0026gt; explicit reference_wrapper(U \u0026amp;\u0026amp;ref) : _ptr(_s_fun(ref)) {} reference_wrapper(const reference_wrapper \u0026amp;other) = default; è¿™æ®µä»£ç ä¸­æ¨¡æ¿æ„é€ å‡½æ•°å’Œæ‹·è´æ„é€ å‡½æ•°åŒæ—¶å­˜åœ¨\nè€ƒè™‘ä¸‹é¢çš„æƒ…å†µ\nint s = 0; reference_wrapper\u0026lt;int\u0026gt; a = s; reference_wrapper\u0026lt;int\u0026gt; b(a); æ€è€ƒbèƒ½å¦è¢«æ­£ç¡®æ„é€ å‡ºæ¥ï¼Œå³reference_wrapper(a)æ˜¯reference\u0026lt;int\u0026gt;è¿˜æ˜¯reference\u0026lt;reference\u0026lt;int\u0026gt;\u0026gt;ã€‚ ä¸€èˆ¬æ¥è¯´æ˜¯reference\u0026lt;int\u0026gt;çš„ï¼Œå› ä¸ºcppçš„è®¾è®¡ä¸­non-templateå‡½æ•°æ¯”templateçš„å‡½æ•°ä¼˜å…ˆçº§é«˜ï¼Œé˜²æ­¢äº†ç®€å•æƒ…å†µä¸‹é—®é¢˜çš„æš´éœ²ã€‚ ç„¶è€Œåœ¨å¤æ‚æƒ…å†µä¸‹ä»æœ‰å¯èƒ½å¤±è´¥ï¼Œä¸ºäº†å½»åº•æœç»é”™è¯¯ï¼Œåº”å½“æ·»åŠ åŒ¹é…ï¼Œå½“Uæ˜¯reference_wrapper\u0026lt;T\u0026gt;ç±»å‹æ—¶ï¼Œè§¦å‘SFINAEï¼Œä¿è¯è¢«æ‰§è¡Œçš„æ˜¯æ‹·è´æ„é€ å‡½æ•°ã€‚\nåœ¨ç±»å†…æ·»åŠ å‡ ä¸ªæ¨¡æ¿\ntemplate \u0026lt;typename Tp\u0026gt; using raw_t = typename std::remove_cv_t\u0026lt;std::remove_reference_t\u0026lt;Tp\u0026gt;\u0026gt;; //å»é™¤cvr template \u0026lt;typename _T1, typename _T2 = raw_t\u0026lt;_T1\u0026gt;\u0026gt; using not_same = typename std::enable_if\u0026lt;!std::is_same_v\u0026lt;reference_wrapper, _T2\u0026gt;\u0026gt;; template \u0026lt;typename _T1\u0026gt; using not_same_v = not_same\u0026lt;_T1\u0026gt;::type; ç„¶åä¿®æ”¹æ„é€ å‡½æ•°å‰çš„æ¨¡æ¿åˆ¤æ–­\ntemplate \u0026lt;typename U, typename = not_same_v\u0026lt;U\u0026gt;\u0026gt; explicit reference_wrapper(U \u0026amp;\u0026amp;ref) : _ptr(_s_fun(ref) {} ä¸Šé¢ä»£ç ä¸­ï¼Œraw_t\u0026lt;T\u0026gt;æ˜¯Tå»é™¤cvrä¹‹åçš„ç±»å‹ï¼Œnot_same_v\u0026lt;T\u0026gt;åˆ™æ˜¯è¦æ±‚Tå»é™¤cvrä¹‹åä¸èƒ½ç­‰äºreference_wrapper\u0026lt;T\u0026gt;(ä¸Šé¢ä»£ç ä¸­åªå†™äº†reference_wrapperï¼Œçœç•¥äº†\u0026lt;T\u0026gt;ï¼Œè¿™æ˜¯ç”±äºcppçš„ç±»å‹æ³¨å…¥)ï¼Œå¦‚æœç›¸ç­‰ï¼Œå°±ä¼šè§¦å‘SFINAEï¼Œåˆ™æ¨¡æ¿æ„é€ å‡½æ•°å¤±æ•ˆï¼Œç¼–è¯‘å™¨ä¼šå¯»æ‰¾æ‹·è´æ„é€ å‡½æ•°ç­‰å…¶ä»–åˆé€‚çš„å‡½æ•°æ¥æ‰§è¡Œã€‚ è¿™æ ·çš„æ¨¡æ¿ä¿è¯äº†æ¨¡æ¿æ„é€ å‡½æ•°æ— è®ºå¦‚ä½•ä¸å¯èƒ½åŠ«æŒæ‹·è´æ„é€ å‡½æ•°\næ— æ³•ä¼˜é›…çš„å»é™¤ä¸èƒ½è½¬æ¢æˆT *çš„ç±»å‹ # å¿…é¡»æ³¨æ„åˆ°ç±»çš„æ¨¡æ¿ç­¾åä¸­çš„ç±»å‹Tå’Œæ„é€ å‡½æ•°æ¨¡æ¿ç­¾åä¸­çš„ç±»å‹Uä¸æ˜¯åŒä¸€ä¸ªç±»å‹\ntemplate \u0026lt;typename T\u0026gt; class reference_wrapper { ...... public: template \u0026lt;typename U, typename = not_same_v\u0026lt;U\u0026gt;, typename = decltype(_s_fun(std::declval\u0026lt;U\u0026gt;()))\u0026gt; explicit reference_wrapper(U \u0026amp;\u0026amp;ref) noexcept(noexcept(_s_fun(std::declval\u0026lt;U\u0026gt;()))) : _ptr(_s_fun( std::forward\u0026lt;U\u0026gt;(ref)) /*å®Œç¾è½¬å‘é˜²æ­¢ä½¿å¾—å·¦å³å€¼å¯¹å·å…¥åº§è¿›å…¥ä¸åŒ_s_funå‡½æ•°ï¼Œè¿™æ˜¯å³å€¼è¢«æ‹’ç»çš„å…³é”®æ¡ä»¶*/) {} ...... }; å½“ä¼ å…¥çš„ç±»å‹é”™è¯¯æ—¶ï¼Œæ¯”å¦‚è¯´\ndouble s = 0; reference\u0026lt;char\u0026gt; r(s); ç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œä½†è¿™ç§é”™è¯¯æ˜¯ç±»å‹Uå‚ä¸äº†é‡è½½å†³è®®ï¼Œç„¶åç¼–è¯‘å™¨å‘ç°æ— æ³•ç¼–è¯‘ï¼ŒæŠ¥å‡ºç¡¬é”™è¯¯\nè¿™æ˜¯ä¸ç¬¦åˆè®¾è®¡å“²å­¦çš„ï¼Œæ›´å¥½çš„åŠæ³•åº”è¯¥æ˜¯é€šè¿‡SFINAEï¼Œåœ¨ä¸€å¼€å§‹å°±å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œè¿™ä¸ªUä¸èƒ½å‚ä¸é‡è½½ï¼Œå®ƒä¸ç¬¦åˆè¦æ±‚ï¼Œæ‰€ä»¥ä½ å»æ‰¾åˆ«çš„å‡½æ•°å§ã€‚æœ€åç¼–è¯‘å™¨ç”±äºæ‰¾ä¸åˆ°åˆ«çš„å‡½æ•°æŠ¥å‡ºè½¯é”™è¯¯ï¼Œè¿™å°±è¦æ›´å¥½ä¸€äº›ã€‚\näºæ˜¯åšå‡ºå¦‚ä¸‹æ”¹è¿›\ntemplate \u0026lt;typename U, typename = not_same_v\u0026lt;U\u0026gt;, typename = decltype(_s_fun(std::declval\u0026lt;U\u0026gt;()))\u0026gt; explicit reference_wrapper(U \u0026amp;\u0026amp;ref): _ptr(_s_fun(ref)) { std::declvalä»£è¡¨Uç±»å‹çš„ä¸€ä¸ªå€¼ï¼Œç„¶å_s_fun()è±¡å¾æ¥å—è¿™ä¸ªå€¼ï¼Œæµ‹è¯•æ˜¯å¦èƒ½æˆåŠŸé€šè¿‡è¯¥å‡½æ•°ï¼Œå¦‚æœå¯ä»¥æ‰å…è®¸Uå‚ä¸é‡è½½ï¼Œå¦åˆ™SFINAE\nno_exceptçš„ä¼ é€’ # æˆ‘ä»¬é»˜è®¤æ„é€ å‡½æ•°éƒ½æ˜¯æœ‰exceptionçš„ï¼Œç„¶è€Œå¯¹äºä¸€äº›ç±»å‹ï¼Œæ„é€ å‡½æ•°æ˜¯ä¸å­˜åœ¨exceptionçš„ï¼Œè¿™ç§æƒ…å†µä¸‹åº”å°†æ„é€ å‡½æ•°è®¾ä¸ºno_exceptï¼Œå¸®åŠ©ç¼–è¯‘å™¨ä¼˜åŒ–\ntemplate \u0026lt;typename U, typename = not_same_v\u0026lt;U\u0026gt;, typename = decltype(_s_fun(std::declval\u0026lt;U\u0026gt;()))\u0026gt; explicit reference_wrapper(U \u0026amp;\u0026amp;ref) noexcept(noexcept(_s_fun(std::declval\u0026lt;U\u0026gt;()))) : _ptr(_s_fun(ref)) {} å†…éƒ¨çš„no_exceptæµ‹è¯•_s_fun()å‡½æ•°å¯¹ç›¸åº”Uçš„å€¼æ˜¯å¦no_exceptï¼Œå¦‚æœæ˜¯åˆ™å¤–éƒ¨çš„no_exceptè¢«è®¾ä¸ºtrueã€‚\né˜²æ­¢ä¼ å…¥å³å€¼ # ä¿å­˜å³å€¼çš„å¼•ç”¨æ˜¯å±é™©çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦é˜²æ­¢ä¿å­˜å³å€¼çš„å¼•ç”¨\nstatic T *_s_fun(T \u0026amp;\u0026amp;) = delete; template \u0026lt;typename U, typename = not_same_v\u0026lt;U\u0026gt;, typename = decltype(_s_fun(std::declval\u0026lt;U\u0026gt;()))\u0026gt; explicit reference_wrapper(U \u0026amp;\u0026amp;ref) noexcept(noexcept(_s_fun(std::declval\u0026lt;U\u0026gt;()))) : _ptr(_s_fun( std::forward\u0026lt;U\u0026gt;(ref)) /*å®Œç¾è½¬å‘é˜²æ­¢ä½¿å¾—å·¦å³å€¼å¯¹å·å…¥åº§è¿›å…¥ä¸åŒ_s_funå‡½æ•°ï¼Œè¿™æ˜¯å³å€¼è¢«æ‹’ç»çš„å…³é”®æ¡ä»¶*/) {} æˆ‘ä»¬åšäº†ä¸¤ä»¶äº‹ï¼Œä¸€æ˜¯åˆ é™¤_s_funçš„å³å€¼å¼•ç”¨ç‰ˆæœ¬ï¼ŒäºŒæ˜¯å°†æ„é€ å‡½æ•°ä¸­ç»™_ptrèµ‹å€¼å¤„å°†ä¼ ç»™_s_fun()çš„refè¿›è¡Œå®Œç¾è½¬å‘ã€‚ å®Œç¾è½¬å‘ä½¿å¾—ä¼ ç»™_s_funçš„å³å€¼ä»æ˜¯å³å€¼ï¼Œä¿è¯å³å€¼ä¼šè¢«æ‹’ç»ï¼Œè§¦å‘SFINAE\nä½¿ç”¨å®‰å…¨çš„å–å€ï¼Œé˜²æ­¢é‡è½½\u0026amp;å¯¼è‡´çš„é”™è¯¯ # è€ƒè™‘ä»¥ä¸‹ä»£ç ï¼Œç”±äº\u0026amp;è¿ç®—ç¬¦è¢«é‡è½½ï¼Œæˆ‘ä»¬æœ¬æ¥çš„å–åœ°å€æ“ä½œæ’å®šè¢«ç»™å‡º0ä½œä¸ºç»“æœã€‚\nstruct Bad{ Bad * operator \u0026amp;(){ return 0; } int a = 10; } int main(){ Bad bad; reference_wrapper\u0026lt;Bad\u0026gt; bad_r(bad); std::cout \u0026lt;\u0026lt; r-\u0026gt;get().a; } è¿™æ˜¾ç„¶æ˜¯ä¸å¯¹çš„\nä¿®æ”¹åŸä»£ç ä¸º\nstatic T *_s_fun(T \u0026amp;ref) noexcept { return std::addressof(ref); // ä½¿ç”¨std::addressofé˜²æ­¢é‡è½½operator\u0026amp;å¯¼è‡´çš„é—®é¢˜ } // åˆ é™¤å³å€¼å¼•ç”¨ç‰ˆæœ¬ï¼Œé˜²æ­¢ä¼ å…¥ä¸´æ—¶å¯¹è±¡ static T *_s_fun(T \u0026amp;\u0026amp;) = delete; é’ˆå¯¹å¯è°ƒç”¨å¯¹è±¡çš„è°ƒç”¨å¤„ç† # æ³¨æ„åˆ°å¯è°ƒç”¨å¯¹è±¡ä¹Ÿå¯ä»¥è¢«å–å¼•ç”¨ï¼Œå¹¶ä¸”ä»–ä»¬çš„å¼•ç”¨ä¹Ÿå¯ä»¥è¢«è°ƒç”¨ï¼Œå› æ­¤reference_wrapperéœ€è¦é‡è½½()è¿ç®—ç¬¦ï¼Œä»¥æ”¯æŒè°ƒç”¨åŠŸèƒ½\ntemplate \u0026lt;typename... Args\u0026gt; typename std::__invoke_result\u0026lt;T \u0026amp;, Args...\u0026gt;::type operator()(Args \u0026amp;\u0026amp;...args) const noexcept(std::__is_nothrow_invocable\u0026lt;T \u0026amp;, Args...\u0026gt;::value) { return std::__invoke(get(), std::forward(args)...); } æœ€åç»™å‡ºæ–¹ä¾¿çš„å·¥å‚ # template \u0026lt;typename T\u0026gt; reference_wrapper(T \u0026amp;) -\u0026gt; reference_wrapper\u0026lt;T\u0026gt;; template \u0026lt;typename T\u0026gt; using raw_T = typename std::remove_cv_t\u0026lt;std::remove_reference_t\u0026lt;T\u0026gt;\u0026gt;; template \u0026lt;typename T\u0026gt; inline reference_wrapper\u0026lt;T\u0026gt; my_ref(T \u0026amp;i) noexcept { return reference_wrapper\u0026lt;raw_T\u0026lt;T\u0026gt;\u0026gt;(i); } template \u0026lt;typename T\u0026gt; inline reference_wrapper\u0026lt;T\u0026gt; my_cref(const T \u0026amp;i) noexcept { return reference_wrapper\u0026lt;const raw_T\u0026lt;T\u0026gt;\u0026gt;(i); } template \u0026lt;typename T\u0026gt; void my_ref(const T \u0026amp;\u0026amp;) = delete; template \u0026lt;typename T\u0026gt; void my_cref(const T \u0026amp;\u0026amp;) = delete; template \u0026lt;typename T\u0026gt; inline reference_wrapper\u0026lt;T\u0026gt; my_ref(reference_wrapper\u0026lt;T\u0026gt; _t) noexcept { return _t; } template \u0026lt;typename T\u0026gt; inline const reference_wrapper\u0026lt;T\u0026gt; my_cref(reference_wrapper\u0026lt;T\u0026gt; _t) noexcept { return {_t.get()}; } æœ€åä¸¤ä¸ªå·¥å‚é‡è½½æ˜¯ä¸ºäº†é˜²æ­¢wrapperåŒ…è£¹wrapper\nå®Œæˆä½“ # #include \u0026lt;functional\u0026gt; #include \u0026lt;memory\u0026gt; #include \u0026lt;type_traits\u0026gt; #include \u0026lt;utility\u0026gt; template \u0026lt;typename T\u0026gt; class reference_wrapper { // å»é™¤å¼•ç”¨å’Œconst volatileä¿®é¥° template \u0026lt;typename Tp\u0026gt; using raw_t = typename std::remove_cv_t\u0026lt;std::remove_reference_t\u0026lt;Tp\u0026gt;\u0026gt;; // SFINAEåˆ¤æ–­æ˜¯å¦ä¼ å…¥çš„Tä¸reference_wrapperç›¸åŒç±»å‹ template \u0026lt;typename _T1, typename _T2 = raw_t\u0026lt;_T1\u0026gt;\u0026gt; using not_same = typename std::enable_if\u0026lt;!std::is_same_v\u0026lt;reference_wrapper, _T2\u0026gt;\u0026gt;; template \u0026lt;typename _T1\u0026gt; using not_same_v = not_same\u0026lt;_T1\u0026gt;::type; private: // å­˜å‚¨å¼•ç”¨çš„æŒ‡é’ˆ T *_ptr; static T *_s_fun(T \u0026amp;ref) noexcept { return std::addressof(ref); // ä½¿ç”¨std::addressofé˜²æ­¢é‡è½½operator\u0026amp;å¯¼è‡´çš„é—®é¢˜ } // åˆ é™¤å³å€¼å¼•ç”¨ç‰ˆæœ¬ï¼Œé˜²æ­¢ä¼ å…¥ä¸´æ—¶å¯¹è±¡ static T *_s_fun(T \u0026amp;\u0026amp;) = delete; public: // not_same_vç”¨äºå½“ä¼ å…¥çš„Uç±»å‹ä¸reference_wrapperç›¸åŒæ—¶ï¼Œè§¦å‘SFINAEï¼Œé˜²æ­¢æ™®é€šæ„é€ å‡½æ•°è¢«è§¦å‘ // ä½¿å¾—å¯ä»¥æ­£å¸¸è°ƒç”¨æ‹·è´æ„é€ å‡½æ•° // decltypeç”¨äºæ£€æµ‹_s_funèƒ½å¦è¢«è°ƒç”¨(æ˜¯å¦å…è®¸Uå–åœ°å€è¢«è½¬åŒ–ä¸ºT*)ï¼Œè‹¥ä¸èƒ½åˆ™è§¦å‘SFINAEå¤±è´¥ template \u0026lt;typename U, typename = not_same_v\u0026lt;U\u0026gt;, typename = decltype(_s_fun(std::declval\u0026lt;U\u0026gt;()))\u0026gt; explicit reference_wrapper(U \u0026amp;\u0026amp;ref) noexcept(noexcept(_s_fun(std::declval\u0026lt;U\u0026gt;()))) : _ptr(_s_fun( std::forward\u0026lt;U\u0026gt;(ref)) /*å®Œç¾è½¬å‘é˜²æ­¢ä½¿å¾—å·¦å³å€¼å¯¹å·å…¥åº§è¿›å…¥ä¸åŒ_s_funå‡½æ•°ï¼Œè¿™æ˜¯å³å€¼è¢«æ‹’ç»çš„å…³é”®æ¡ä»¶*/) {} reference_wrapper(const reference_wrapper \u0026amp;other) = default; reference_wrapper \u0026amp;operator=(const reference_wrapper \u0026amp;other) = default; operator T \u0026amp;() const noexcept { return this-\u0026gt;get(); } T \u0026amp;get() const noexcept { return *_ptr; } // é’ˆå¯¹å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦çš„é‡è½½ï¼Œä½¿å¯è°ƒç”¨å¯¹è±¡çš„å¼•ç”¨åŒ…è£…å™¨ä»å¯ä»¥è¢«è°ƒç”¨ template \u0026lt;typename... Args\u0026gt; typename std::__invoke_result\u0026lt;T \u0026amp;, Args...\u0026gt;::type operator()(Args \u0026amp;\u0026amp;...args) const noexcept(std::__is_nothrow_invocable\u0026lt;T \u0026amp;, Args...\u0026gt;::value) { return std::__invoke(get(), std::forward(args)...); } }; template \u0026lt;typename T\u0026gt; reference_wrapper(T \u0026amp;) -\u0026gt; reference_wrapper\u0026lt;T\u0026gt;; template \u0026lt;typename T\u0026gt; using raw_T = typename std::remove_cv_t\u0026lt;std::remove_reference_t\u0026lt;T\u0026gt;\u0026gt;; template \u0026lt;typename T\u0026gt; inline reference_wrapper\u0026lt;T\u0026gt; my_ref(T \u0026amp;i) noexcept { return reference_wrapper\u0026lt;raw_T\u0026lt;T\u0026gt;\u0026gt;(i); } template \u0026lt;typename T\u0026gt; inline reference_wrapper\u0026lt;T\u0026gt; my_cref(const T \u0026amp;i) noexcept { return reference_wrapper\u0026lt;const raw_T\u0026lt;T\u0026gt;\u0026gt;(i); } template \u0026lt;typename T\u0026gt; void my_ref(const T \u0026amp;\u0026amp;) = delete; template \u0026lt;typename T\u0026gt; void my_cref(const T \u0026amp;\u0026amp;) = delete; template \u0026lt;typename T\u0026gt; inline reference_wrapper\u0026lt;T\u0026gt; my_ref(reference_wrapper\u0026lt;T\u0026gt; _t) noexcept { return _t; } template \u0026lt;typename T\u0026gt; inline const reference_wrapper\u0026lt;T\u0026gt; my_cref(reference_wrapper\u0026lt;T\u0026gt; _t) noexcept { return {_t.get()}; } ","date":"8 November 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/posts/1762602009775-post17/","section":"Posts","summary":"","title":"reference_wrapper çš„æ¨¡æ¿å®ç°","type":"posts"},{"content":"","date":"2 October 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/tags/example/","section":"Tags","summary":"","title":"Example","type":"tags"},{"content":"","date":"2 October 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/tags/tag/","section":"Tags","summary":"","title":"Tag","type":"tags"},{"content":"ä½ æœ‰æ²¡æœ‰è¿‡è¿™æ ·çš„ç»å†ï¼Ÿ\nåœ¨Unityé‡Œï¼Œæ‰‹åŠ¨ç”¨åæ ‡åˆ¤æ–­ä¸¤ä¸ªç‰©ä½“æ˜¯å¦ç¢°æ’ï¼Œå†™äº†å‡ åè¡Œè¾¹ç•Œæ£€æµ‹é€»è¾‘ï¼Œç»“æœæœ‹å‹ä¸€å¥â€œä½ ä¸ºä»€ä¹ˆä¸ç”¨Colliderï¼Ÿâ€è®©ä½ æ„£åœ¨åŸåœ°ï¼› åœ¨Cocos2d-xä¸­ï¼Œæ‰‹æ“äº†ä¸€å¥—ç­–ç•¥æ¨¡å¼æ¥å®ç°ç»„ä»¶åŠŸèƒ½åˆ‡æ¢ï¼Œåæ¥æ‰å‘ç°cocos2d::Componentæ—©å°±å†…ç½®äº†å®Œæ•´çš„ç»„ä»¶ç³»ç»Ÿï¼› åœ¨Vueé¡¹ç›®é‡Œï¼Œä¸€å±‚å±‚emitä¼ çŠ¶æ€ï¼Œçˆ¶å­å­™æ›¾ç»„ä»¶é€šä¿¡åƒæ‰“ç”µæŠ¥ï¼Œç›´åˆ°æŸå¤©å¬è¯´äº†Piniaï¼Œæ‰æ„è¯†åˆ°â€œåŸæ¥çŠ¶æ€å¯ä»¥é›†ä¸­ç®¡ç†â€ï¼› ç”šè‡³æ›´ç»å…¸çš„ï¼šCè¯­è¨€åˆå­¦è€…å†™äº†100è¡Œçš„printf(\u0026ldquo;1\u0026rdquo;)ã€printf(\u0026ldquo;2\u0026rdquo;)â€¦â€¦å´ä»æœªæƒ³è¿‡â€œå¾ªç¯â€è¿™ç§ä¸œè¥¿å­˜åœ¨ã€‚ æˆ‘ä»¬ä¸æ˜¯èƒ½åŠ›ä¸è¶³ï¼Œä¹Ÿä¸æ˜¯ä¸æ„¿å­¦ä¹ â€”â€”è€Œæ˜¯æ ¹æœ¬ä¸çŸ¥é“â€œè¿™ä¸ªé—®é¢˜å·²ç»è¢«ä¼˜é›…åœ°è§£å†³äº†â€ã€‚ è¿™ç§â€œæˆ‘ä¸çŸ¥é“æˆ‘ä¸çŸ¥é“â€çš„çŠ¶æ€ï¼Œåœ¨è®¤çŸ¥ç§‘å­¦ä¸­è¢«ç§°ä¸º â€œæœªçŸ¥çš„æœªçŸ¥â€ï¼ˆUnknown Unknownsï¼‰ã€‚å®ƒæ¯”â€œå·²çŸ¥çš„æœªçŸ¥â€æ›´å±é™©ï¼Œå› ä¸ºä½ è¿æé—®çš„æ–¹å‘éƒ½æ²¡æœ‰ã€‚\nä¸ºä»€ä¹ˆæˆ‘ä»¬æ€»åœ¨é‡å¤é€ è½®å­ # 1. é—®é¢˜æ²¡æœ‰è¢«æ˜ç¡®å®šä¹‰ï¼Œå°±æ²¡æœ‰åŠæ³•æœç´¢è§£å†³æ–¹æ¡ˆ # æ˜ç¡®çš„å®šä¹‰ä¸€ä¸ªé—®é¢˜å¹¶ä¸æ˜¯éå¸¸è‡ªç„¶çš„åšæ³•ï¼Œå› ä¸ºå®šä¹‰é—®é¢˜æ„å‘³ç€å»æŠ½è±¡å’Œç•Œå®šï¼Œå®ƒéœ€è¦ä¿æŒå¾ˆå¤§çš„æ¸…é†’ï¼Œè€Œè¿™ç§çŠ¶æ€å¾€å¾€æ˜¯å¾ˆéš¾å¾—çš„ã€‚æ‰€ä»¥é¢å¯¹é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬å¤§éƒ¨åˆ†æ—¶é—´æ˜¯æ²¡æœ‰è¶³å¤Ÿæ¸…é†’åˆ°å»æ˜ç¡®å®šä¹‰å®ƒçš„ã€‚\nå°±åƒæˆ‘ä»¬åœ¨åˆšå¼€å§‹å†™vueçš„æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨emitæ—¶å¿ƒé‡Œæƒ³çš„æ˜¯æŠŠå­ç»„ä»¶çš„æ•°æ®ä¼ ç»™çˆ¶ç»„ä»¶ï¼Œä¹ƒè‡³åé¢è®©æ›¾å­™ç»„ä»¶æŠŠæ•°æ®ç»™å­™ç»„ä»¶ï¼Œå†è®©å­™ç»„ä»¶æŠŠæ•°æ®ç»™å­ç»„ä»¶ï¼Œå†çˆ¶ç»„ä»¶\u0026hellip;æˆ‘ä»¬å¯èƒ½ä¼šè§‰å¾—è¿™æ ·å†™å¾ˆéš¾å—ï¼Œä½†æ˜¯æˆ‘ä»¬çš„çŠ¶æ€æ²¡æœ‰æ¸…é†’åˆ°èƒ½æ„è¯†åˆ°è¿™æ˜¯ä¸€ä¸ªâ€œå…¨å±€çŠ¶æ€ç®¡ç†é—®é¢˜â€ï¼Œä¹Ÿå°±æ²¡æœ‰æƒ³æ³•å»æœç´¢å…¨å±€çŠ¶æ€ç®¡ç†ï¼Œä»è€Œè®¤è¯†piniaã€‚\n2. å¤§è„‘æœ¬èº«å…·æœ‰â€œèˆ’é€‚åŒºâ€ # å¿ƒç†å­¦ä¸Šæœ‰ä¸ªæ¦‚å¿µå« â€œåŠŸèƒ½å›ºç€â€ï¼šäººå€¾å‘äºç”¨ç†Ÿæ‚‰çš„æ–¹å¼è§£å†³é—®é¢˜ï¼Œå“ªæ€•æ•ˆç‡ä½ä¸‹ã€‚\nä½ å·²ç»å­¦ä¼šäº†if-elseï¼Œé‚£ä¹ˆä½ é‡åˆ°å¤šåˆ†æ”¯å°±å †ç Œé€»è¾‘ï¼› ä½ ç†Ÿæ‚‰emitï¼Œä½ éœ€è¦é€šä¿¡å°±é äº‹ä»¶å†’æ³¡ï¼› ä½ ä¼šé¢å‘å¯¹è±¡ï¼Œé‡åˆ°å¯æ›¿æ¢è¡Œä¸ºå°±è‡ªå·±æ‰‹å†™å°è£…ã€‚\nè¿™ä¸æ˜¯æ‡’æƒ°ï¼Œè€Œæ˜¯å¤§è„‘çš„èŠ‚èƒ½æœºåˆ¶\u0026ndash;è°ƒç”¨å·²æœ‰æŠ€èƒ½æ¯”å­¦ä¹ æ–°èŒƒå¼æ›´ä¸éœ€è¦æ‰“ç ´èˆ’é€‚åŒºã€‚\n3. å­¦ä¹ è·¯å¾„ç¼ºå¤± # å¾ˆå¤šæŠ€æœ¯éƒ½ç¼ºå°‘åˆé€‚çš„å­¦ä¹ èµ„æºï¼Œæ‰€ä»¥è‡ªå·±æ¢ç´¢æ—¶æ€»æ˜¯ä¼šæ¼è¿‡å¾ˆå¤šå†…å®¹ï¼Œäº§ç”Ÿå¾ˆå¤šâ€œæœªçŸ¥çš„æœªçŸ¥â€ã€‚\nå³ä½¿æ˜¯æ¯”è¾ƒçƒ­é—¨çš„æŠ€æœ¯ï¼Œå…¶å…¥é—¨æ•™ç¨‹å¾€å¾€ä¹Ÿåªæ•™è®©éå¸¸ç®€æ˜“çš„é¡¹ç›®è·‘èµ·æ¥ï¼Œè€Œä¸æ˜¯å·¥ç¨‹å®è·µä¸­åˆ°åº•æ€ä¹ˆç”¨\næˆ‘ä»¬åªå­¦äº†æœ€åŸºç¡€çš„ç”¨æ³•ï¼Œå½“æˆ‘ä»¬åˆæ¬¡å»åšé¡¹ç›®æ—¶ï¼Œä¹Ÿåªä¼šç”¨æœ€ç®€å•çš„ç”¨æ³•ã€‚\nç»“æœå°±æ˜¯ï¼šæˆ‘ä»¬åœ¨å° demo é˜¶æ®µå…»æˆä¹ æƒ¯ï¼Œç­‰é¡¹ç›®å¤æ‚äº†æ‰æ„è¯†åˆ°é—®é¢˜ï¼Œä½†é‡æ„æˆæœ¬å·²é«˜ã€‚\n4. æ¡†æ¶çš„è½®å­è—çš„å¤ªæ·± # å°±åƒcocos2dxçš„cocos2d::Componentç»„ä»¶ä¸€æ ·ï¼Œåœ¨cocoså®˜æ–¹çš„æ•™ç¨‹ä¸­ä¸€å˜´éƒ½æ²¡æï¼Œå¦‚æœä¸æ˜¯æŸ¥cocos2dx apiæˆ‘æ ¹æœ¬ä¸çŸ¥åˆ°è¿™ä¸ªä¸œè¥¿çš„å­˜åœ¨ã€‚\nå¦‚ä½•è®­ç»ƒè‡ªå·±çœ‹è§è½®å­ # è®­ç»ƒé—®é¢˜æ•æ„Ÿåº¦å’ŒæŠ½è±¡èƒ½åŠ› # åœ¨å¼€å‘è¿‡ç¨‹ä¸­åšä¸€ä¸ªâ€œè®²ç©¶äººâ€ï¼Œä¸€æ—¦é‡åˆ°ä¸èˆ’æœçš„æƒ…å†µç«‹é©¬æ€»ç»“ä¸èˆ’æœçš„åŸå› ï¼Œå¹¶ä¸”æŸ¥é—®é¢˜ã€‚\nä¾‹å­ï¼š\nä½¿ç”¨ä¼ ç»ŸMVCæ¨¡å¼å‘ç°ä¸å¾—ä¸å†™å¾ˆå¤šèƒ¶æ°´ä»£ç ï¼Œæ ¸å¿ƒä¸šåŠ¡ä¸èšç„¦ï¼Œè€¦åˆé«˜=\u0026gt;ä¸èˆ’æœ=\u0026gt;è®¾è®¡æ¨¡å¼é—®é¢˜ï¼ŒMVCä¸èˆ’æœçš„è§£æ³•=\u0026gt;è®¤è¯†MVVMæ¶æ„ï¼Œé‡‡ç”¨å‰åç«¯åˆ†ç¦»MVVM+RESTful API=\u0026gt;è§£å†³é—®é¢˜ï¼Œè®¤çŸ¥æ‹“å®½\nå†™äº†å¾ˆå¤šå±‚emitå’Œpropsï¼Œç»„ä»¶é‡Œå„ç§é€šä¿¡å˜é‡å¤ªä¹±=\u0026gt;ä¸é¡ºçœ¼=\u0026gt;å˜é‡å’Œå‡½æ•°çš„å…¨å±€çŠ¶æ€ç®¡ç†=\u0026gt;äº†è§£piniaï¼Œå¼•å…¥piniaï¼Œé¡¹ç›®å¤§å¤§ä¼˜åŒ–ï¼Œè®¤è¯†å¢åŠ \nå…»æˆå…ˆé—®å†å†™å¥½ä¹ æƒ¯ # åœ¨å¼€å§‹å¤„ç†è¿™ä¸ªæ¨¡å—ä¹‹å‰ï¼Œå…ˆé—®è‡ªå·±\nè¿™ä¸ªåŠŸèƒ½æœ‰æ²¡æœ‰å‰äººæä¾›å¥½çš„å·¥ç¨‹å®è·µï¼› ä¸šç•Œé€šå¸¸æ€ä¹ˆåšï¼› æœ‰æ²¡æœ‰å®˜æ–¹æˆ–è€…ç¤¾åŒºå…¬è®¤çš„æœ€ä½³å®è·µã€‚ æœ‰æ—¶å€™äº”åˆ†é’Ÿçš„æœç´¢å¯ä»¥çœä¸‹äº”å°æ—¶çš„å¼¯è·¯ã€‚\nç†è§£æ¡†æ¶çš„è®¾è®¡å“²å­¦ # Unity ä¿¡å¥‰ â€œç»„åˆä¼˜äºç»§æ‰¿â€ â†’ å¤šç”¨ Componentï¼Œå°‘å†™ç»§æ‰¿æ ‘ Vue 3 + Pinia å€¡å¯¼ â€œçŠ¶æ€é›†ä¸­ + å“åº”å¼â€ â†’ å°‘ç”¨æ·±å±‚ emit React é¼“åŠ± â€œçŠ¶æ€æå‡ + è‡ªå®šä¹‰ Hookâ€ â†’ é¿å… prop drilling ç†è§£æ¡†æ¶çš„æ€æƒ³ï¼Œå°±çŸ¥é“å’Œè¿™äº›æ€æƒ³å†²çªçš„å®è·µé€šå¸¸éƒ½æœ‰æ›´å¥½çš„åšæ³•\nå¤šå®è·µï¼Œå¤šäº¤æµ # å¤šå¤šå®è·µï¼Œå¤šåšå·¥ç¨‹ï¼Œæ¸æ¸åœ°è§è¯†å°±ä¼šå¹¿å¤§ï¼ŒçŸ¥è¯†å°±ä¼šä¸°å¯Œï¼Œå¾ˆå¤šä¸€å¼€å§‹â€œæœªçŸ¥çš„æœªçŸ¥â€ï¼Œä¹Ÿå°±æˆäº†å¸¸è¯†èˆ¬çš„â€œå·²çŸ¥â€ã€‚\nå¤šäº¤æµåˆ™æ˜¯è¯´å¤šå’Œé¢†åŸŸé”™å¼€çš„ï¼Œæˆ–æ˜¯åŒé¢†åŸŸåšçš„æ›´æ·±å…¥çš„äººäº¤æµï¼Œä»è€Œä»å…¶ä»–äººèº«ä¸Šå¸æ”¶æœ€ä½³å®è·µï¼Œå½¢æˆâ€œé—®é¢˜-æ–¹æ¡ˆâ€æ˜ å°„åº“ã€‚\nç»“è¯­ # äººè¦å–„äºè°ƒç”¨äººç±»é›†ä½“çš„æ™ºæ…§ï¼Œä¸åªæ˜¯å†™ä»£ç ã€‚â€œä»é›¶å¼€å§‹å¹²â€ï¼Œâ€œä»å¤´åˆ›é€ â€å¸¸å¸¸è¢«äººèµæ‰¬ï¼Œä½†æ˜¯çœŸæ­£çš„æ™ºæ…§è€…ï¼Œåº”å½“æ˜¯åœ¨è¯†åˆ«é—®é¢˜æ¨¡å¼ä¹‹åï¼Œç²¾ç¡®åœ°è°ƒç”¨å·²æœ‰çš„é«˜æ•ˆè§£å†³æ–¹æ¡ˆã€‚\nå¾ˆå¤šæ—¶å€™æˆ‘ä»¬ç¼ºçš„ä¸æ˜¯èƒ½åŠ›ï¼Œè€Œæ˜¯â€œçŸ¥é“è¿™ä¸ªé—®é¢˜å·²ç»è¢«è§£å†³è¿‡â€çš„å…ƒè®¤çŸ¥ã€‚\nä¸‹æ¬¡å½“ä½ åœ¨å·¥ç¨‹ä¸­å‡†å¤‡æ‰‹å†™ä¸€ä¸ªé€šç”¨åŠŸèƒ½æ—¶ï¼Œä¸å¦¨å…ˆåœä¸‹æ¥ï¼Œæƒ³ä¸€æƒ³ï¼š\nè¿™ä¸ªè½®å­ï¼Œæ˜¯ä¸æ˜¯æ—©æœ‰äººé€ å¥½äº†ï¼Ÿ\nå¦‚æœç­”æ¡ˆæ˜¯â€œæ˜¯â€\u0026mdash;æ­å–œä½ ï¼Œåˆçœä¸‹äº†ä¸€ä¸ªå‘¨æœ«\næ„¿æˆ‘ä»¬å°‘é€ è½®å­ï¼Œå¤šé€ ä¸–ç•Œã€‚\nä»¥ä¸Šè§‚ç‚¹ä»…é’ˆå¯¹å·¥ç¨‹å®è·µï¼Œæ­Œé¢‚æ‰€æœ‰é€ è½®å­çš„è´¡çŒ®è€…ã€‚\n","date":"2 October 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/posts/1759422197072-post15/","section":"Posts","summary":"","title":"ç¼–ç¨‹ä¸­çš„â€œæœªçŸ¥çš„æœªçŸ¥â€ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬æ€»åœ¨æ‰‹æ“å·²æœ‰çš„è§£å†³æ–¹æ¡ˆï¼Ÿ","type":"posts"},{"content":" åšå®¢è¿ç§» # æœ¬æ¥è¿™ä¸¤å¤©åˆæ˜¯å†™å‰åç«¯åˆæ˜¯å­¦rustçš„ï¼Œæ„Ÿè§‰éœ€è¦å†™ä¸¤ç¯‡åšå®¢è®°å½•ä¸€ä¸‹æˆé•¿äº†ï¼Œç»“æœçªç„¶å‘ç°è€åšå®¢æ‹“å±•æ€§å¤ªå·®äº†ï¼Œåˆšå¥½å‘ç°blowfishè¿™ä¸ªæ›´æ™ºèƒ½ï¼Œæ›´å¼ºå¤§çš„åŸºäºhugoçš„åšå®¢æ¡†æ¶ï¼Œäºæ˜¯å¹²è„†æŒ‰ç…§blowfishä¸Šçš„æ•™ç¨‹é‡æ–°é…ç½®äº†ä¸€éï¼Œç„¶åå°†åŸæ¥åšå®¢çš„å†…å®¹å…¨éƒ¨è¿ç§»åˆ°æ–°åšå®¢äº†ã€‚\nblowfish yyds\nçŒ›çŒ›æ¨èäº†\n","date":"30 September 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/posts/1759232950429-post13/","section":"Posts","summary":"","title":"åšå®¢2.0å¯åŠ¨","type":"posts"},{"content":"","date":"30 September 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/tags/%E5%A4%8F%E5%AD%A3%E5%85%AB%E6%AD%A3/","section":"Tags","summary":"","title":"å¤å­£å…«æ­£","type":"tags"},{"content":"","date":"30 September 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/categories/%E6%8A%98%E8%85%BE/","section":"Categories","summary":"","title":"æŠ˜è…¾","type":"categories"},{"content":" èµ·å›  # æ•…äº‹çš„èµ·å› æ˜¯æˆ‘çš„å¦ä¸€ç¯‡åšæ–‡ï¼Œé‚£ç¯‡åšæ–‡åªæœ‰æ„æ€ï¼Œè€Œæ²¡æœ‰è€ƒè™‘å®é™…ä½¿ç”¨Qt/C++ Postgresqlæ¥å®ç°è¿™æ ·ä¸€ä¸ªè½¯ä»¶éš¾åº¦æ˜¯éå¸¸å¤§çš„ã€‚\nç„¶è€Œåˆšå¥½æœ€è¿‘åœ¨çœ‹C#ï¼Œä¹Ÿå¼€å§‹äº†è§£äº†ASP.NET Core Web APIï¼Œåˆæ°å¥½æˆ‘å­¦è¿‡ä¸€ç‚¹ç‚¹Postgresqlï¼Œå¹¶ä¸”æƒ³è¦äº†è§£åç«¯æ¶æ„ï¼Œäºæ˜¯æˆ‘è®¤ä¸ºæˆ‘æœ‰å……åˆ†çš„èƒ½åŠ›å»æ„å»ºé¡¹ç›®çš„åç«¯ã€‚\nè‡³äºå‰ç«¯éƒ¨åˆ†ï¼Œæˆ‘å¯¹h5,js,cssçš„åŸºç¡€å†…å®¹å·²ç»äº†è§£ï¼Œåœ¨ç°ä»£å‰ç«¯ä¸­åŸºæœ¬ä¸Šä¾èµ–vue,axios,tailwindä¹Ÿå°±èƒ½å¾ˆç®€å•çš„å®ç°åŠŸèƒ½äº†ã€‚è€Œæ°å¥½æˆ‘å¯¹vueçš„åŸºç¡€çš„æ•°æ®ç»‘å®šç•¥æœ‰è®¤è¯†ï¼ŒåŒæ—¶axiosçš„åŸºç¡€ä½¿ç”¨éå¸¸ç®€å•ï¼Œæƒ³å¿…å‰ç«¯å¼€å‘ä¹Ÿä¸åœ¨è¯ä¸‹ã€‚\nå½“ç„¶åé¢çš„å±•å¼€è¯æ˜æˆ‘ä¸ä¼šçš„éƒ¨åˆ†è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œåœ¨å®æˆ˜è¿‡ç¨‹ä¸­ä¹Ÿæ¥è§¦åˆ°å¥½ç”¨çš„tailwindç»„ä»¶åº“daisyUiï¼Œvueå¼€å‘çŠ¶æ€ç®¡ç†åº“piniaã€‚åç«¯ä¹Ÿè§åˆ°äº†æ•°æ®åº“Migrationç­‰æœ‰è¶£çš„æŠ€æœ¯ï¼Œæ‹“å®½äº†è§†é‡ã€‚\næŠ€æœ¯æ ˆæ€»ç»“\nå‰ç«¯ï¼šVue 3 (Composition API) + Pinia + Axios + Tailwind CSS + daisyUI åç«¯ï¼šASP.NET Core Web API + Entity Framework Core æ•°æ®åº“ï¼šPostgreSQL å·¥å…·é“¾ï¼šVS Code / swagger, Rider, Git å‰ç«¯å¼€å‘è¿‡ç¨‹ä¸­çš„æ”¶è· # vue # å¯¹vueç»„ä»¶ç®¡ç†æœ‰äº†æ›´æ·±åˆ»çš„è®¤è¯†ã€‚Vue æ˜¯ä¸€ä¸ªæ¸è¿›å¼ JavaScript æ¡†æ¶ï¼Œæ ¸å¿ƒä¼˜åŠ¿åœ¨äºç»„ä»¶åŒ–å¼€å‘ä¸å“åº”å¼æ•°æ®ç»‘å®šï¼Œèƒ½å¤Ÿé«˜æ•ˆåœ°æ„å»ºç”¨æˆ·ç•Œé¢ã€‚æœ‰çˆ¶å­ç»„ä»¶çš„åµŒå¥—ï¼Œå°±å¿…ç„¶é‡åˆ°å­ç»„ä»¶çˆ¶ç»„ä»¶é€šä¿¡çš„é—®é¢˜ã€‚vue3ä¸­é€šå¸¸çˆ¶ç»„ä»¶é€šè¿‡propsæˆ–è€…slotså‘å­ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œè€Œå­ç»„ä»¶ä¸»è¦é€šè¿‡emitå‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ã€‚\nåœ¨å…·ä½“çš„ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°æ¯”è¾ƒå¤šçš„é—®é¢˜æ˜¯å¸¸å¸¸ä¼šå¿˜è®°refå¯¹è±¡å¿…é¡»ä½¿ç”¨valueï¼Œè€Œä¸èƒ½ç”¨å¯¹è±¡æœ¬èº«ã€‚å› ä¸ºref æ˜¯å“åº”å¼å¼•ç”¨ï¼Œå¿…é¡»é€šè¿‡ .value è®¿é—®/èµ‹å€¼ï¼Œå¦åˆ™ä¼šç ´åå“åº”å¼é“¾ã€‚åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ ref æ—¶ï¼ŒVue ä¼šè‡ªåŠ¨è§£åŒ…ï¼ˆæ— éœ€ .valueï¼‰ï¼Œä½†åœ¨ script setupæ ‡ç­¾ä¸­å¿…é¡»æ˜¾å¼ä½¿ç”¨ã€‚\nconst obj = ref(null) obj.value = \u0026#34;foo\u0026#34; // æ­£ç¡®ï¼Œä¿®æ”¹å“åº”å¼æ•°æ® obj = \u0026#34;foo\u0026#34; // é”™è¯¯ï¼Œä¸¢å¤±å“åº”å¼èƒ½åŠ› è™½ç„¶è¿™å¯ä»¥è¯´æ˜¯ä¸€ä¸ªéå¸¸æ²¡æœ‰æŠ€æœ¯å«é‡çš„é—®é¢˜ï¼Œä½†æ˜¯ä½œä¸ºæ–°æ‰‹çš„ç¡®ä¼šç»å¸¸åœ°å†™é”™ã€‚\nåœ¨ä½¿ç”¨vueæ—¶è¿˜é‡åˆ°ä¸€ä¸ªéå¸¸æ£˜æ‰‹çš„é—®é¢˜ï¼Œå°±æ˜¯å…¨å±€çŠ¶æ€ç®¡ç†é—®é¢˜ã€‚\nå¦‚ä¸Šæ–‡æ‰€è¯´ï¼Œæœ¬èº«çš„vueåªèƒ½é€šè¿‡çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ props/slotså’Œå­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ emitæ¥è¿›è¡Œæ•°æ®çš„ä¸Šä¸‹æµåŠ¨ï¼Œç„¶è€Œå½“ä½ é‡åˆ°å¤šä¸ªç»„ä»¶åµŒå¥—\n\u0026lt;!-- App.vue --\u0026gt; \u0026lt;template\u0026gt; \u0026lt;Compo1 /\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;!-- Compo1.vue --\u0026gt; \u0026lt;template\u0026gt; \u0026lt;Compo2 /\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;!-- Compo2.vue --\u0026gt; \u0026lt;template\u0026gt; \u0026lt;!-- ...... --\u0026gt; \u0026lt;template\u0026gt; æˆ‘ä»¬ä¸”ä¸è€ƒè™‘æ›´å¤æ‚çš„æƒ…å†µï¼Œå•å•æ˜¯è·¨äº†ä¸€å±‚çš„åµŒå¥—ï¼Œå¦‚æœä½ ç°åœ¨æƒ³è¦Compo2.vueè·å¾—å¹¶æ‰§è¡ŒApp.vueçš„ä¸€ä¸ªå‡½æ•°(æ¯”å¦‚è¯´axioså‘æœåŠ¡å™¨å‘èµ·é€šä¿¡è¯·æ±‚ï¼Œå¦‚æœå°† API è°ƒç”¨é€»è¾‘é›†ä¸­åœ¨æ ¹ç»„ä»¶ï¼Œä¼šå¯¼è‡´æ·±å±‚ç»„ä»¶éš¾ä»¥å¤ç”¨)ï¼Œä½ å°±ä¸å¾—ä¸é€šè¿‡propså°†å‡½æ•°ä¸€å±‚ä¸€å±‚ä¼ ä¸‹å»\n\u0026lt;!-- App.vue --\u0026gt; \u0026lt;template\u0026gt; \u0026lt;Compo1 :getTasks=\u0026#34;getTasks\u0026#34;/\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;!-- Compo1.vue --\u0026gt; \u0026lt;template\u0026gt; \u0026lt;Compo2 :getTasks=\u0026#34;getTasks/\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;!-- Compo2.vue --\u0026gt; \u0026lt;template\u0026gt; \u0026lt;button @click=\u0026#34;handleTasks\u0026#34;\u0026gt;\u0026lt;/button\u0026gt; \u0026lt;!-- ...... --\u0026gt; \u0026lt;template\u0026gt; \u0026lt;script setup\u0026gt; defineProps([\u0026#39;getTasks\u0026#39;]) const handleTasks = async ()=\u0026gt;{ // æ‰§è¡Œä¼ è¿›æ¥çš„getTaskså‡½æ•° } \u0026lt;/script\u0026gt; è¿™ä»…ä»…æ˜¯ä¸¤å±‚åµŒå¥—çš„æƒ…å†µï¼Œå®é™…å¼€å‘ä¸­å¯èƒ½æœ‰æ›´å¤šå±‚åµŒå¥—ï¼Œå„ç§åµŒå¥—é—´è¦ä¼ é€’å„ç§å‡½æ•°ï¼Œè¿™ç§æƒ…å†µä¸€å®šæ˜¯ç³Ÿç³•çš„ï¼Œæˆ‘éœ€è¦æ›´å¥½çš„åŠæ³•è§£å†³è¿™ç§é—®é¢˜ï¼Œåœ¨é—®äº†aiä¹‹åä¹Ÿçš„ç¡®å¾—åˆ°äº†æ»¡æ„çš„å›ç­”\npinia # Pinia æ˜¯ Vue å®˜æ–¹æ¨èçš„çŠ¶æ€ç®¡ç†åº“ï¼Œæ›¿ä»£äº† Vuexï¼Œåˆ©ç”¨piniaçš„defineStoreå‡½æ•°å°±å¯ä»¥å®šä¹‰å…¨å±€çŠ¶æ€ï¼Œåœ¨ä»»ä½•ç»„ä»¶ä¸­éƒ½å¯ä»¥ç›´æ¥é€šè¿‡å‡½æ•°è·å¾—ç›¸åº”storeè€Œä½¿ç”¨å…¨å±€å‡½æ•°å’Œè¯»å†™å…¨å±€çŠ¶æ€ã€‚åœ¨ä¸€å¼€å§‹æˆ‘è¿˜è¿Ÿç–‘æ˜¯å¦è¦å‘é¡¹ç›®å¼•å…¥piniaï¼Œå› ä¸ºæ‹…å¿ƒé¡¹ç›®å˜å¾—æ›´å¤æ‚ï¼Œä½†æ˜¯åœ¨çœ‹è¿‡piniaå®˜ç½‘åï¼Œæˆ‘çš„ç–‘è™‘æ‰“æ¶ˆäº†ï¼Œpiniaçš„ä½¿ç”¨éå¸¸ç®€å•ï¼ŒåŸºæœ¬ä½¿ç”¨çœ‹äº†ä¸¤é¡µå°±å¯ä»¥ç›´æ¥ä¸Šæ‰‹äº†ï¼Œå› æ­¤æˆ‘æ¯«ä¸çŠ¹è±«åœ°å¼•å…¥äº†piniaã€‚\njsçš„æ§½ç‚¹ # jsçš„ä¸€å¤§æ§½ç‚¹æ˜¯ä½œä¸ºä¸€ä¸ªå‰ç«¯è¯­è¨€ï¼Œå®ƒå¾ˆä¸ä¸¥è°¨ï¼Œå¯èƒ½è§¦å‘å„ç§å„æ ·çš„é—®é¢˜ï¼Œè®©ä½ çš„é¡µé¢è¡¨ç°ä¸æ­£å¸¸ã€‚å¦‚æœæœ‰æœºä¼šçš„è¯ä»¥åä¸€å®šè¦å­¦å­¦ts\naxios # axiosç¡®å®æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨éå¸¸ç®€å•çš„æ¡†æ¶ï¼Œ\n// å®šä¹‰å…¨å±€çŠ¶æ€ export const useTaskStore = defineStore(\u0026#39;tasks\u0026#39;, { state: () =\u0026gt; ({ tasks: [], loading: false, error: null, selectedTask: null, }),//å…¨å±€å˜é‡ actions: { async fetchTasks() { this.loading = true this.error = null try { const response = await axios.get(\u0026#39;http://localhost:5005/taskitems\u0026#39;) this.tasks = response.data; } catch { this.error = \u0026#34;get failed\u0026#34; console.error(this.error) } finally { this.loading = false } }, async postTask(task){ this.loading = true this.error = null try{ const response = await axios.post(\u0026#39;http://localhost:5005/taskitems\u0026#39;,task) this.tasks.unshift(response.data) }catch{ this.error = \u0026#34;post failed\u0026#34; console.error(this.error) }finally{ this.loading = false } }, async updateTask(task){ this.loading = true this.error = null try{ const response = await axios.put(\u0026#39;http://localhost:5005/taskitems/\u0026#39;+task.id,task) const index = this.tasks.findIndex(t=\u0026gt;t.id===task.id) if(index != -1){ this.tasks[index] = response.data this.selectedTask = response.data } } catch{ this.error = \u0026#34;put failed\u0026#34; console.error(this.error) } finally{ this.loading = false; } } , async deleteTask(id){ this.loading = true this.error = null try{ await axios.delete(\u0026#39;http://localhost:5005/taskitems/\u0026#39;+id) const index = this.tasks.findIndex(t =\u0026gt; t.id === id); if (index !== -1) { this.tasks.splice(index, 1) } } catch{ this.error = \u0026#34;put failed\u0026#34; console.error(this.error) } finally{ this.loading = false; } } }// å…¨å±€å‡½æ•° }) Note: è¿™é‡Œä¸ºäº†çŸ­æœŸæ–¹ä¾¿ç›´æ¥ä½¿ç”¨äº†åº”ç¼–ç ï¼Œå®é™…å¼€å‘æ›´æ¨èaxios.create({ baseURL: \u0026hellip; })ï¼Œç„¶åå•ç‹¬å…¨å±€é…ç½®baseURLï¼Œæ–¹ä¾¿ç»Ÿä¸€ç®¡ç†APIåœ°å€\nå¯è§åªè¦éå¸¸ç®€å•çš„ä½¿ç”¨axiosçš„å‡½æ•°å°±å¯ä»¥å®ç°å‘é€è¯·æ±‚çš„åŸºæœ¬åŠŸèƒ½ã€‚\ntailwindcsså’ŒdaisyUI # è™½ç„¶æˆ‘åœ¨åšå¾ˆå¤šå°ç»„ä»»åŠ¡æ—¶å¯¹é¡µé¢å¤–è§‚éƒ½å‡ ä¹æ²¡æœ‰è¦æ±‚ï¼Œåªè¦å®ç°åŠŸèƒ½å°±è¡Œã€‚ä½†æ˜¯è‡ªå·±åšçš„ä¸œè¥¿ï¼Œè¿˜æ˜¯å¸Œæœ›åšçš„è®©è‡ªå·±æ»¡æ„ï¼Œæ‰€ä»¥åœ¨è¯¢é—®aiä¹‹åï¼Œaiæ¨èä½¿ç”¨tailwindcsså’ŒdaisyUIè¿›è¡Œå¤–è§‚é…ç½®\né¦–å…ˆtailwindcssæ˜¯ä¸€ä¸ªä¸»æ‰“utilityå¼çš„cssçš„å·¥å…·ï¼Œå®ƒä¸»è¦çš„ä¼˜è¶Šä¹‹å¤„åœ¨äºæŠ›å¼ƒäº†åŸæœ¬çš„å…ˆå†™å„ç§classä½¿ç”¨çš„æ€è·¯ï¼Œè€Œæ˜¯ä½¿ç”¨å†™å¥½çš„utilityï¼Œç‹¬ç«‹è€Œåˆ†æ•£çš„é…ç½®æ¯ä¸€ä¸ªæ ‡ç­¾çš„å¤–è§‚ã€‚è€ŒdaisyUIæ˜¯ä¸€ä¸ªåŸºäºtailwindcssçš„ç»„ä»¶åº“ï¼Œå®ƒé¢„å…ˆå®šä¹‰äº†å¾ˆå¤šç»„ä»¶çš„å¤–è§‚å’Œé…ç½®ï¼Œå¦‚å¡ç‰‡ï¼Œåˆ—è¡¨ç­‰å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå¹¶ä¸”daisyUI æä¾›äº†ä¸»é¢˜åˆ‡æ¢èƒ½åŠ›ï¼Œé€‚åˆå¿«é€Ÿæ„å»ºç¾è§‚ç•Œé¢ã€‚æ€»çš„æ¥è¯´ä½¿ç”¨tailwindçš„å¤–è§‚è®¾è®¡è¿˜æ˜¯å¾ˆé¡ºåˆ©çš„ã€‚\nåç«¯éƒ¨åˆ†çš„æ”¶è· # è¿™æ¬¡åç«¯å¼€å‘æ˜¯æˆ‘é¦–æ¬¡ä½¿ç”¨ ASP.NET Core æ„å»º RESTful APIã€‚è™½ç„¶æ­¤å‰æ¥è§¦è¿‡ Java Springï¼Œä½† C# çš„ç”Ÿæ€å’Œå·¥å…·é“¾ä»å¸¦æ¥ä¸å°‘æ–°é²œæ„Ÿã€‚é€šè¿‡å®è·µï¼Œæˆ‘æ¥è§¦åˆ°äº† Minimal APIã€ä¾èµ–æ³¨å…¥ã€æ•°æ®åº“è¿ç§»ã€è·¨åŸŸé…ç½®ä»¥åŠ API æ–‡æ¡£ç”Ÿæˆç­‰æŠ€æœ¯éƒ¨åˆ†\nMinimal API # ASP.NET Core çš„ Minimal APIs æ˜¯ä¸€ç§è½»é‡çº§ API å¼€å‘æ¨¡å¼ï¼Œæ— éœ€åˆ›å»ºæ§åˆ¶å™¨ç±»ï¼Œç›´æ¥åœ¨ Program.cs ä¸­é€šè¿‡æ–¹æ³•é“¾å®šä¹‰è·¯ç”±å’Œå¤„ç†é€»è¾‘ï¼Œæå¤§ç®€åŒ–äº†å°å‹é¡¹ç›®çš„æ­å»ºæµç¨‹\næ„å»ºRESTfulAPIçš„è¿‡ç¨‹å°±æ˜¯å‘appçš„mapå‡½æ•°ä¼ å›è°ƒå‡½æ•°\napp.MapGet(\u0026#34;foo\u0026#34;,async(TaskDb db)=\u0026gt;{ //...å¤„ç†è¯·æ±‚ }) åœ¨è¿™æ ·çš„åŸºç¡€ä¸‹ï¼Œå¼€å‘è¿‡ç¨‹æ˜¯ååˆ†ç®€å•çš„\né…ç½®æ•°æ®åº“ # é…ç½®æ•°æ®åº“çš„è¿‡ç¨‹è¿˜æ˜¯ç›¸å½“ç®€å•çš„ï¼Œé¦–å…ˆæˆ‘ä»¬è¦é…ç½®æ•°æ®å¯¹è±¡\n// TaskItem.cs public class TaskItem { public int Id { get; set; } public required string Title { get; set; } public string? Content { get; set; } public string? Status { get; set; } public string? Owner { get; set; } public DateTime CreatedAt { get; set; } } å†å»é…ç½®æˆ‘ä»¬çš„é’ˆå¯¹è¿™ç§å¯¹è±¡çš„æ•°æ®åº“ä¸Šä¸‹æ–‡ï¼ˆä»€ä¹ˆæ˜¯æ•°æ®åº“ä¸Šä¸‹æ–‡ï¼Œè§ä¸‹ä¸€èŠ‚DIå®¹å™¨ï¼‰\nusing Microsoft.EntityFrameworkCore; // TaskDbç»§æ‰¿DbContext class TaskDb : DbContext { public TaskDb(DbContextOptions\u0026lt;TaskDb\u0026gt; options) : base(options) { } public DbSet\u0026lt;TaskItem\u0026gt; Tasks =\u0026gt; Set\u0026lt;TaskItem\u0026gt;(); protected override void OnModelCreating(ModelBuilder modelBuilder) { base.OnModelCreating(modelBuilder); modelBuilder.Entity\u0026lt;TaskItem\u0026gt;(entity =\u0026gt; { entity.HasKey(e =\u0026gt; e.Id); entity.Property(e =\u0026gt; e.Id).ValueGeneratedOnAdd(); }); } } åœ¨è¿™é‡Œæˆ‘ä»¬æŒ‡å®šIdæ˜¯è‡ªå¢çš„ï¼Œé˜²æ­¢ä¸»é”®ç›¸åŒå‘ç”Ÿå†²çª\nDIå®¹å™¨ # å°±å’ŒJavaSpringæœ‰ä¸€æ ·ï¼ŒC#ä¹Ÿæœ‰ä¾èµ–æ³¨å…¥ï¼Œæ§åˆ¶åè½¬å®¹å™¨ã€‚å¹¶ä¸”ASP.NET Core å†…ç½®äº†è½»é‡çº§çš„ä¾èµ–æ³¨å…¥å®¹å™¨ï¼ˆMicrosoft.Extensions.DependencyInjectionï¼‰ï¼Œæ— éœ€é¢å¤–å¼•å…¥ Spring ç­‰æ¡†æ¶ï¼Œå¼€ç®±å³ç”¨ã€‚\nusing Microsoft.Extensions.DependencyInjection; åœ¨æˆ‘çœ‹æ¥ï¼ŒIoCå®¹å™¨æ‰€åšçš„äº‹å°±æ˜¯ä¸ºå„ç§ç±»è‡ªåŠ¨æ³¨å…¥ä¾èµ–å¯¹è±¡å¹¶ç®¡ç†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚è¿™æ ·é¡¹ç›®çš„å¾ˆå¤šä¸Šä¸‹æ–‡ä¾èµ–éƒ½ç»§æ‰¿ç‰¹å®šçš„ä¸Šä¸‹æ–‡éƒ¨åˆ†ï¼Œç„¶åå°±å¯ä»¥åœ¨å®¹å™¨ä¸­æ³¨å†Œï¼Œç”±å®¹å™¨æ¥ç®¡ç†ä¾èµ–å’Œç”Ÿå‘½å‘¨æœŸï¼Œç®€åŒ–äº†ç®¡ç†ä¾èµ–çš„å›°éš¾ã€‚\nè€ŒASP.NET WebApplicationçš„æ„å»ºé‡‡ç”¨æ„é€ å™¨æ¨¡å¼ï¼Œå…ˆåˆ›å»ºæ„é€ å™¨ï¼Œå†åœ¨æ„é€ å™¨ä¸­è®¾ç½®å„ç§appçš„é…ç½®ï¼Œé…ç½®å®Œæ¯•åå†ç”Ÿæˆappå¯¹è±¡ï¼Œè€Œä¾èµ–ç®¡ç†ç­‰è¿™ä¸€æ­¥å°±æ˜¯åœ¨æ„é€ å™¨ä¸­è®¾ç½®çš„\nvar builder = WebApplication.CreateBuilder(args); // Add services to the container. // Learn more about configuring OpenAPI at https://aka.ms/aspnet/openapi // é€šè¿‡AddDbContext\u0026lt;TaskDb\u0026gt;æŠŠTaskDbæ·»åŠ åˆ°å®¹å™¨ä¸­ builder.Services.AddDbContext\u0026lt;TaskDb\u0026gt;(opt =\u0026gt; { opt.UseNpgsql(builder.Configuration.GetConnectionString(\u0026#34;DefaultConnection\u0026#34;)); }); builder.Services.AddDatabaseDeveloperPageExceptionFilter(); è€Œbuilder.Serviceså°±æ˜¯ä¸€ä¸ªIServiceCollectionï¼Œæˆ‘ä»¬é€šè¿‡AddDbContextæ–¹æ³•å°†TaskDbè®¾ç½®ä¸ºæˆ‘ä»¬è¦ä½¿ç”¨çš„æ•°æ®åº“ä¸Šä¸‹æ–‡ä¾èµ–ï¼ŒåŒæ—¶è®¾ç½®æ•°æ®åº“è¿æ¥å‚æ•°ä¸ºappsettings.jsoné‡Œé¢çš„DefaultConnectionè¿™ä¸ªå­—ç¬¦ä¸²ã€‚\nè·¨åŸŸ # å½“åç«¯å†™å¥½getæ–¹æ³•ï¼Œä»å‰ç«¯è®¿é—®å´æ€»æ˜¯é‡åˆ°é—®é¢˜ï¼Œé‚£å°±æ˜¯æ—¥å¸¸CORSé—®é¢˜ï¼Œå³æœåŠ¡å™¨æ€»æ˜¯ç¦æ­¢è·¨åŸŸè¯·æ±‚\nè¿™é‡Œæˆ‘ä»¬é€šè¿‡ä¸€å¥ä»£ç è§£å†³\nbuilder.Services.AddCors(options =\u0026gt; { options.AddPolicy(\u0026#34;AllowVueDev\u0026#34;, policy =\u0026gt; { policy.AllowAnyOrigin().AllowAnyHeader().AllowAnyMethod(); // ç”Ÿäº§ç¯å¢ƒä¸­åº”é™åˆ¶å…·ä½“åŸŸåï¼Œé¿å…å®‰å…¨é£é™© }); }); swagger # æˆ‘ä½¿ç”¨ Microsoft.AspNetCore.OpenApi å’Œ Swashbuckle.AspNetCore è‡ªåŠ¨ç”Ÿæˆå¹¶å¯è§†åŒ– API æ–‡æ¡£ï¼ˆSwagger UIï¼‰ï¼Œå¹¶åœ¨å¼€å‘ç¯å¢ƒå¯ç”¨äº¤äº’å¼ UIï¼ˆç±»ä¼¼ Swagger UIï¼‰ï¼Œæ–¹ä¾¿è°ƒè¯•æ¥å£ã€‚\næ•°æ®åº“è¿ç§» # é€šè¿‡ EF Core çš„è¿ç§»åŠŸèƒ½ï¼Œæˆ‘å¯ä»¥å°† C# æ¨¡å‹å˜æ›´åŒæ­¥åˆ°æ•°æ®åº“ã€‚ä¾‹å¦‚ï¼Œæ·»åŠ æ–°å­—æ®µåï¼Œåªéœ€è¿è¡Œ\ndotnet ef migrations add AddTaskStatus dotnet ef database update å°±å¯ä»¥åŒæ­¥C#æ¨¡å‹åˆ°æ•°æ®åº“ï¼Œè€Œä¸ç”¨æ‰‹å†™sqlã€‚\nè¿ç§»æ–‡ä»¶æ˜¯ä»£ç åŒ–çš„æ•°æ®åº“å˜æ›´è®°å½•ï¼Œå¯çº³å…¥ç‰ˆæœ¬æ§åˆ¶ï¼Œå®ç°æ•°æ®åº“ç‰ˆæœ¬ç®¡ç†ï¼Œè¿™ç§åƒç®¡ç†Gité¡¹ç›®ä¸€æ ·ç®¡ç†æ•°æ®åº“ç»“æ„çš„åšæ³•ï¼Œåˆè§ä¸å¯è°“ä¸æƒŠè‰³ã€‚\næ€æƒ³æ¶æ„åˆ†æ # å…¶å®æ¶æ„åˆ†æå¾€å¾€ä¸åœ¨å¼€å‘åæ‰åˆ†æï¼Œè€Œæ˜¯åœ¨å¼€å‘å‰å°±å­¦ä¹ ï¼Œå¼€å‘åå†æ€»ç»“ï¼Œä¸è¿‡è¿™é‡Œçœç•¥å¼€å‘å‰çš„å­¦ä¹ ï¼Œç›´æ¥è°ˆå®æˆ˜æ¥è§¦åçš„è®¤è¯†äº†ã€‚\nå‰ç«¯æ¶æ„ # ä¼ ç»ŸMVCæ¨¡å‹ # å…ˆåœ¨å¼€å§‹è®²ç°ä»£é¡¹ç›®æ¶æ„ä¹‹å‰ï¼Œå…ˆè§£é‡Šä¸€ä¸‹ä¼ ç»Ÿçš„MVCæ¨¡å‹ã€‚\nMVCæ˜¯åœ¨å‰åç«¯å°šä¸åˆ†ç¦»æ—¶å°±æœ‰çš„ç»å…¸æ¨¡å‹ï¼Œéå¸¸ç»å…¸çš„ä¾‹å­å°±æ˜¯æˆ‘å½“åˆå†™è¿‡çš„Java Spring+Hibernate+StrutsæŠ€æœ¯æ ˆã€‚Struts æ˜¯ MVC çš„ Web å±‚å®ç°ï¼ŒSpring ç®¡ç†ä¸šåŠ¡é€»è¾‘ï¼ˆServiceï¼‰ï¼ŒHibernate ç®¡ç†æ•°æ®è®¿é—®ï¼ˆDAOï¼‰ï¼Œä¸‰è€…å…±åŒæ„æˆåˆ†å±‚æ¶æ„ã€‚\nMVCä¸­MæŒ‡æ¨¡å‹ï¼ŒVæŒ‡è§†å›¾ï¼Œè€ŒCæ˜¯æ§åˆ¶å™¨\nMæ˜¯åç«¯çš„å…·ä½“ä¸šåŠ¡ï¼Œå¦‚æ•°æ®åº“çš„ç®¡ç†ç­‰ï¼ŒVæ˜¯å‰ç«¯æ˜¾ç¤ºçš„è§†å›¾ã€‚MVCçš„åœ¨å½“åˆçš„å“è¶Šåœ¨äºå®ƒåœ¨å‰åç«¯ä¸åˆ†ç¦»(jsp)æ—¶ä»£å°±æœ‰äº†è®©å‰ç«¯å’Œåç«¯å°½å¯èƒ½åˆ†å¼€çš„æ„è¯†ã€‚å®ƒè¦æ±‚å‰ç«¯ä¸èƒ½ç›´æ¥å»è®¿é—®åç«¯ï¼Œè€Œæ˜¯é€šè¿‡æ§åˆ¶å™¨Controllerå»è®¿é—®åç«¯ã€‚å‰ç«¯è§†å›¾Viewåªèƒ½è°ƒç”¨Controllerï¼ŒControllerå†å»è°ƒç”¨æ¨¡å‹Modelä¸­çš„ä¸šåŠ¡ä»£ç å¤„ç†ä¸šåŠ¡ã€‚\nMVCçš„ç¼ºé™· # éšç€MVCé¡¹ç›®çš„ä¸æ–­å‘å±•ï¼Œå°±ä¸å¾—ä¸å†™å‡ºå¤§é‡Controllerèƒ¶æ°´ä»£ç æ¥é»åˆMå’ŒVï¼ŒåŒæ—¶ä½¿å¾—Controllerçš„è¿™å¯¹èŒè´£è¿‡å¤šï¼Œå®¹æ˜“æˆä¸ºä¸Šå¸ç±»ï¼Œå¯¹é¡¹ç›®ç®¡ç†äº§ç”Ÿå¾ˆå¤§çš„æŒ‘æˆ˜ï¼Œä¹Ÿé™ä½äº†å¼€å‘æ•ˆç‡ã€‚\nå‰ç«¯MVVMæ¨¡å‹ # ç°ä»£å‰ç«¯å¦‚vueé‡‡ç”¨çš„æ¶æ„å«MVVMæ¶æ„ï¼Œå®ƒç”±ä¸‰ä¸ªéƒ¨åˆ†M,V,VMæ„æˆã€‚ å®ƒå…¶å®å¾ˆå¥½ç†è§£ï¼Œä½†é¦–å…ˆè®©æˆ‘ä»¬æŠ›æ‰MVCçš„åŒ…è¢±ã€‚\nå…¶ä¸­Mä¸ºæ¨¡å‹ï¼ŒVä¸ºè§†å›¾ï¼Œè€ŒVMåˆ™å«æ¨¡å‹è§†å›¾ã€‚\næˆ‘ä»¬å…ˆç»™å‡ºç»¼è¿°ï¼š\né¦–å…ˆMVVMæ¨¡å¼å¼ºä¾èµ–äºæ•°æ®ç»‘å®šï¼Œå®ƒçš„æ ¸å¿ƒæ€è·¯æ˜¯Mä¸­å­˜ç€å‰ç«¯ä¸šåŠ¡ä»£ç ï¼ˆå¦‚å„ç§å‘åç«¯å‘é€è¯·æ±‚çš„é€»è¾‘ï¼Œå‰ç«¯å­˜æœ‰çš„æ ¸å¿ƒæ•°æ®ç­‰ï¼‰ï¼Œè€ŒVMæŒæœ‰å¸Œæœ›æš´éœ²ç»™è§†å›¾çš„ä»£ç ï¼ŒVåˆ™æ˜¯è§†å›¾å‘ˆç°ã€‚\nè¿™é‡Œçš„Mï¼ŒVå»¶ç»­äº†MVCä¸­çš„è¯æ±‡ï¼Œç„¶è€Œå’Œä¼ ç»ŸMVCä¸­çš„MVå¹¶ä¸ç›¸åŒã€‚æœ€å¤§çš„åŒºåˆ«å°±æ˜¯åº”ç”¨åœºæ™¯ä»å‰åç«¯å˜æˆäº†ä»…å‰ç«¯ã€‚è¿™é‡Œçš„Mæ˜¯å‰ç«¯çš„Mï¼Œä¸æ˜¯åç«¯çš„Mã€‚è¿™å¥è¯çš„æ„æ€æ˜¯ï¼Œåœ¨ä¼ ç»ŸMVCæ¨¡å‹ä¸­Mæ˜¯åç«¯çš„æ ¸å¿ƒé€»è¾‘(å¦‚é€šè¿‡ORMå‘æ•°æ®åº“ä¸­æ·»åŠ ä¸€åå­¦ç”Ÿ)ï¼ŒVæ˜¯å¤§å‰ç«¯ï¼Œè€Œå‰ç«¯MVCæ˜¯å•é’ˆå¯¹äºå‰ç«¯è¯´çš„ï¼Œè¿™é‡Œçš„ M æ˜¯å‰ç«¯çš„æ•°æ®æ¨¡å‹ï¼ˆå¦‚é€šè¿‡ axios å‘ /student å‘é€ POST è¯·æ±‚ï¼‰ï¼Œè€Œå…·ä½“çš„åç«¯æŒä¹…åŒ–é€»è¾‘ï¼ˆå¦‚ ORM æ“ä½œï¼‰å¯¹å‰ç«¯æ˜¯é€æ˜çš„ã€‚è€ŒVä»…ä»…æŒ‡æ˜¾ç¤ºå‡ºå»çš„è§†å›¾ã€‚\né‚£ä¹ˆä»€ä¹ˆæ˜¯VMå‘¢ï¼ŒView-Modelè§†å›¾æ¨¡å‹ï¼Œå…¶å®åå­—ä¸Šå·²ç»èƒ½çœ‹å‡ºï¼Œå®ƒå°±æ˜¯æŒ‡è§†å›¾çš„æ¨¡å‹ã€‚æˆ‘ä»¬ä¸ç›´æ¥æŠŠæ¨¡å‹ä¸­çš„æ•°æ®ç»™åˆ°è§†å›¾æ¥æ˜¾ç¤ºï¼Œè€Œæ˜¯é€šè¿‡æŠŠæ•°æ®ç»™åˆ°VMï¼ŒVMå†æŠŠæ•°æ®ç»™åˆ°Væ¥æ˜¾ç¤ºã€‚\nå‰é¢è¯´è¿‡ï¼ŒMVVMå¼ºä¾èµ–æ•°æ®ç»‘å®šï¼Œè¿™æ­£æ˜¯åœ¨VMä¸­ä½“ç°çš„ï¼ŒVMä¼šç›‘å¬ Model çš„å˜åŒ–å¹¶è‡ªåŠ¨æ›´æ–° Viewï¼ŒåŒæ—¶ä¹Ÿå¤„ç†ç”¨æˆ·çš„äº¤äº’ï¼ˆå¦‚ç‚¹å‡»ã€è¾“å…¥ï¼‰å¹¶æ›´æ–° Modelã€‚\nMVVMæ¨¡å‹çš„å¥½å¤„ # ç”±äºVMé€šè¿‡å“åº”å¼æ•°æ®è‡ªåŠ¨æ›´æ–°è§†å›¾ï¼Œç”¨æˆ·äº¤äº’é€šè¿‡äº‹ä»¶æ›´æ–°VMçŠ¶æ€ï¼Œè‡ªåŠ¨åŒæ­¥Må’ŒVçš„çŠ¶æ€ï¼Œå‡å°‘äº†æ‰‹åŠ¨æ“ä½œDOMçš„æ ·æ¿ä»£ç ï¼Œä½¿ä»£ç æ•´æ´ï¼Œé™ä½å‡ºé”™ç‡ã€‚\næ›´åŠ æ¨¡å—åŒ–ï¼ŒèŒè´£æ›´æ¸…æ™°ã€‚VMä¸“æ³¨ä¸šåŠ¡çŠ¶æ€å’Œé€»è¾‘ï¼Œä¸éœ€ç›´æ¥æ“ä½œDOM;Våªè´Ÿè´£å±•ç¤ºï¼Œé€šè¿‡å£°æ˜å¼è¯­æ³•å’ŒVMé€šä¿¡ï¼›MåªåŒ…å«æ ¸å¿ƒæ•°æ®å’Œé€»è¾‘ã€‚\næ˜“æµ‹è¯•ã€‚VMæ˜¯çº¯jså¯¹è±¡ï¼Œä¸ä¾èµ–DOMï¼Œå¯ä»¥æ–¹ä¾¿åœ°åšå•å…ƒæµ‹è¯•ã€‚\nå“åº”å¼æ•°æ®å¤©ç„¶æ›´é€‚åˆå“åº”å¼ç¼–ç¨‹ã€‚\nåç«¯æ¶æ„ # è¯¥é¡¹ç›®ç›®å‰åç«¯è¿‡äºç®€å•ï¼Œåªæ˜¯å‚è€ƒäº†RESTful APIå’ŒMinimal APIï¼Œå®é™…ä¸Šè¿˜æ²¡æœ‰é‡‡ç”¨Clean Architectureæ¶æ„ã€‚è¿˜æ²¡æœ‰åˆ’åˆ†DTOï¼Œæ‰€ä»¥è¯¥åšå®¢çœç•¥è¯¥éƒ¨åˆ†ã€‚\næœªæ¥å¯å¼•å…¥ DTOï¼ˆData Transfer Objectï¼‰ éš”ç¦»æ•°æ®åº“å®ä½“ä¸ API æ¨¡å‹ï¼Œæå‡å®‰å…¨æ€§ä¸çµæ´»æ€§ã€‚\n","date":"30 September 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/posts/1759239394060-post14/","section":"Posts","summary":"","title":"ä»é›¶æ„å»ºä»»åŠ¡ç®¡ç†åº”ç”¨ï¼šæˆ‘çš„å‰åç«¯åˆ†ç¦»åˆä½“éªŒ","type":"posts"},{"content":"","date":"2 September 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/tags/python/","section":"Tags","summary":"","title":"Python","type":"tags"},{"content":" trs # ä»Šå¤©èŠ±äº†å‡ ä¸ªå°æ—¶ä»é›¶æŠ˜è…¾ä¸€äº›åº“ï¼Œå¼€å‘äº†ä¸€ä¸ªpythonç¿»è¯‘å·¥å…·è„šæœ¬ï¼Œå½“è¯»å…¥å•è¯æ—¶è¯·æ±‚bingç½‘é¡µå†ç”¨bså¤„ç†å¾—åˆ°è¯çš„è§£é‡Šï¼Œå½“è¯»å…¥å¥å­æ—¶è¯·æ±‚å¤§æ¨¡å‹å¾—åˆ°æ™ºèƒ½ç¿»è¯‘ï¼Œå¹¶ä½¿ç”¨richåº“ç¾åŒ–äº†è¾“å‡ºã€‚\nä»“åº“åœ°å€\nå¹¶ä¸”ä»ä¸­å­¦ä¹ åˆ°äº†pythonè„šæœ¬å¦‚ä½•è½¬æ¢ä¸ºç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨pythonè¿è¡Œçš„è„šæœ¬\nå³åœ¨pythonè„šæœ¬å¤´æ·»åŠ shebangå¤´ï¼Œç„¶åå°†pythonè„šæœ¬çš„åç§°ä¸­çš„.pyåˆ å»å³å¯\näºŒæ¬¡å¼€å‘ # 2025/9/3 11:43\nåœ¨ç¾¤å‹çš„å»ºè®®ä¸‹ï¼Œæ™šä¸ŠåˆèŠ±äº†ä¸€äº›æ—¶é—´åœ¨ä¸å½±å“åŸæœ¬åŠŸèƒ½çš„æƒ…å†µä¸‹æ·»åŠ äº†å¤åˆ¶å’Œä¿å­˜åŠŸèƒ½\n","date":"2 September 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/posts/1759232939643-post11/","section":"Posts","summary":"","title":"trs","type":"posts"},{"content":"","date":"2 September 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/tags/%E5%B0%8F%E4%B8%9C%E8%A5%BF/","section":"Tags","summary":"","title":"å°ä¸œè¥¿","type":"tags"},{"content":"","date":"2 September 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/categories/%E5%BC%80%E5%8F%91/","section":"Categories","summary":"","title":"å¼€å‘","type":"categories"},{"content":"","date":"31 August 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/tags/c%23/","section":"Tags","summary":"","title":"C#","type":"tags"},{"content":"","date":"31 August 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/tags/oodp/","section":"Tags","summary":"","title":"OODP","type":"tags"},{"content":" æä¾›ä¸€ä¸ªç®€æ˜çš„ API æ¥é€æ­¥æ„å»ºä¸€ä¸ªå¤æ‚å¯¹è±¡ï¼Œå°†å…¶æ„å»ºè¿‡ç¨‹ä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»å¼€ã€‚ # å¼•å…¥ # å…ˆæ¥çœ‹ä¸€æ®µC#è‡ªå¸¦çš„Builderæ¨¡å¼çš„åº”ç”¨\nStringBuilder\nå‡è®¾æˆ‘ä»¬æƒ³è¦æ„å»ºHtmlå…ƒç´ \nstatic void Main(string[] args) { var hello = \u0026#34;hello\u0026#34;; var sb = new StringBuilder(); sb.Append(\u0026#34;\u0026lt;p\u0026gt;\u0026#34;); sb.Append(hello); sb.Append(\u0026#34;\u0026lt;/p\u0026gt;\u0026#34;); Console.WriteLine(sb.ToString()); sb.Clear(); var words = new[] { \u0026#34;hello\u0026#34;, \u0026#34;world\u0026#34; }; sb.Append(\u0026#34;\u0026lt;ul\u0026gt;\u0026#34;); foreach (var word in words) { sb.AppendFormat(\u0026#34;\u0026lt;li\u0026gt;{0}\u0026lt;li\u0026gt;\u0026#34;, word); } sb.Append(\u0026#34;\u0026lt;/ul\u0026gt;\u0026#34;); Console.WriteLine(sb.ToString()); } æˆ‘ä»¬ç°åœ¨æƒ³è¦å†™ä¸€ä¸ªHtmlElementç±»å°†Htmlå…ƒç´ å°è£…èµ·æ¥ï¼Œå®ƒéœ€è¦èƒ½å¤ŸåŒ…å«æ ‡ç­¾åï¼Œæ–‡æœ¬å’Œå­å…ƒç´ ã€‚\npublic class HtmlElement { public string Name, Text; public List\u0026lt;HtmlElement\u0026gt; Elements = []; public HtmlElement() { } public HtmlElement(string name, string text) { Name = name ?? throw new ArgumentNullException(nameof(name)); Text = text ?? throw new ArgumentNullException(nameof(text)); } } ç„¶åæˆ‘ä»¬å¸Œæœ›HtmlElementå¯ä»¥ä¼˜é›…çš„è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼ˆåº”åŒ…å«ç¼©è¿›ï¼‰\n// åœ¨ HtmlElement ç±»ä¸­ private const int IndentSize = 2; // å®šä¹‰ç¼©è¿›ä¸ºä¸¤ä¸ªç©ºæ ¼ private string ToStringImpl(int indent) { var sb = new StringBuilder(); var i = new string(\u0026#39; \u0026#39;, indent * IndentSize); sb.AppendLine($\u0026#34;{i}\u0026lt;{Name}\u0026gt;\u0026#34;); if (!string.IsNullOrEmpty(Text)) { sb.Append(new string(\u0026#39; \u0026#39;, (indent+1) * IndentSize)); sb.AppendLine(Text); } foreach (var e in Elements) { string s = e.ToStringImpl(indent + 1); sb.Append(s); } sb.AppendLine($\u0026#34;{i}\u0026lt;/{Name}\u0026gt;\u0026#34;); return sb.ToString(); } //ä½¿ç”¨é€’å½’DFSå®ç°äº†å…ƒç´ çš„å­—ç¬¦ä¸²è¾“å‡º public override string ToString() { return ToStringImpl(0); } æˆ‘ä»¬ä»ç„¶ä¸æ»¡æ„ï¼Œè¿˜æƒ³è¦ä¸€ä¸ªæ›´ç®€å•çš„æ„å»ºæ–¹å¼ï¼Œäºæ˜¯æˆ‘ä»¬è‡ªå·±å†™ä¸€ä¸ªHtmlBuilderç±»\nHtmlBuilder # è€ƒè™‘HtmlBuilderåº”è¯¥ä»¥ä¸€ä¸ªæ ¹å…ƒç´ ä¸ºåŸºç¡€ï¼Œå¯ä»¥æ·»åŠ å­å…ƒç´ ï¼Œå¯ä»¥æ¸…ç©ºå­å…ƒç´ \npublic class HtmlBuilder { private readonly string rootName; private HtmlElement _root = new HtmlElement(); public HtmlBuilder(string rootName) { this.rootName = rootName ?? throw new ArgumentNullException(nameof(rootName)); _root.Name = rootName ?? throw new ArgumentNullException(nameof(rootName)); } public void AddChild(string childName ,string childText) { var e = new HtmlElement(childName, childText); _root.Elements.Add(e); } public override string ToString() { return _root.ToString(); } public void Clear() { _root = new HtmlElement{Name = rootName}; } } ä¸Šè¿°ä»£ç ä¸­ä¸“é—¨ä¿ç•™rootNameæ˜¯å› ä¸ºæˆ‘ä»¬å¸Œæœ›Clear()åä»ç„¶ä¿æŒå…¶æ ¹å…ƒç´ \nè°ƒç”¨\npublic class Demo { static void Main(string[] args) { var builder = new HtmlBuilder(\u0026#34;ul\u0026#34;); builder.AddChild(\u0026#34;li\u0026#34;,\u0026#34;hello\u0026#34;); builder.AddChild(\u0026#34;li\u0026#34;,\u0026#34;world\u0026#34;); Console.WriteLine(builder.ToString()); } } æˆ‘ä»¬å°±å¾—åˆ°äº†è¾ƒä¸ºç¾è§‚çš„è¾“å‡º\n\u0026lt;ul\u0026gt; \u0026lt;li\u0026gt; hello \u0026lt;/li\u0026gt; \u0026lt;li\u0026gt; world \u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; æµæ„å»ºå™¨ # æ³¨æ„åˆ°StringBuilderå¯ä»¥ä½¿ç”¨ä¸€ç§Fluent Interface Patternçš„æµè°ƒç”¨æ–¹æ³• å¦‚\nsb.Append(\u0026#34;a\u0026#34;).Append(\u0026#34;b\u0026#34;).Append(\u0026#34;c\u0026#34;); æˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„HtmlBuilderä¹Ÿå…·æœ‰è¿™æ ·çš„åŠŸèƒ½ï¼Œåªéœ€è¦\npublic HtmlBuilder AddChild(string childName ,string childText) { var e = new HtmlElement(childName, childText); _root.Elements.Add(e); return this; }//å°†åŸæ¥çš„voidè¿”å›å€¼æ”¹ä¸ºè¿”å›å¯¹è‡ªèº«çš„å¼•ç”¨å³å¯ äºæ˜¯æˆ‘ä»¬å¯ä»¥è¿™æ ·è°ƒç”¨\nbuilder.AddChild(\u0026#34;li\u0026#34;,\u0026#34;hello\u0026#34;).AddChild(\u0026#34;li\u0026#34;,\u0026#34;world\u0026#34;); æµå¼æ„å»ºå™¨çš„ç»§æ‰¿ # é—®é¢˜ # å¯¹æ™®é€šæ„å»ºè€…çš„ç»§æ‰¿ä¸ä¼šå¼•èµ·ä»€ä¹ˆé—®é¢˜ï¼Œè€Œå½“ä½¿ç”¨æµå¼æ„å»ºè€…æ—¶ï¼Œé—®é¢˜åˆ™æ£˜æ‰‹èµ·æ¥ã€‚\nå…ˆæ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œæˆ‘ä»¬æœ‰Personç±»ï¼Œå®ƒå…·æœ‰åå­—å’ŒèŒä½ä¸¤ä¸ªå±æ€§ã€‚åŒæ—¶æœ‰ä¸€ä¸ªæµæ„å»ºè€…åªå¤„ç†åå­—ã€‚\npublic class Person { public string Name; public string Position; public override string ToString() { return $\u0026#34;{nameof(Name)}: {Name}, {nameof(Position)}: {Position}\u0026#34;; } } public class PersonInfoBuilder { protected Person person = new Person(); //è¿™é‡Œæ˜¯protectedå› ä¸ºæˆ‘ä»¬ä¸€ä¼šå°†å¤„ç†ç»§æ‰¿å…³ç³» public PersonInfoBuilder Called(string name) { person.Name = name; return this; } } ç°åœ¨æˆ‘ä»¬æœ‰æ–°çš„ä¸šåŠ¡éœ€æ±‚ï¼Œå³ç°åœ¨éœ€è¦Builderèƒ½åŒæ—¶å¤„ç†èŒä½çš„æ„å»ºï¼Œæˆ‘ä»¬éµå¾ªå¼€é—­åŸåˆ™ä½¿ç”¨æ–°ç±»ç»§æ‰¿PersonInfoBuilder\npublic class PersonJobBuilder: PersonInfoBuilder { public PersonJobBuilder WorksAsA(string position) { person.Position = position; return this; } } ç°åœ¨æˆ‘ä»¬å°è¯•è°ƒç”¨PersonJobBuilder\n// bad code PersonJobBuilder jb = new PersonJobBuilder(); jb.Called(\u0026#34;Li Bad\u0026#34;).WorksAsA(\u0026#34;Manager\u0026#34;); æ³¨æ„åˆ°è¿™æ®µä»£ç æ˜¯æŠ¥é”™çš„ï¼ŒåŸå› æ˜¯Calledæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªPersonInfoBuilderï¼Œè€ŒPersonInfoBuilderä¸èƒ½å¤„ç†èŒä½ç›¸å…³äº‹é¡¹ï¼Œä¸å…·å¤‡WorksAsAæ–¹æ³•\né—®é¢˜æœ¬è´¨ï¼š å½“ Fluent æ–¹æ³•éœ€è¦è¿”å› this æ—¶ï¼Œåœ¨ç»§æ‰¿é“¾ä¸­ï¼Œçˆ¶ç±»çš„æ–¹æ³•å¦‚æœè¿”å›çš„æ˜¯çˆ¶ç±»ç±»å‹ (PersonInfoBuilder)ï¼Œé‚£ä¹ˆå­ç±»çš„æ–¹æ³•é“¾å°±ä¼šåœ¨è°ƒç”¨çˆ¶ç±»æ–¹æ³•åä¸­æ–­ï¼Œæ— æ³•ç»§ç»­è°ƒç”¨å­ç±»çš„æ–¹æ³•ã€‚\nè§£å†³æ–¹æ¡ˆ # ä½¿ç”¨é€’å½’æ³›å‹\né¦–å…ˆæˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªPersonBuilderçš„æŠ½è±¡ç±»ï¼Œå°†Personçš„å­˜å‚¨å’ŒBuildæ–¹æ³•æå–åˆ°æŠ½è±¡ç±»é‡Œã€‚\npublic abstract class PersonBuilder { protected Person person = new Person(); public Person Build() { return person; } } ç„¶åç”¨é€’å½’æ³›å‹æ”¹å†™PersonInfoBuilder\npublic class PersonInfoBuilder\u0026lt;TSelf\u0026gt; : PersonBuilder where TSelf : PersonInfoBuilder\u0026lt;TSelf\u0026gt; { public TSelf Called(string name) { person.Name = name; return (TSelf)this; } } ç†è§£ï¼š ç»™PersonInfoBuilderæ·»åŠ äº†ä¸€ä¸ªæ³›å‹TSelfï¼ŒTSelfç”¨æ¥å­˜æ”¾å­ç±»çš„ç±»å‹ï¼Œäºæ˜¯Calledæ–¹æ³•å°±å¯ä»¥é€šè¿‡ç±»å‹è½¬æ¢returnå­ç±»çš„ç±»å‹ï¼Œä¸ºäº†ä¿è¯TSelfä¸€å®šæ˜¯å­ç±»çš„ç±»å‹ï¼Œæˆ‘ä»¬ç”¨whereè¯­å¥é™åˆ¶TSelfç»§æ‰¿äºè¯¥ç±»ã€‚\næˆ‘ä»¬å¯èƒ½ä¸‹æ„è¯†è¿™æ ·ä½¿ç”¨\n// bad code public class PersonJobBuilder: PersonInfoBuilder\u0026lt;PersonJobBuilder\u0026gt; { public PersonJobBuilder WorksAsA(string position) { person.Position = position; return this; } } ä½†æ˜¯å‡æƒ³å¦‚æœæœ‰ç±»åˆç»§æ‰¿PersonJobBuilderçš„è¯ï¼Œç”±äºPersonJobBuilderè¢«å›ºå®šï¼Œç»§æ‰¿PersonJobBuilderçš„ç±»åˆå°†ä¸èƒ½æ­£ç¡®å·¥ä½œã€‚å› æ­¤è¿™å†³ä¸æ˜¯ä¸€ä¸ªå¥½æ³¨æ„ã€‚\næ­£ç¡®çš„å†™æ³•åº”è¯¥æ˜¯åœ¨PersonJobBuilderä¸Šç»§ç»­æ³›å‹\npublic class PersonJobBuilder\u0026lt;TSelf\u0026gt; : PersonInfoBuilder\u0026lt;PersonJobBuilder\u0026lt;TSelf\u0026gt;\u0026gt; where TSelf : PersonJobBuilder\u0026lt;TSelf\u0026gt; { public TSelf WorksAsA(string position) { person.Position = position; return (TSelf)this; } } ç†è§£ï¼š PersonJobBuilderä¹Ÿå…·æœ‰ç±»å‹TSelfçš„æ³›å‹ï¼Œä¹Ÿç”¨whereé™åˆ¶TSelfç»§æ‰¿äºè¯¥ç±»ï¼ŒåŒæ—¶PersonJobBuilderä¸­çš„æ³›å‹ä»PersonJobBuilderæ”¹ä¸ºPersonJobBuilderï¼Œä»…æ­¤è€Œå·²\nå½“æˆ‘ä»¬é«˜å…´çš„å°è¯•ä½¿ç”¨PersonJobBuilderæ—¶ï¼Œæˆ‘ä»¬å‘ç°PersonJobBuilderå¹¶ä¸èƒ½ç›´æ¥æ„å»ºã€‚è¿™æ ·çš„æ³›å‹ç±»éƒ½ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œå¿…é¡»ç”¨ä¸€ä¸ªç±»ç»§æ‰¿æ³›å‹ç±»ï¼Œæ‰èƒ½ä½¿ç”¨ã€‚\næ‰€ä»¥æˆ‘ä»¬åœ¨Personä¸­å†™ä¸€ä¸ªBuilderç±»ï¼Œå®ƒç»§æ‰¿äºPersonJobBuilder\u0026lt;Person.Builder\u0026gt;ï¼ŒåŒæ—¶ç»™Personç±»æ·»åŠ ç›¸åº”çš„æ„å»ºæ–¹æ³•\n// åœ¨Personç±»å†… public class Builder:PersonJobBuilder\u0026lt;Builder\u0026gt; { } public static Builder New =\u0026gt; new Builder(); äºæ˜¯æˆ‘ä»¬ç°åœ¨å¯ä»¥è°ƒç”¨\nvar person = Person.New. Called(\u0026#34;Wang\u0026#34;). WorksAsA(\u0026#34;LaoBan\u0026#34;). Build(); Console.WriteLine(person); å¾—åˆ°è¾“å‡º\nName: Wang, Position: LaoBan åˆ†æ­¥æ„å»ºå™¨ # è®¾æƒ³è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬ç°åœ¨è¦åšè½¦çš„åˆ›å»ºè€…ï¼Œè½¦å­å…·æœ‰ç±»å‹ï¼Œå°è½¿è½¦(Sedan)æˆ–è·¨ç•Œè½¦(CrossOver)ï¼Œå°è½¿è½¦çš„å°ºå¯¸å¿…é¡»åœ¨15åˆ°17ä¹‹é—´ï¼Œè€Œè·¨ç•Œè½¦å¿…é¡»åœ¨17-20ä¹‹é—´ï¼Œå¦‚æœè¶…å‡ºèŒƒå›´å°±è¦æŠ¥é”™ã€‚\næˆ‘ä»¬æ³¨æ„åˆ°è¯¥æ„å»ºè¿‡ç¨‹å…·æœ‰æ˜æ˜¾çš„åˆ†æ­¥æ€§ï¼Œå¿…é¡»å…ˆçŸ¥é“ç±»å‹ï¼Œæ‰èƒ½åˆ¤æ–­å°ºå¯¸ï¼Œè¿™å°±å¼•å‡ºäº†åˆ†æ­¥æ„å»ºè€…\nå…ˆå®šä¹‰è½¦ç±»\npublic enum CarType { Sedan, Crossover } public class Car { public CarType type; public int WheelSize; } åº”ç”¨æ¥å£éš”ç¦»åŸåˆ™æˆ‘ä»¬å°†è½¦çš„æ„å»ºè¿‡ç¨‹åˆ†æˆå‡ ä¸ªç‹¬ç«‹çš„æ¥å£\npublic interface ISpecifyCarType { ISpecifyWheelSize OfType(CarType type); } public interface ISpecifyWheelSize { IBuildCar WithWheels(int size); } public interface IBuildCar { public Car Build(); } å…¶ä¸­ISpecifyCarTypeç”¨æ¥æŒ‡å®šè½¦çš„ç±»å‹ï¼Œå®ƒéšåè¿”å›ä¸€ä¸ªISpecifyWheelSizeæ¥å£è¿›ä¸€æ­¥æŒ‡å®šè½¦çš„è½®å­å°ºå¯¸ï¼Œå†è¿”å›IBuildCarè¿›ä¸€æ­¥æ„å»ºè½¦å¯¹è±¡\nåœ¨CarBuilderç±»ä¸­ï¼Œæˆ‘ä»¬å°†æ„å»ºè¿‡ç¨‹çš„å®ç°å°è£…åˆ°Implé‡Œ\npublic class CarBuilder { private class Impl:ISpecifyWheelSize,ISpecifyCarType,IBuildCar { private Car _car = new Car(); public ISpecifyWheelSize OfType(CarType type) { _car.type = type; // work as ISpecifyCarType return this; // this is ISpecifyWheelSize } public IBuildCar WithWheels(int size) { switch (_car.type) { case CarType.Crossover when size is \u0026lt; 17 or \u0026gt; 20: case CarType.Sedan when size is \u0026lt; 15 or \u0026gt; 17: throw new ArgumentException(\u0026#34;Car size out of range\u0026#34;); default: break; } _car.WheelSize = size; // work as ISpecifyWheelSize return this; // this is IBuildCar } public Car Build() { return _car; } } public static ISpecifyCarType Create() { return new Impl(); } } æ³¨æ„åˆ°ä¸Šè¿°Implç±»åŒæ—¶å®ç°äº†ISpecifyWheelSize,ISpecifyCarType,IBuildCarä¸‰ä¸ªæ¥å£ï¼Œæ‰€ä»¥å®ƒåªéœ€è¦ä¸åœreturn thiså°±å¯ä»¥è®©æ„å»ºè¿‡ç¨‹ä¸æ–­é€’è¿›ã€‚\nä½¿ç”¨å¦‚ä¸‹\nvar car = CarBuilder.Create().OfType(CarType.Sedan).WithWheels(20).Build(); å‡½æ•°å¼æ„å»ºå™¨ # æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‡½æ•°å¼çš„æ–¹å¼æ¥æ„é€ ä¸€ä¸ªPersonBuilderç±»ï¼Œæˆ‘ä»¬è®©å®ƒå­˜å‚¨ä¸‹æˆ‘ä»¬æƒ³è¦å¯¹å¯¹è±¡è¿›è¡Œçš„æ‰€æœ‰æ“ä½œçš„åˆ—è¡¨ï¼Œç„¶ååœ¨Buildæ—¶å†å¯¹åˆå§‹å¯¹è±¡è¿›è¡Œæ‰€æœ‰è¿™äº›æ“ä½œå¹¶è¿”å›\npublic sealed class PersonBuilder { private List\u0026lt;Func\u0026lt;Person, Person\u0026gt;\u0026gt; actions = new List\u0026lt;Func\u0026lt;Person, Person\u0026gt;\u0026gt;(); private PersonBuilder AddAction(Action\u0026lt;Person\u0026gt; action) { actions.Add(p=\u0026gt; { action(p); return p; }); return this; } public Person Build() =\u0026gt; actions.Aggregate(new Person(), (acc, action) =\u0026gt; action(acc)); public PersonBuilder Called(string name) =\u0026gt; Do(p =\u0026gt; p.Name = name); public PersonBuilder Do(Action\u0026lt;Person\u0026gt; action)=\u0026gt;AddAction(action); } æˆ‘ä»¬ä½¿ç”¨sealedå…³é”®å­—å¯†å°è¯¥ç±»ï¼Œå¼ºè°ƒæˆ‘ä»¬ä¸éœ€è¦ç»§æ‰¿å°±èƒ½å®ç°æƒ³è¦çš„åŠŸèƒ½ã€‚\né‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•ä¸é€šè¿‡ç»§æ‰¿æ¥æ·»åŠ æ–°çš„åŠŸèƒ½å‘¢ï¼Ÿ\nç­”æ¡ˆæ˜¯é€šè¿‡C#çš„é™æ€æ‹“å±•æ–¹æ³•\npublic static class PersonBuilderExtensions { public static PersonBuilder WorksAsA(this PersonBuilder builder, string position) =\u0026gt; builder.Do(p =\u0026gt; p.Position = position); } æ­¤æ—¶æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨WorksAsA\nvar person = new PersonBuilder().Called(\u0026#34;Wang\u0026#34;).WorksAsA(\u0026#34;LaoBan\u0026#34;).Build(); æ³¨æ„åˆ°ï¼Œå‡½æ•°å¼åˆ›å»ºè€…çš„å·¥ä½œæ–¹å¼å…¶å®éƒ½æ˜¯ç±»ä¼¼çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥å°†å‡½æ•°å¼æ„å»ºè€…å†™ä¸ºæ³›å‹ï¼Œç„¶åå†ç‰¹åŒ–ä½¿ç”¨\npublic abstract class FunctionBuilder\u0026lt;TSubject, TSelf\u0026gt; where TSelf : FunctionBuilder\u0026lt;TSubject, TSelf\u0026gt; where TSubject: new() { private List\u0026lt;Func\u0026lt;TSubject, TSubject\u0026gt;\u0026gt; actions = new List\u0026lt;Func\u0026lt;TSubject, TSubject\u0026gt;\u0026gt;(); private TSelf AddAction(Action\u0026lt;TSubject\u0026gt; action) { actions.Add(p=\u0026gt; { action(p); return p; }); return (TSelf)this; } public TSubject Build() =\u0026gt; actions.Aggregate(new TSubject(), (acc, action) =\u0026gt; action(acc)); public TSelf Do(Action\u0026lt;TSubject\u0026gt; action)=\u0026gt;AddAction(action); } public sealed class PersonBuilder:FunctionBuilder\u0026lt;Person,PersonBuilder\u0026gt; { public PersonBuilder Called(string name)=\u0026gt; Do(p =\u0026gt; p.Name = name); } public static class PersonBuilderExtensions { public static PersonBuilder WorksAsA(this PersonBuilder builder, string position) =\u0026gt; builder.Do(p =\u0026gt; p.Position = position); } åŠŸèƒ½ä»ç„¶ä¸å˜\nåˆ†æ´¾æ„å»ºå™¨ # æˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªå¯¹è±¡çš„å±æ€§åˆ†æ‹†æˆä¸åŒçš„æ–¹é¢ï¼Œäº¤ç»™ä¸åŒçš„æ„å»ºå™¨è´Ÿè´£ï¼Œæœ€åå†å°è£…ç»™ä¸€ä¸ªæ„å»ºå™¨\nä¾‹å­ # æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªPersonç±»ï¼Œå®ƒå…·æœ‰StreetAddress,Postcode,Cityç­‰å±…ä½åœ°ç›¸å…³å±æ€§å’ŒCompanyName,Position,AnnualIncomeç­‰å·¥ä½œç›¸å…³å±æ€§\npublic class Person { public string? StreetAddress,Postcode,City; public string? CompanyName, Position; public int AnnualIncome; public override string ToString() { return $\u0026#34;{nameof(StreetAddress)}: {StreetAddress}, {nameof(Postcode)}: {Postcode}, {nameof(City)}: {City}, {nameof(CompanyName)}: {CompanyName}, {nameof(Position)}: {Position}, {nameof(AnnualIncome)}: {AnnualIncome}\u0026#34;; } } ç„¶åå†å†™ä¸€ä¸ªPersonBuilderç±»ï¼ˆè¯¥ç±»æ˜¯ä¸€ä¸ªå¤–å£³ï¼Œå¹¶ä¸å¤„ç†å…·ä½“æ„å»ºè¿‡ç¨‹ï¼‰\npublic class PersonBuilder // facade { protected Person Person = new Person(); } ç„¶åæˆ‘ä»¬å†™PersonAddressBuilderå’ŒPersonJobBuilderä¸¤ä¸ªç±»ç»§æ‰¿äºPersonBuilderï¼Œåˆ†åˆ«å¤„ç†åœ°å€å’Œå·¥ä½œç›¸å…³çš„å±æ€§çš„æ„å»º\npublic class PersonAddressBuilder : PersonBuilder { public PersonAddressBuilder(Person person) { Person = person; } public PersonAddressBuilder At(string streetAddress) { Person.StreetAddress = streetAddress; return this; } public PersonAddressBuilder WithPostcode(string postcode) { Person.Postcode = postcode; return this; } public PersonAddressBuilder In(string city) { Person.City = city; return this; } } public class PersonJobBuilder:PersonBuilder { public PersonJobBuilder(Person person) { this.Person = person; } public PersonJobBuilder At(string companyName) { Person.CompanyName = companyName; return this; } public PersonJobBuilder AsA(string position) { Person.Position = position; return this; } public PersonJobBuilder Earning(int amount) { Person.AnnualIncome = amount; return this; } } å°†PersonJobBuilderå’ŒPersonAddressBuilderçš„å¯¹è±¡ä½œä¸ºPersonBuilderçš„å…¬å…±å±æ€§\npublic class PersonBuilder // facade { protected Person Person = new Person(); public PersonJobBuilder Works =\u0026gt; new PersonJobBuilder(Person); public PersonAddressBuilder Lives =\u0026gt; new PersonAddressBuilder(Person); public static implicit operator Person(PersonBuilder b) =\u0026gt; b.Person; } ä¸Šé¢ä»£ç ä¸­çš„operatoré‡è½½äº†PersonBuilderå‘Personçš„éšå¼è½¬æ¢ï¼Œä½¿å¾—PersonBuilderæ„å»ºå¯¹è±¡ä½¿ç”¨æ—¶æ›´æ–¹ä¾¿\näºæ˜¯æˆ‘ä»¬å¯ä»¥è¿™æ ·ä½¿ç”¨æ„å»ºå™¨\nvar pb = new PersonBuilder(); Person person = pb.Works.At(\u0026#34;Huawei\u0026#34;).AsA(\u0026#34;Manager\u0026#34;).Earning(1000000) .Lives.At(\u0026#34;Nanluoguxiang\u0026#34;).In(\u0026#34;Beijing\u0026#34;).WithPostcode(\u0026#34;666\u0026#34;); æ€»ç»“ # æ„å»ºå™¨æ˜¯ç”¨æ¥æ„å»ºå¯¹è±¡çš„ç‹¬ç«‹çš„ç»„ä»¶ ä½ å¯ä»¥é€šè¿‡æ„é€ å‡½æ•°ç”Ÿæˆæ„å»ºå™¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é™æ€å‡½æ•°è¿”å›æ„å»ºå™¨ å¦‚æœè¦è®©æ„å»ºå™¨å®ç°æµå¼æ¥å£ï¼Œåªéœ€è¦return thisï¼Œå¦‚æœè¿˜è¦å®ç°ç»§æ‰¿ï¼Œä½¿ç”¨é€’å½’æ³›å‹ ä¸€ä¸ªå¯¹è±¡çš„ä¸åŒæ–¹é¢å¯ä»¥ç”±ä¸åŒçš„æ„å»ºå™¨é€šè¿‡ä¸€ä¸ªåŸºç±»å¹¶è”èµ·æ¥ ","date":"31 August 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/posts/1759232934070-post10/","section":"Posts","summary":"","title":"OODP6 æ„é€ å™¨æ¨¡å¼ (Builder)","type":"posts"},{"content":"","date":"31 August 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/categories/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/","section":"Categories","summary":"","title":"æŠ€æœ¯ç›¸å…³","type":"categories"},{"content":" Gamma Categorization # è®¾è®¡æ¨¡å¼é€šå¸¸è¢«åˆ†ä¸ºä¸‰ç±»\nè¿™è¢«ç§°ä¸ºGammaåˆ†ç±»(çºªå¿µErich Gamma)\nåˆ›é€ å‹æ¨¡å¼ Creational Patterns # å¤„ç†å¯¹è±¡çš„åˆ›å»º æ˜¾ç¤º(æ„é€ å‡½æ•°)æˆ–éšå¼(ä¾èµ–æ³¨å…¥DI,åå°„ç­‰) æ•´æ‰¹çš„(å•è¯­å¥single statement)æˆ–åˆ†æ®µçš„(ä¸€æ­¥ä¸€æ­¥åœ°step-by-step) ç»“æ„æ€§æ¨¡å¼ Structural Patterns # å’Œç»“æ„ç›¸å…³çš„(å¦‚ç±»æˆå‘˜) è®¸å¤šæ¨¡å¼æ˜¯æ¨¡ä»¿éšå«äºå®ƒä¹‹ä¸‹çš„ç±»çš„æ¥å£çš„åŒ…è£…å™¨ å¼ºè°ƒè‰¯å¥½APIè®¾è®¡çš„é‡è¦æ€§ è¡Œä¸ºå‹æ¨¡å¼ Behavioral Patterns # æ²¡æœ‰ä¸­å¿ƒä¸»é¢˜ ","date":"31 August 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/posts/1759232929063-post9/","section":"Posts","summary":"","title":"OODP5 Gammaåˆ†ç±»","type":"posts"},{"content":"","date":"31 August 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","section":"Tags","summary":"","title":"è®¾è®¡æ¨¡å¼","type":"tags"},{"content":" è®¾è®¡ä»£ç ç»“æ„æ—¶ï¼Œé«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½å±‚æ¨¡å—ï¼ŒäºŒè€…éƒ½åº”è¯¥ä¾èµ–å…¶æŠ½è±¡ã€‚æŠ½è±¡ä¸åº”è¯¥ä¾èµ–äºç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚ # é”™è¯¯åšæ³• # æˆ‘ä»¬çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œè®¾è®¡ä¸€ä¸ªå…³ç³»å­˜å‚¨çš„æ¨¡å—ï¼Œå…±æœ‰ä¸‰ç§å…³ç³»(Relationship)ï¼Œçˆ¶ï¼Œå­ï¼ŒåŒè¾ˆã€‚\näºæ˜¯æˆ‘ä»¬ç»™å‡ºRelationshipæšä¸¾å’ŒPersonç±»\npublic enum Relationship { Parent, Child, Sibling } public class Person { public string Name; } å¼€å§‹è®¾è®¡ä½å±‚æ¨¡å—ï¼Œè®°å½•å…³ç³»çš„Relationshipç±»ï¼Œæˆ‘ä»¬éšæ„çš„ä½¿ç”¨tupleæ¥è®°å½•å„ç§å…³ç³»ï¼Œå¹¶ç®€å•ç»™å‡ºæ·»åŠ å…³ç³»çš„apiï¼ŒåŒæ—¶å°†ç§æœ‰çš„relationsæˆå‘˜é€šè¿‡å…¬æœ‰çš„Relationså‡½æ•°æš´éœ²å‡ºå»\npublic class Relationships { private List\u0026lt;(Person, Relationship,Person)\u0026gt; relations = []; public void AddParentAndChild(Person parent, Person child) { relations.Add((parent, Relationship.Parent, child)); relations.Add((child, Relationship.Child, parent)); } public List\u0026lt;(Person, Relationship, Person)\u0026gt; Relations =\u0026gt; relations; } äºæ˜¯æˆ‘ä»¬åœ¨é«˜å±‚æ¨¡å—ä¸­ä½¿ç”¨ç›´æ¥ä½¿ç”¨åº•å±‚æ¨¡å—ï¼Œå³åœ¨Demoæ„é€ å‡½æ•°ä¸­ç›´æ¥æ¥å—Relationshipsä½œä¸ºå‚æ•°ï¼Œå½“æˆ‘ä»¬æƒ³è¦æŸ¥è¯¢Johnçš„å­©å­æ˜¯è°æ—¶ï¼Œæˆ‘ä»¬éå†é€šè¿‡Relationså¾—åˆ°çš„å…³ç³»å…ƒç»„è¿›è¡ŒæŸ¥è¯¢è¾“å‡ºå³å¯ã€‚\npublic class Demo { public Demo(Relationships relationships) { var relations = relationships.Relations; foreach (var r in relations.Where(x =\u0026gt; x.Item1.Name == \u0026#34;John\u0026#34; \u0026amp;\u0026amp; x.Item2 == Relationship.Parent)) { Console.WriteLine($\u0026#34;John has a child {r.Item3.Name}\u0026#34;); } } static void Main(string[] args) { var parent = new Person(){Name = \u0026#34;John\u0026#34;}; var child1 = new Person(){Name = \u0026#34;Jane\u0026#34;}; var child2 = new Person(){Name = \u0026#34;Jonny\u0026#34;}; var relations = new Relationships(); relations.AddParentAndChild(parent, child1); relations.AddParentAndChild(parent, child2); new Demo(relations); } } åæ€ç¯èŠ‚ # æ³¨æ„åˆ°ï¼Œå½“æˆ‘ä»¬è¿™æ ·åšæ—¶ï¼Œç”±äºé«˜å±‚ç›´æ¥ä¾èµ–äºä½å±‚ï¼Œä½å±‚æ˜¯â€œä¸å¯æ‹†æ¢çš„â€ã€‚\nä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬ä¸æƒ³å†ä½¿ç”¨å…ƒç»„åˆ—è¡¨ä½œä¸ºæˆ‘ä»¬çš„æ•°æ®ç»“æ„ï¼Œè€Œæ˜¯æƒ³è¦åˆ‡æ¢æˆå…ƒç»„æ•°ç»„ï¼Œæˆ–è€…ç›´æ¥æ¢æˆæ ‘ç»“æ„ã€‚æˆ‘ä»¬çš„ä»£ç å°±å¿…é¡»å¤§é‡é‡å†™ï¼Œä¸ä»…è¦å®Œå…¨é‡å†™ä½å±‚è®°å½•å…³ç³»çš„ç±»ï¼Œè¿˜å¾—å°†ä¸Šå±‚Demoç±»é‡Œç›´æ¥è°ƒç”¨ä½å±‚ç±»çš„éƒ¨åˆ†å…¨éƒ¨é‡å†™ã€‚\nå¦‚æœè¿™æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„é¡¹ç›®æ¶æ„ï¼Œè¿™ä¸ªä½å±‚æ¨¡å—å¯èƒ½è¢«å¾ˆå¤šä¸ªé«˜å±‚æ¨¡å—è°ƒç”¨ï¼Œè¿™å°†å¸¦æ¥å·¨å¤§çš„ç»´æŠ¤ä»£ä»·ã€‚\nä»DIPä¸­æ€»ç»“ï¼Œå³æ˜¯é«˜å±‚æ¨¡å—ç›´æ¥ä¾èµ–ä½å±‚æ¨¡å—(Demoç±»ç›´æ¥ä½¿ç”¨Relationshipsç±»)ï¼ŒæŠ½è±¡ä¾èµ–äºç»†èŠ‚(â€œä»å…³ç³»ä¸­æŸ¥æ‰¾ç‰¹å®šäººçš„å­©å­â€çš„æŠ½è±¡ä¾èµ–äºäº†å…ƒç»„å’Œéå†è¿™æ ·çš„å®ç°ç»†èŠ‚)\næ­£ç¡®æ“ä½œ # é«˜å±‚æ¨¡å—ä¸åº”ä¾èµ–äºä½å±‚æ¨¡å—ï¼ŒäºŒè€…éƒ½åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚é‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæŠ½è±¡æ”¾åœ¨Demoå’ŒRelationshipsä¹‹é—´ã€‚\näºæ˜¯æˆ‘ä»¬ç»™å‡ºæ¥å£IRelationshipBrowser\npublic interface IRelationshipBrowser { IEnumerable\u0026lt;Person\u0026gt; FindAllChildOf(string person); } è¿™ä¸ªæ¥å£å³ä¸ºæŠ½è±¡çš„ä¸€ç§å½¢å¼ï¼Œå®ƒä»£è¡¨ç€â€œå…³ç³»æµè§ˆå™¨â€çš„æŠ½è±¡æ¦‚å¿µï¼Œè€Œä¸æ¶‰åŠä»»ä½•å®ƒçš„å®ç°ï¼Œåªè¯´æ˜å®ƒåº”è¯¥æœ‰æ‰¾åˆ°æŸäººæ‰€æœ‰å­©å­çš„åŠŸèƒ½ã€‚\näºæ˜¯æˆ‘ä»¬ç°åœ¨å¯ä»¥è®©é«˜å±‚ä¾èµ–æŠ½è±¡\nè¿™é‡Œå‚æ•°çš„ç±»å‹çš„æ­£æ˜¯æŠ½è±¡ï¼Œè€Œä¸æ˜¯åº•å±‚æ¨¡å—æœ¬èº«ã€‚ä¸æ­¤åŒæ—¶ä½ å¯ä»¥çœ‹åˆ°APIæ¯”åŸæ¥å¥½çœ‹çš„å¤šã€‚\npublic Demo(IRelationshipBrowser browser) { foreach (var r in browser.FindAllChildOf(\u0026#34;John\u0026#34;)) { Console.WriteLine($\u0026#34;John has a child {r.Name}\u0026#34;); } } ä½å±‚æ¨¡å—çš„å®ç°ä¹Ÿä¾èµ–æ¥å£çš„æŠ½è±¡ï¼Œå³ä½å±‚æ¨¡å—å¿…é¡»å®ç°è¯¥æ¥å£çš„åŠŸèƒ½ã€‚\n/// public class Relationships : IRelationshipBrowser { private List\u0026lt;(Person, Relationship,Person)\u0026gt; relations = [];\npublic void AddParentAndChild(Person parent, Person child) { relations.Add((parent, Relationship.Parent, child)); relations.Add((child, Relationship.Child, parent)); } public IEnumerable\u0026lt;Person\u0026gt; FindAllChildOf(string person) { var relations = Relations; return relations.Where(x =\u0026gt; x.Item1.Name ==person \u0026amp;\u0026amp; x.Item2 == Relationship.Parent).Select(x =\u0026gt; x.Item3); // low level } public List\u0026lt;(Person, Relationship, Person)\u0026gt; Relations =\u0026gt; relations; }\nè¿™é‡Œå‡½æ•°çš„å®ç°ä½¿ç”¨äº†LINQæ¥ç®€åŒ–ã€‚ æ³¨æ„åˆ°æ­¤æ—¶ç›¸æ¯”äºä¹‹å‰çš„ä»£ç ï¼Œå½“æˆ‘ä»¬æƒ³è¦æ¢ä¸€ç§Relationshipsï¼Œå¦‚ç”¨æ ‘ä¾†å®ç°åŒæ ·çš„åŠŸèƒ½æ—¶ï¼Œæˆ‘ä»¬ä¸å†éœ€è¦æ›´æ”¹ä¸Šå±‚æ¨¡å—äº†ã€‚æ­¤æ—¶åªéœ€è¦å†™ä¸€ä¸ªç±»ï¼Œæ¯”å¦‚è¯´TreeRelationshipsï¼Œè®©å®ƒå®ç°IRelationshipBrowseræ¥å£ï¼Œåœ¨æ‰€æœ‰ä¸Šå±‚è°ƒç”¨ä¸­å°±å¯ä»¥ç›´æ¥ä½¿ç”¨TreeRelationshipsç±»äº†ï¼ˆå› ä¸ºä¸Šå±‚æ¨¡å—æ¥å—æ‰€æœ‰å®ç°äº†IRelationshipBrowserçš„ç±»ä½œä¸ºå‚æ•°ï¼‰ã€‚ä»ç›´è§‚ç†è§£ä¸Šï¼Œä¸Šå±‚æ¨¡å—åªå…³å¿ƒä¸‹å±‚æä¾›ä»€ä¹ˆæ ·çš„æœåŠ¡ï¼Œæ‰€ä»¥åº”åªä¾èµ–äºæŠ½è±¡ï¼Œè¿™æ ·ä¸‹å±‚å³ä½¿æ›´æ”¹äº†æœåŠ¡çš„æä¾›å•†ï¼Œåªè¦èƒ½æä¾›ç›®æ ‡æœåŠ¡ï¼Œä¹Ÿèƒ½æ­£ç¡®åœ°è¿è¡Œã€‚ ","date":"30 August 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/posts/1759232901555-post8/","section":"Posts","summary":"","title":"OODP4 ä¾èµ–å€’ç½®åŸåˆ™(DIP)","type":"posts"},{"content":" ä¸åº”å¼ºè¿«å®¢æˆ·ç«¯ä¾èµ–å®ƒä¸ä½¿ç”¨çš„æ–¹æ³• # è¯¥åŸåˆ™è¿‡äºç®€å•ï¼Œç´¢æ€§ä¸æ”¾ä»£ç \nä¾‹å­ # ä¸€ä¸ªç°ä»£æ‰“å°æœºå¯ä»¥æ‰“å°(Print),ä¼ çœŸ(Fax),æ‰«æ(Scan)ï¼Œæ‰€ä»¥æˆ‘ä»¬å†™äº†ä¸€ä¸ªæ¥å£IMachineï¼Œå¹¶è®©å®ƒåŒ…æ‹¬è¿™ä¸‰ä¸ªåŠŸèƒ½çš„å‡½æ•°\nç„¶è€Œï¼Œå½“æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªè€å¼æ‰“å°æœºæ—¶ï¼Œè¯¥æ‰“å°æœºåªæœ‰æ‰“å°åŠŸèƒ½ï¼Œå¦‚æœå®ç°IMachineæ¥å£ï¼ŒFaxå’ŒScanä¸¤ä¸ªå‡½æ•°è¦ä¹ˆæŠ›å‡ºå¼‚å¸¸ï¼Œè¦ä¹ˆæ‰“å°æœªå®ç°ï¼Œè¿™éƒ½æ˜¯éå¸¸ä¸å¥½çš„æƒ…å†µ(å³æˆ‘ä»¬å¼ºè¿«è€å¼æ‰“å°æœºä¾èµ–äº†å®ƒä¸ä½¿ç”¨çš„æ–¹æ³•)ã€‚\nå› æ­¤æˆ‘ä»¬è¦æŠŠIMachineæ¥å£æ‹†åˆ†å¼€ï¼Œå¦‚IPrinter,IFaxer,IScannerï¼Œä»¥ä½¿å¾—å®¢æˆ·ç«¯éœ€è¦ä½¿ç”¨ä»€ä¹ˆæ–¹æ³•å°±å®ç°ä»€ä¹ˆæ¥å£ã€‚\nå’ŒSRPçš„åŒºåˆ« # ç‰¹æ€§ SRP (å•ä¸€èŒè´£åŸåˆ™) ISP (æ¥å£éš”ç¦»åŸåˆ™) å…³æ³¨ç‚¹ ç±»çš„å†…éƒ¨å‡èšåŠ› - ä¸€ä¸ªç±»åº”è¯¥åªåšä¸€ä»¶äº‹ æ¥å£çš„å¤–éƒ¨è€¦åˆ - ä¸€ä¸ªæ¥å£ä¸åº”è¯¥å¼ºè¿«å®¢æˆ·ç«¯ä¾èµ–å®ƒä¸éœ€è¦çš„æ–¹æ³• ä¸»è¦å¯¹è±¡ ç±»ï¼ˆClassï¼‰ æ¥å£ï¼ˆInterfaceï¼‰ æ ¸å¿ƒæ€æƒ³ åªæœ‰ä¸€ä¸ªå˜åŒ–åŸå›  ä¸å¼ºè¿«å®¢æˆ·æ¥å—ä¸éœ€è¦çš„æ–¹æ³• è§£å†³çš„é—®é¢˜ ç±»è¿‡äºåºå¤§ã€åƒµåŒ–ã€éš¾ä»¥ä¿®æ”¹ æ¥å£è‡ƒè‚¿ï¼Œå¯¼è‡´å®¢æˆ·ç«¯å®ç°ä¸å¿…è¦çš„ç©ºæ–¹æ³•æˆ–æ”¶åˆ°â€œæ¥å£æ±¡æŸ“â€ å…³ç³» ç›¸è¾…ç›¸æˆã€‚é€šå¸¸ï¼Œéµå¾ªSRPæ‹†åˆ†å‡ºçš„ç±»ï¼Œè‡ªç„¶ä¼šæ‹¥æœ‰æ›´å•ä¸€ã€æ›´èšç„¦çš„æ¥å£ã€‚è€Œä¸ºäº†éµå¾ªISPï¼Œä½ å¸¸å¸¸éœ€è¦å…ˆè¿ç”¨SRPæ¥å˜æ¸…èŒè´£ã€‚ ","date":"29 August 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/posts/1759232893885-post7/","section":"Posts","summary":"","title":"OODP3 æ¥å£éš”ç¦»åŸåˆ™(ISP)","type":"posts"},{"content":" çˆ¶ç±»çš„å¯¹è±¡å¯ä»¥è¢«å­ç±»çš„å¯¹è±¡æ›¿æ¢ï¼Œè€Œç¨‹åºçš„è¡Œä¸ºä¸ä¼šå‘ç”Ÿå˜åŒ– # ä¾‹å­ # æˆ‘ä»¬æœ‰Rectangleç±»\npublic class Rectangle { public int Height{get; set; } public int Width { get; set; } public Rectangle() { } public Rectangle(int width, int height) { Width = width; Height = height; } public override string ToString() { return $\u0026#34;{nameof(Width)}: {Height}, {nameof(Height)}: {Height}\u0026#34;; } } åŸºäºRectangleç±»å†å†™Squareç±»\npublic class Square : Rectangle { public new int Width { set { base.Width = base.Height = value; } } public new int Height { set { base.Width = base.Height = value; } } } æ³¨æ„åˆ°æˆ‘ä»¬ç”¨newå…³é”®å­—hideäº†çˆ¶ç±»çš„Widthå’ŒHeight\næ­¤æ—¶Squareå’ŒRectangleéƒ½å¯ä»¥æ­£å¸¸å·¥ä½œ\nRectangle rc = new Rectangle(); rc.Width = 20; rc.Height = 40; Console.WriteLine(\u0026#34;Area: {0}\u0026#34;, Area(rc)); Square sq = new Square(); sq.Width = 4; Console.WriteLine(\u0026#34;Area {0}\u0026#34;, Area(sq)); å¯ä»¥çœ‹åˆ°ç»“æœæ­£å¸¸\nè€Œç”±äºæ­£æ–¹å½¢æ˜¯ä¸€ç§é•¿æ–¹å½¢ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨çˆ¶ç±»å‹Rectangleæ¥æŒæœ‰å­ç±»å‹Squareçš„å¼•ç”¨ã€‚\né‚£ä¹ˆé—®é¢˜å‘ç”Ÿäº†\nRectangle sq = new Square(); sq.Width = 4; Console.WriteLine(\u0026#34;Area {0}\u0026#34;, Area(sq)); è¾“å‡º: Area 0 è¿™å°±è¿åäº†é‡Œæ°æ›¿æ¢åŸåˆ™ï¼Œå½“å­ç±»çš„å¯¹è±¡æ›¿æ¢çˆ¶ç±»æ—¶å‘ç”Ÿäº†é”™è¯¯ã€‚\nä¿®æ”¹æ–¹æ¡ˆ # å°†Rectangleä¸­Widthå’ŒHeightçš„get,setä¿®æ”¹ä¸ºè™šï¼Œä½¿çˆ¶ç±»å¼•ç”¨æ‰§è¡Œå­ç±»çš„å‡½æ•°\npublic virtual int Height{get; set; } public virtual int Width { get; set; } åŒæ—¶å°†Squareä¸­çš„ç”¨newæ¥hideçˆ¶ç±»å‹æ”¹ä¸ºç”¨overrideæ¥é‡å†™çˆ¶ç±»è™šå‡½æ•°\npublic override int Width { set { base.Width = base.Height = value; } } public override int Height { set { base.Width = base.Height = value; } } åˆ™ç°åœ¨ä¸ä¼šå‡ºç°é”™è¯¯\nç‰¹æ€§ é‡Œæ°æ›¿æ¢åŸåˆ™ (LSP) è™šå‡½æ•°/é‡å†™ (virtual/override) æœ¬è´¨ è®¾è®¡åŸåˆ™ (Principle) è¯­æ³•æœºåˆ¶ (Syntax) ç›®çš„ æŒ‡å¯¼å¦‚ä½•æ­£ç¡®åœ°å»ºç«‹ç»§æ‰¿å…³ç³»ï¼Œç¡®ä¿è¡Œä¸ºå…¼å®¹æ€§ã€‚ å®ç°è¿è¡Œæ—¶å¤šæ€ï¼Œå…è®¸å­ç±»å®šåˆ¶æ–¹æ³•å®ç°ã€‚ å…³ç³» ç›®æ ‡ (What \u0026amp; Why) ä¸»è¦å®ç°æ‰‹æ®µ (How) C#, C++å’ŒJavaçš„è™šå‡½æ•°è¾¨æ # ç‰¹æ€§ C# Java å£°æ˜å¯é‡å†™æ–¹æ³• ä½¿ç”¨ virtual å…³é”®å­— é»˜è®¤å°±æ˜¯â€œè™šâ€çš„ï¼Œæ— éœ€å…³é”®å­— é‡å†™æ–¹æ³• ä½¿ç”¨ override å…³é”®å­— ä½¿ç”¨ @Override æ³¨è§£ï¼ˆæœ€ä½³å®è·µï¼‰ é˜»æ­¢é‡å†™ æ–¹æ³•ä¸æ ‡è®°ä¸º virtual ä½¿ç”¨ final å…³é”®å­— éšè—æ–¹æ³•ï¼ˆéå¤šæ€ï¼‰ ä½¿ç”¨ new å…³é”®å­— æ— å…³é”®å­—ï¼ˆä½†ä¸æ¨èï¼Œä¼šäº§ç”Ÿè­¦å‘Šï¼‰ ç‰¹æ€§ C# C++ é»˜è®¤è¡Œä¸º éè™šæ‹Ÿ (æ–¹æ³•é»˜è®¤ä¸èƒ½è¢«é‡å†™) éè™šæ‹Ÿ (æ–¹æ³•é»˜è®¤ä¸å…·æœ‰å¤šæ€æ€§) å®ç°å¤šæ€ åŸºç±» virtual + æ´¾ç”Ÿç±» override åŸºç±» virtual (æ´¾ç”Ÿç±»æ¨èä½¿ç”¨ override) è®¾è®¡å“²å­¦ â€œé»˜è®¤å…³é—­â€ï¼šå‡ºäºå®‰å…¨å’Œæ€§èƒ½ï¼Œéœ€è¦æ˜¾å¼å¼€æ”¾é‡å†™èƒ½åŠ›ã€‚ â€œä¸ä¸ºæœªä½¿ç”¨çš„ä¸œè¥¿ä»˜å‡ºä»£ä»·â€ï¼šéœ€è¦å¤šæ€æ—¶ï¼Œæ˜¾å¼è¯·æ±‚å¹¶æ‰¿æ‹…å…¶å¼€é”€ã€‚ ä½ çš„åšæ³• æ…é‡é€‰æ‹©å“ªäº›æ–¹æ³•è®¾ä¸ºvirtualã€‚åªå¼€æ”¾éœ€è¦æ‰©å±•çš„ç‚¹ã€‚ å¿…é¡»ä¸ºæ‰€æœ‰éœ€è¦å¤šæ€çš„æ–¹æ³•åŠ ä¸Švirtualï¼Œå¦åˆ™æ— æ³•æŒ‰é¢„æœŸå·¥ä½œã€‚ ","date":"27 August 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/posts/1759232888597-post6/","section":"Posts","summary":"","title":"OODP2 é‡Œæ°æ›¿æ¢åŸåˆ™(LSP)","type":"posts"},{"content":" è½¯ä»¶å®ä½“åº”å¯¹æ‹“å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ # ä»¥è§„æ ¼æ¨¡å¼ä¸ºä¾‹ # ä¸å¥½çš„å†™æ³• # public enum Color { Red, Green, Blue, } public enum Size { Small, Medium, Large, Yuge } public class Product { public string Name; public Color Color; public Size Size; public Product(string name, Color color, Size size) { if (name == null) { throw new ArgumentNullException(paramName: nameof(name)); } Name = name; Color = color; Size = size; } } æˆ‘ä»¬æœ‰ä¸€ä¸ªäº§å“ç±»ï¼Œä¸Šçº§éœ€è¦æˆ‘ä»¬ä½¿ç”¨sizeè¿‡æ»¤äº§å“ï¼Œç°åœ¨æˆ‘ä»¬æ¥åšäº§å“çš„è¿‡æ»¤ç±»\npublic class ProductFilter { public static IEnumerable\u0026lt;Product\u0026gt; FilterBySize(IEnumerable\u0026lt;Product\u0026gt; products, Size size) { foreach(var p in products) if (p.Size == size) yield return p; } } æ³¨æ„åˆ°ï¼Œå¦‚æœä¸Šçº§åˆéœ€è¦æ ¹æ®colorè¿‡æ»¤äº§å“ï¼Œæˆ‘ä»¬åˆéœ€è¦æ‰“å¼€ProductFilterç±»ï¼Œæ·»åŠ FilterByColorï¼Œè€Œå¦‚æœä¸Šçº§åˆéœ€è¦æˆ‘ä»¬åŒæ—¶æ ¹æ®colorå’Œsizeè¿‡æ»¤äº§å“ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å†æ·»åŠ FilterByColorAndSizeã€‚\nå¦‚æœProductæœ‰æ›´å¤šå±æ€§ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦åå¤çš„ä¿®æ”¹ProductFilterç±»ï¼Œè€Œè¯¥ç±»å¯èƒ½å·²ç»äº¤ä»˜äº†ã€‚å› æ­¤è¿™æ˜¯ä¸€ä¸ªéå¸¸ä¸å¥½çš„è®¾è®¡ã€‚\nè§„æ ¼æ¨¡å¼ # é¦–å…ˆæˆ‘ä»¬å®šä¹‰ä¸¤ä¸ªæ¥å£\npublic interface ISpecification\u0026lt;in T\u0026gt; { bool IsSatisfied(T t); } public interface IFilter\u0026lt;T\u0026gt; { IEnumerable\u0026lt;T\u0026gt; Filter(IEnumerable\u0026lt;T\u0026gt; items, ISpecification\u0026lt;T\u0026gt; spec); } å¯ä»¥ç†è§£æˆISpecificationå¤„ç†tæ˜¯å¦æ»¡è¶³æŸä¸ªæ¡ä»¶ï¼Œè€ŒIFilterè¿”å›ä¼ å…¥çš„itemsä¸­æ‰€æœ‰æ»¡è¶³ä¼ å…¥çš„specè§„æ ¼çš„é¡¹ç›®ã€‚\né‚£ä¹ˆæ­¤æ—¶Filteråªè¦è¿™æ ·å†™ï¼Œä¹‹åä¾¿å¯ä»¥å›ºå®šä½ä¸å†å¼€æ”¾ä¿®æ”¹äº†ã€‚\npublic class BetterFilter : IFilter\u0026lt;Product\u0026gt; { public IEnumerable\u0026lt;Product\u0026gt; Filter(IEnumerable\u0026lt;Product\u0026gt; items, ISpecification\u0026lt;Product\u0026gt; spec) { foreach (var i in items) { if (spec.IsSatisfied(i)) { yield return i; } } } } è€ŒåŸºç¡€çš„è§„æ ¼ç±»ä¹Ÿå¾ˆç®€å•\npublic class SizeSpecification(Size size) : ISpecification\u0026lt;Product\u0026gt; { public bool IsSatisfied(Product t) =\u0026gt; t.Size == size; } public class ColorSpecification(Color color) : ISpecification\u0026lt;Product\u0026gt; { public bool IsSatisfied(Product t) =\u0026gt; t.Color == color; } å¦‚æœæˆ‘ä»¬éœ€è¦è§„æ ¼çš„ç»„åˆ\npublic class AndSpecification\u0026lt;T\u0026gt;(ISpecification\u0026lt;T\u0026gt; first, ISpecification\u0026lt;T\u0026gt; second) : ISpecification\u0026lt;T\u0026gt; { private ISpecification\u0026lt;T\u0026gt; _first = first ?? throw new ArgumentNullException(paramName: nameof(first)), _second = second ?? throw new ArgumentNullException(paramName: nameof(second)); public bool IsSatisfied(T t) { return _first.IsSatisfied(t) \u0026amp;\u0026amp; _second.IsSatisfied(t); } } åªéœ€è¦ç”¨AndSpecificationå°†ä¸åŒçš„Specificationç»“åˆåˆ°ä¸€èµ·ç”Ÿæˆæ–°çš„Specificationå³å¯ã€‚\næ³¨æ„åˆ°å¼€å‘è¿‡ç¨‹ä¸­BetterFilterç±»å®Œå…¨ä¸éœ€è¦ä¿®æ”¹ï¼Œåªéœ€è¦æ‹“å±•åœ°å¤šå†™å‡ ä¸ªå®ç°ISpecificationçš„è§„æ ¼ç±»å°±å¯ä»¥å®ŒæˆåŠŸèƒ½çš„æ‰©å±•ã€‚\n","date":"27 August 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/posts/1759232882925-post5/","section":"Posts","summary":"","title":"OODP1 å¼€é—­åŸåˆ™(OCP)","type":"posts"},{"content":" ä¸€ä¸ªç±»åº”è¯¥ä»…æœ‰ä¸€ä¸ªå¼•èµ·å®ƒå˜åŒ–çš„åŸå›  # å®è·µä¸Šæˆ‘é‡åˆ°çš„é—®é¢˜æ˜¯å¦‚ä½•å®šä¹‰å¼•èµ·å®ƒå˜åŒ–çš„åŸå› ï¼Ÿæ˜¯å®è§‚çš„åŸå› è¿˜æ˜¯å¾®è§‚çš„åŸå› ï¼Ÿ\nç­”æ¡ˆæ˜¯å®è§‚çš„ # Eric: å•ä¸€èŒè´£åŸåˆ™å®è·µè¿‡ç¨‹æ€ä¹ˆæŠŠæ¡ï¼Œæ¯”å¦‚è¯¾ç¨‹ä¸­è¯´ä½ è¦åšä¸€ä¸ªJournalç±»æ¥å­˜å…¥å’ŒæŸ¥çœ‹æ—¥è®°ï¼Œå¦‚æœä½ åˆæƒ³è¦æŒä¹…åŒ–å®ƒçš„è¯ï¼Œä¸èƒ½ç›´æ¥åœ¨Journalç±»ä¸­å†™Saveæ–¹æ³•ï¼Œè€Œæ˜¯è¦å†™ä¸€ä¸ªæ–°ç±»Persistenceæ¥ç®¡ç†æŒä¹…åŒ–ã€‚ä¾æ®æ˜¯ä¸€ä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªå¼•èµ·ä»–å˜åŒ–çš„åŸå› ã€‚ä½†æ˜¯Journalç±»æœ¬èº«ä¸ä¹Ÿæœ‰å­˜å…¥å’ŒæŸ¥çœ‹ä¸¤ä¸ªåŠŸèƒ½å—ï¼Œä¸¤ä¸ªåŠŸèƒ½å˜åŒ–æ—¶éƒ½è¦ä¿®æ”¹Journalç±»å•Šï¼Œè¿™ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™å—ï¼Ÿéš¾é“è¦æŠŠå­˜å…¥å’ŒæŸ¥çœ‹ä¸¤ä¸ªåŠŸèƒ½ä¹Ÿåˆ†æˆä¸¤ä¸ªç±»å—ï¼Ÿå…·ä½“å®è·µä¸­æˆ‘ä»¬åˆè¦æ€ä¹ˆæŠŠæ¡å‘¢ï¼Ÿ\nDeepseekçš„å›ç­” # 1. é‡æ–°ç†è§£â€œå¼•èµ·å˜åŒ–çš„åŸå› â€ # å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰çš„æ ¸å¿ƒä¸æ˜¯â€œä¸€ä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªæ–¹æ³•â€ï¼Œè€Œæ˜¯â€œä¸€ä¸ªç±»åº”è¯¥æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå¼•èµ·å®ƒå˜åŒ–çš„åŸå› â€ã€‚\nè¿™åŸå› ä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„åŠŸèƒ½ï¼Œè€Œæ˜¯ä¸€ä¸ª**é«˜å±‚çº§çš„ã€ä¼šå˜åŒ–çš„â€œè½´â€**æˆ–â€œå…³åˆ‡ç‚¹â€ã€‚\nJournalç±»çš„èŒè´£ï¼šç®¡ç†æ—¥è®°çš„æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆä¸šåŠ¡å®ä½“ï¼‰ã€‚\nå˜åŒ–åŸå› ï¼šå½“â€œæ—¥è®°â€è¿™ä¸ªæ¦‚å¿µæœ¬èº«éœ€è¦å˜åŒ–æ—¶ï¼Œè¿™ä¸ªç±»æ‰éœ€è¦æ”¹å˜ã€‚ ä¾‹å­ï¼šæˆ‘ä»¬éœ€è¦ä¸ºæ—¥è®°å¢åŠ â€œæ ‡ç­¾â€åŠŸèƒ½ï¼›æˆ‘ä»¬éœ€è¦ä¿®æ”¹æ—¥è®°çš„æ ‡é¢˜é•¿åº¦é™åˆ¶ï¼›æˆ‘ä»¬éœ€è¦åœ¨æ—¥è®°å†…å®¹ä¸­æ”¯æŒMarkdownæ ¼å¼ã€‚è¿™äº›å˜åŒ–éƒ½å›´ç»•ç€â€œæ—¥è®°æ˜¯ä»€ä¹ˆã€æœ‰ä»€ä¹ˆè¡Œä¸ºâ€è¿™ä¸ªæ ¸å¿ƒå…³åˆ‡ç‚¹ã€‚ â€œæ·»åŠ æ¡ç›®â€å’Œâ€œæŸ¥çœ‹æ¡ç›®â€ éƒ½æ˜¯å¯¹æ—¥è®°è¿™ä¸ªæ ¸å¿ƒå®ä½“è¿›è¡Œæ“ä½œçš„æ ¸å¿ƒè¡Œä¸ºã€‚å®ƒä»¬å…±äº«åŒä¸€ä¸ªå˜åŒ–åŸå› â€”â€”æ—¥è®°ä¸šåŠ¡é€»è¾‘çš„å˜æ›´ã€‚å› æ­¤ï¼Œå®ƒä»¬å±äºåŒä¸€ä¸ªèŒè´£ã€‚ Persistenceç±»çš„èŒè´£ï¼šå¤„ç†æ•°æ®çš„æŒä¹…åŒ–æœºåˆ¶ï¼ˆå­˜å‚¨ä¸è¯»å–ï¼‰ã€‚\nå˜åŒ–åŸå› ï¼šå½“æ•°æ®å­˜å‚¨çš„æ–¹å¼æˆ–ä½ç½®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¿™ä¸ªç±»æ‰éœ€è¦æ”¹å˜ã€‚ ä¾‹å­ï¼šæˆ‘ä»¬ä¹‹å‰æŠŠæ—¥è®°ä¿å­˜åˆ°æ–‡æœ¬æ–‡ä»¶ï¼Œç°åœ¨æƒ³æ”¹æˆä¿å­˜åˆ°MySQLæ•°æ®åº“ï¼›æˆ‘ä»¬æƒ³ä»æœ¬åœ°å­˜å‚¨æ”¹ä¸ºäº‘å­˜å‚¨ï¼ˆå¦‚AWS S3ï¼‰ï¼›æˆ‘ä»¬æƒ³æ”¹å˜æ–‡ä»¶ä¿å­˜çš„æ ¼å¼ï¼ˆä»JSONæ”¹ä¸ºXMLï¼‰ã€‚è¿™äº›å˜åŒ–å®Œå…¨ä¸å½±å“Journalç±»æœ¬èº«æ˜¯ä»€ä¹ˆï¼Œå®ƒåªå…³å¿ƒâ€œæ€ä¹ˆå­˜ã€å­˜åˆ°å“ªé‡Œâ€ã€‚ 2. ä¸ºä»€ä¹ˆä¸èƒ½æŠŠSaveæ–¹æ³•æ”¾åœ¨Journalé‡Œï¼Ÿ # å¦‚æœå°†Saveæ–¹æ³•ç›´æ¥æ”¾åœ¨Journalç±»ä¸­ï¼Œå°±æ„å‘³ç€è¿™ä¸ªç±»ç°åœ¨æœ‰ä¸¤ä¸ªå¼•èµ·å®ƒå˜åŒ–çš„åŸå› ï¼š\næ—¥è®°çš„ä¸šåŠ¡é€»è¾‘å˜åŒ–ï¼ˆå¦‚å¢åŠ æ ‡ç­¾ï¼‰ã€‚ æŒä¹…åŒ–æœºåˆ¶çš„å˜åŒ–ï¼ˆå¦‚ä»æ–‡ä»¶å­˜åˆ°æ•°æ®åº“ï¼‰ã€‚ è¿™è¿åäº†SRPã€‚å¸¦æ¥çš„ç›´æ¥é—®é¢˜æ˜¯ï¼š\nå¯ç»´æŠ¤æ€§å·®ï¼šä¸€ä¸ªè´Ÿè´£æ•°æ®åº“è¿æ¥çš„å¼€å‘äººå‘˜ä¿®æ”¹äº†Saveæ–¹æ³•ï¼Œå¯èƒ½ä¼šæ„å¤–å½±å“åˆ°å¦ä¸€ä¸ªåªå…³å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚addEntryæ–¹æ³•ï¼‰çš„å¼€å‘äººå‘˜ã€‚ å¤ç”¨æ€§å·®ï¼šå¦‚æœä½ æƒ³é‡ç”¨Journalè¿™ä¸ªä¸šåŠ¡å®ä½“ï¼Œä½†æ–°çš„é¡¹ç›®æƒ³ç”¨ä¸åŒçš„å­˜å‚¨æ–¹å¼ï¼ˆæ¯”å¦‚å†…å­˜å­˜å‚¨ï¼‰ï¼Œä½ å°±å¿…é¡»æŠŠJournalç±»ä¹Ÿæ‹–è¿‡å»ï¼Œå¹¶é™„å¸¦ä¸€å †ä½ å¯èƒ½ä¸éœ€è¦çš„æ–‡ä»¶I/Oä»£ç ã€‚ æµ‹è¯•å›°éš¾ï¼šæµ‹è¯•Journalçš„ä¸šåŠ¡é€»è¾‘æ—¶ï¼Œä½ å¿…é¡»ç»•è¿‡æˆ–æ¨¡æ‹Ÿï¼ˆMockï¼‰æ–‡ä»¶ç³»ç»Ÿæ“ä½œï¼Œä½¿å¾—å•å…ƒæµ‹è¯•å˜å¾—å¤æ‚ã€‚ è€Œé€šè¿‡å¼•å…¥Persistenceç±»ï¼Œä½ å°†å˜åŒ–éš”ç¦»äº†ã€‚Journalçš„å˜æ›´å’ŒPersistenceçš„å˜æ›´äº’ä¸å½±å“ã€‚ä½ å¯ä»¥è½»æ¾åœ°æ›¿æ¢ä¸åŒçš„æŒä¹…åŒ–ç­–ç•¥è€Œä¸å½±å“æ ¸å¿ƒä¸šåŠ¡ä»£ç ã€‚\n3. å®è·µä¸­å¦‚ä½•æŠŠæ¡è¿™ä¸ªâ€œåº¦â€ï¼Ÿï¼ˆå…³é”®éƒ¨åˆ†ï¼‰ # è¿™æ˜¯ä¸€ä¸ªè®¾è®¡æƒè¡¡çš„è‰ºæœ¯ï¼Œæ²¡æœ‰ç»å¯¹æ­£ç¡®çš„ç­”æ¡ˆï¼Œä½†æœ‰ä¸€äº›éå¸¸å®ç”¨çš„æŒ‡å¯¼åŸåˆ™ï¼š\na. å…³æ³¨â€œå˜åŒ–è½´â€ï¼Œè€ŒéåŠŸèƒ½æ•°é‡ # ä¸è¦ç®€å•åœ°æ•°ä¸€ä¸ªç±»æœ‰å¤šå°‘ä¸ªæ–¹æ³•ã€‚è€Œè¦é—®è‡ªå·±ï¼šâ€œå“ªäº›å˜åŒ–ä¼šè¿«ä½¿è¿™ä¸ªç±»è¢«ä¿®æ”¹ï¼Ÿâ€ã€‚å¦‚æœæ‰€æœ‰æ–¹æ³•éƒ½å› ä¸ºåŒä¸€ä¸ªå®è§‚åŸå› è€Œå˜åŒ–ï¼Œé‚£å®ƒä»¬å¾ˆå¯èƒ½å±äºåŒä¸€ä¸ªèŒè´£ã€‚\nJournalçš„ä¾‹å­ï¼šaddEntryå’ŒremoveEntryéƒ½å›´ç»•ç€â€œç®¡ç†æ¡ç›®ç”Ÿå‘½å‘¨æœŸâ€è¿™ä¸ªè½´ã€‚ å¦ä¸€ä¸ªä¾‹å­ï¼šä¸€ä¸ªUserç±»æœ‰loginã€logoutã€changePasswordæ–¹æ³•ã€‚å®ƒä»¬éƒ½å›´ç»•ç€â€œç”¨æˆ·èº«ä»½è®¤è¯â€è¿™ä¸ªè½´ã€‚ä½†å¦‚æœæŠŠâ€œå‘é€è¥é”€é‚®ä»¶sendPromotionalEmailâ€ä¹Ÿå¡è¿›Userç±»ï¼Œé‚£å°±ä¸å¯¹äº†ï¼Œå› ä¸ºé‚£å±äºâ€œé€šçŸ¥â€æˆ–â€œè¥é”€â€è¿™ä¸ªä¸åŒçš„å˜åŒ–è½´ã€‚ b. åº”ç”¨â€œå…±åŒé—­åŒ…åŸåˆ™â€ï¼ˆCCPï¼‰ # è¿™æ˜¯åŒ…çº§åˆ«çš„ä¸€ä¸ªåŸåˆ™ï¼Œä½†åŒæ ·é€‚ç”¨äºç±»è®¾è®¡ï¼šå°†é‚£äº›åŒæ—¶ã€å› åŒæ ·åŸå› è€Œå˜åŒ–çš„ä¸œè¥¿æ”¾åœ¨ä¸€èµ·ã€‚\nJournalé‡Œçš„æ–¹æ³•æ€»æ˜¯å› ä¸ºæ—¥è®°ä¸šåŠ¡çš„å˜åŒ–è€Œä¸€èµ·æ”¹å˜ã€‚ Persistenceç±»é‡Œçš„æ–¹æ³•æ€»æ˜¯å› ä¸ºå­˜å‚¨æŠ€æœ¯çš„å˜åŒ–è€Œä¸€èµ·æ”¹å˜ã€‚ ä½†å®ƒä»¬ä¸¤è€…ä¹‹é—´å‡ ä¹ä¸ä¼šå› ä¸ºå¯¹æ–¹çš„åŸå› è€Œæ”¹å˜ã€‚æ‰€ä»¥å®ƒä»¬åº”è¯¥è¢«åˆ†å¼€ã€‚ c. ä»â€œè§’è‰²â€å’Œâ€œç”¨æˆ·â€è§†è§’æ€è€ƒ # æƒ³è±¡ä¸€ä¸‹è°ä¼šè¦æ±‚è¿™ä¸ªç±»åšå‡ºæ”¹å˜ã€‚\näº§å“ç»ç†å¯èƒ½ä¼šè¦æ±‚æ”¹å˜Journalï¼šâ€œæˆ‘ä»¬éœ€è¦ç»™æ—¥è®°åŠ ä¸ªå¿ƒæƒ…å›¾æ ‡â€ã€‚ è¿ç»´å·¥ç¨‹å¸ˆå¯èƒ½ä¼šè¦æ±‚æ”¹å˜Persistenceï¼šâ€œæ•°æ®åº“è¦ä»MySQLè¿ç§»åˆ°PostgreSQLï¼Œè¿æ¥å­—ç¬¦ä¸²å’Œæ–¹è¨€è¦æ”¹â€ã€‚ å¦‚æœæ¥è‡ªå®Œå…¨ä¸åŒè§’è‰²ã€ä¸åŒå…³åˆ‡æ–¹çš„éœ€æ±‚ä¼šè¿«ä½¿ä½ ä¿®æ”¹åŒä¸€ä¸ªç±»ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»å¾ˆå¯èƒ½æ‰¿æ‹…äº†å¤šä¸ªèŒè´£ã€‚\nd. é¿å…è¿‡æ—©ä¼˜åŒ–å’Œè¿‡åº¦è®¾è®¡ # åœ¨é¡¹ç›®æ—©æœŸï¼Œå¦‚æœæŒä¹…åŒ–æ–¹å¼éå¸¸ç¨³å®šï¼ˆæ¯”å¦‚ç¡®å®šå°±ç”¨ä¸€ä¸ªç®€å•çš„JSONæ–‡ä»¶ï¼‰ï¼Œå¹¶ä¸”é¡¹ç›®å¾ˆå°ï¼Œé‚£ä¹ˆç¨å¾®è¿åä¸€ä¸‹SRPçš„ä»£ä»·å¯èƒ½ä½äºå¼•å…¥ä¸€ä¸ªæ–°ç±»çš„å¤æ‚åº¦ã€‚ä¸€å¼€å§‹å¯ä»¥æ”¾åœ¨ä¸€èµ·ï¼Œä½†è¦æœ‰æ„è¯†åœ°å°†å®ç°ç»†èŠ‚éšè—å¥½ï¼ˆæ¯”å¦‚ç”¨privateæ–¹æ³•ï¼‰ï¼Œå¹¶åœ¨ç¬¬ä¸€æ¬¡éœ€è¦å˜åŒ–æ—¶ï¼ˆæ¯”å¦‚è¦åŠ ç¬¬äºŒç§å­˜å‚¨æ–¹å¼ï¼‰æœæ–­è¿›è¡Œé‡æ„ï¼Œå°†å…¶æå–åˆ°ç‹¬ç«‹çš„ç±»ä¸­ã€‚\næ€»ç»“ # Journalç±»çš„â€œå­˜å…¥â€å’Œâ€œæŸ¥çœ‹â€ï¼šå±äºå¯¹åŒä¸€ä¸šåŠ¡å®ä½“ï¼ˆæ—¥è®°ï¼‰çš„æ“ä½œï¼Œæ˜¯åŒä¸€ä¸ªèŒè´£ï¼Œå˜åŒ–åŸå› ç›¸åŒï¼Œå› æ­¤æ”¾åœ¨ä¸€ä¸ªç±»æ˜¯åˆç†çš„ï¼Œç¬¦åˆSRPã€‚ Journalç±»çš„â€œSaveâ€æ–¹æ³•ï¼šå±äºå¦ä¸€ä¸ªèŒè´£ï¼ˆæŒä¹…åŒ–ï¼‰ï¼Œå˜åŒ–åŸå› ä¸åŒï¼ˆä¸šåŠ¡é€»è¾‘ vs. å­˜å‚¨æŠ€æœ¯ï¼‰ï¼Œå› æ­¤åº”è¯¥æ‹†åˆ†æˆPersistenceç±»ã€‚ å®è·µå¿ƒæ³•ï¼š èšç„¦äº â€œå˜åŒ–çš„åŸå› â€ ï¼Œè€Œä¸æ˜¯æ–¹æ³•çš„æ•°é‡ã€‚ æ€è€ƒ â€œè°ä¼šè¦æ±‚å®ƒæ”¹å˜â€ï¼ˆäº§å“ç»ç† vs. è¿ç»´ï¼‰ã€‚ éµå¾ª â€œå…±åŒé—­åŒ…åŸåˆ™â€â€”â€”å› åŒæ ·åŸå› è€Œå˜åŒ–çš„ä¸œè¥¿æ”¾åœ¨ä¸€èµ·ã€‚ å¾ªåºæ¸è¿›ï¼Œåœ¨ç®€å•å’Œè®¾è®¡ä¹‹é—´æƒè¡¡ï¼Œåœ¨ä»£ç ç¬¬ä¸€æ¬¡å‘å‡ºâ€œè‡­å‘³â€ï¼ˆéš¾ä»¥ä¿®æ”¹ã€éš¾ä»¥æµ‹è¯•ï¼‰æ—¶æœæ–­é‡æ„ã€‚ ","date":"27 August 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/posts/1759232878687-post4/","section":"Posts","summary":"","title":"OODP0 å•ä¸€èŒè´£åŸåˆ™(SRP)","type":"posts"},{"content":" èƒŒæ™¯ # ä¸¤ä¸ªæœˆå‰çœ‹äº†ä¸€ç‚¹Effective Modern Cppï¼Œåæ¥å¬è¯´ä½œè€…Scott Mayerå†™äº†ä¸‰æœ¬ä¹¦ï¼ŒCppä¸‰éƒ¨æ›²(E C, More E C, E Modern C)ã€‚äºæ˜¯æç½®äº†Effective Modern Cppï¼Œè½¬è€Œå»çœ‹Effective Cppã€‚å½“æ—¶çœ‹åˆ°ä½œè€…çš„ä¸€ä¸ªè§‚ç‚¹æ˜¯å‡½æ•°è¿”å›å€¼ä¼˜å…ˆconst å³ä¼˜å…ˆå†™\nconst std::string func()... è€Œä¸æ˜¯\nstd::string func()... åŸå› æ˜¯æœ‰äººä¼šåœ¨ifè¯­å¥é‡Œåšåˆ¤æ–­ï¼Œå‘ç”Ÿtypoï¼Œå°†åˆ¤æ–­å†™æˆèµ‹å€¼ å¦‚\nMatrix64 a, b, c; ... if (a * b = c){ // should be \u0026#34;==\u0026#34; } è‹¥*çš„é‡è½½å‡½æ•°è¿”å›const Matrix64ï¼Œç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ï¼Œå¦åˆ™å°±éš¾ä»¥æ‰¾åˆ°é”™è¯¯å‘ç”Ÿçš„åœ°æ–¹ã€‚ å¬èµ·æ¥éå¸¸æœ‰é“ç†ï¼Œäºæ˜¯ä¹¦ä¸Šè¯´\nä¸€ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ª constant valueï¼ˆå¸¸é‡å€¼ï¼‰ï¼Œå¸¸å¸¸å¯ä»¥åœ¨ä¸æ”¾å¼ƒå®‰å…¨å’Œæ•ˆç‡çš„å‰æä¸‹å°½å¯èƒ½å‡å°‘å®¢æˆ·çš„é”™è¯¯é€ æˆçš„å½±å“ã€‚\nç„¶è€Œä»Šå¤©æœºç¼˜å·§åˆä¹‹ä¸‹æˆ‘å»é—®dicksipæˆ‘ä»¬æ˜¯ä¸æ˜¯åº”è¯¥åœ¨cppçš„å‡½æ•°è¿”å›å€¼ä¸Šé»˜è®¤constï¼Œå®ƒå´ç»™å‡ºäº†å¦å®šçš„ç­”æ¡ˆã€‚ å…¶å®åŸå› ä¹Ÿéå¸¸ç®€å•ï¼Œåªæ˜¯æˆ‘ä¹‹å‰æ²¡æœ‰å»æƒ³\nä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸åº”è¯¥å¹¿æ³›ä½¿ç”¨constè¿”å›å€¼? # åŸå› 1 é™ä½æ€§èƒ½(é˜»æ­¢ç§»åŠ¨è¯­ä¹‰,RVO,NRVO) # åœ¨ç°ä»£cppä¸­ï¼Œå‡½æ•°è¿”å›å€¼constä¼šå½±å“ç§»åŠ¨è¯­ä¹‰ï¼Œç§»åŠ¨è¯­ä¹‰éœ€è¦éå¸¸é‡å³å€¼ åœ¨æ²¡æœ‰constçš„æƒ…å†µä¸‹\nData getData(){ Data data; ... return data; } Data receiver = getData();// è§¦å‘ç§»åŠ¨è¯­ä¹‰ï¼Œç”šè‡³RVO,NRVO // å¦‚æœ // const Data getData(); // åˆ™åªèƒ½è§¦å‘æ‹·è´ã€‚ åŸå› 2 é˜»ç¢ç°ä»£èŒƒå¼ # å¦‚\né“¾å¼è°ƒç”¨(Fluent Interface) # class MyString{ public: MyString\u0026amp; toUpper(); } proccessString.toUpper();//æ²¡æœ‰constæ—¶æ‰èƒ½å†™ å°±åœ°æ“ä½œ # void modifyValue(std::string\u0026amp;\u0026amp; str); modifyValue(getValue()) //é«˜æ•ˆæ¥å—å³å€¼å¤„ç† ä¸€ç§æƒ¯ç”¨æ³• # // ä»æµä¸­è¯»å–æ•°æ®å¹¶æ£€æŸ¥æ˜¯å¦æˆåŠŸ if (std::cin \u0026gt;\u0026gt; value) { ... } // åœ¨å¾ªç¯ä¸­è·å–é”å¹¶æ£€æŸ¥æ˜¯å¦æˆåŠŸ while (std::unique_lock lock(mutex, std::try_to_lock)) { ... } // è·å–ä¸€ä¸ªèµ„æºæŒ‡é’ˆå¹¶æ£€æŸ¥æ˜¯å¦æœ‰æ•ˆ if (auto ptr = acquireResource()) { ... } è¿™é‡Œunique_ptrå’Œunique_lockç­‰éƒ½å¿…é¡»æ¥å—éå¸¸é‡å³å€¼ï¼Œå¦‚æœconstå°±æ— æ³•æ„é€ ã€‚\nåŸå› 3 æ›´å¥½çš„ç°ä»£æ–¹æ¡ˆ # åŸå…ˆè¿™ç§å†™æ³•è§£å†³çš„é—®é¢˜åœ¨ä»Šå¤©å·²ç»ä¸æ˜¯é—®é¢˜ï¼Œç°ä»£ç¼–è¯‘å™¨éƒ½å¯ä»¥å¯¹if(),while()ç­‰ä¸­å‡ºç°çš„å¼‚å¸¸èµ‹å€¼æ“ä½œå‘å‡ºWarning æˆ‘ä»¬æ²¡æœ‰å¿…è¦ä¸ºäº†æœ‰é™çš„å¥½å¤„ç‰ºç‰²æ‰ä¼—å¤šç°ä»£cppçš„ä¼˜ç§€ç‰¹æ€§ï¼Œé‚£æ˜¾ç„¶æ˜¯å› å™åºŸé£Ÿã€‚\nåŸå› 4 ä¸€è‡´æ€§åŸåˆ™ # cppæ ‡å‡†åº“æ²¡æœ‰é‚£æ ·åšï¼Œæˆ‘ä»¬åº”è¯¥ä¸cppæ ‡å‡†åº“ä¿æŒä¸€è‡´\nä»€ä¹ˆæ—¶å€™åº”è¯¥ç”¨constè¿”å›å€¼? # è¿”å›å¼•ç”¨å’ŒæŒ‡é’ˆæ—¶ï¼Œå¦‚æœä¸å¸Œæœ›è¢«ä¿®æ”¹å†…éƒ¨æ•°æ®ï¼Œå¿…é¡»ä½¿ç”¨constè¿”å›å€¼ï¼Œ æ­¤å¤„è¾ƒä¸ºç®€å•ï¼Œçœç•¥\næ€»ç»“ # æˆ‘ä¸æƒ³è¯´ä»€ä¹ˆâ€œæˆ‘ä»¬åº”è¯¥åœ¨è¯»ä¹¦çš„æ—¶å€™å¤šåŠ æ€è€ƒâ€ä¹‹ç±»çš„åºŸè¯ã€‚å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬å°±æ˜¯æ²¡æœ‰åŠæ³•æƒ³åˆ°é‚£äº›ä¸œè¥¿ï¼Œæ‰ä¼šé™·å…¥æ­§é€”ã€‚æ‰€ä»¥ä¸å…¶è¯´æˆ‘ä»¬è¦å¤šæ€è€ƒï¼Œä¸å¦‚è®²æˆ‘ä»¬å¯ä»¥ä»å“ªäº›æ–¹é¢æ€è€ƒã€‚\n1. è€ƒè™‘ä¹¦çš„æ—¶ä»£æ€§ # Effective Cppè¿™æœ¬ä¹¦æ˜¯Scott Mayerä¸‰éƒ¨æ›²ä¸­çš„ç¬¬ä¸€æœ¬ï¼Œåˆç‰ˆäº1991å¹´ã€‚è¿™ä¸ªæ—¶é—´å°±æ³¨å®šè¿™æœ¬ä¹¦å¾ˆéš¾å®Œå…¨é€‚ç”¨ä»Šå¤©çš„C++23(ç”šè‡³2c)æ—¶ä»£ï¼Œæ—¶è¿‡å¢ƒè¿ï¼Œæˆ‘ä»¬åœ¨è®¡ç®—æœºè¿™æ ·çš„ç«çƒ­é¢†åŸŸï¼Œçœ‹åˆ°å¦‚æ­¤ä¹‹å¤§çš„å¹´ä»£å·®åˆ«æ—¶ï¼Œå°±åº”è¯¥å¯¹ä¹¦çš„å†…å®¹ä¿æŒè¾ƒå¤§çš„è­¦æƒ•äº†ã€‚\n2. è€ƒè™‘è‡ªå·±çš„ç»éªŒ # è™½ç„¶å¾ˆå¤šæ—¶å€™å¾ˆå¤šå­¦ç§‘ç¡®å®ä¼šå†²å‡»æˆ‘ä»¬çš„ç»éªŒï¼Œå¦‚ç¦»æ•£æ•°å­¦ï¼Œæ¦‚ç‡è®ºï¼Œå®åˆ†æä¸­å¾ˆå¤šå†…å®¹(æ¯”å¦‚0-1é—´æœ‰ç†æ•°çš„æµ‹åº¦ä¸º0)éƒ½å’Œç»éªŒç›¸æ‚–ï¼Œè¿™äº›å®å®åœ¨åœ¨åœ°è®©æˆ‘ä»¬è¿™æ ·çš„å·¥ç§‘å¤§å­¦ç”Ÿæ¸æ¸æ”¾å¼ƒäº†æˆ‘ä»¬çš„ç»éªŒã€‚ç„¶è€Œå½“ç†è®ºå’Œç»éªŒå‘ç”Ÿå†²çªæ—¶ï¼Œè¿›è¡Œä¸€ä¸ªå½»åº•çš„æ¢ç©¶ï¼Œæ¥ææ¸…æ¥šå­°å¯¹å­°é”™ä¹Ÿæ˜¯ä»¶å¾ˆè¦ç´§çš„äº‹ã€‚å¦‚æœæ˜¯ç»éªŒé”™äº†ï¼Œæ¯”èµ·æ”¾å¼ƒç»éªŒå’Œç›´è§‰ï¼Œæˆ‘ä»¬æ›´é‡è¦çš„æ˜¯åŸ¹å…»æ­£ç¡®çš„æ–°çš„ç»éªŒå’Œç›´è§‰ï¼Œå¯¹æˆ‘ä»¬ç›´è§‰æ‰€ä¾èµ–çš„ä¸œè¥¿è¿›è¡Œä¸€ä¸ªå½»åº•çš„ä¿®å¤ï¼Œå°†é”™çš„æ„Ÿè§‰æ¸…æ¥šï¼Œæ­£ç¡®çš„ç†è®ºå½¢æˆç›´è§‰ï¼Œè¿™æ‰æ˜¯æ±‚å®çš„æ€åº¦ã€‚\nå½“æˆ‘ä»¬çœ‹åˆ°è¿”å›å€¼åº”è¯¥constè¿™æ ·æ¿€è¿›çš„è¨€è®ºçš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦å»è´¨ç–‘ï¼Œæ¯•ç«Ÿå€¼ä¼˜å…ˆconstæ˜¯å¾ˆå¸¸è§çš„è¯´æ³•ï¼Œè€Œè¿”å›å€¼conståˆ™å¾ˆå°‘è§äº†ã€‚åœ¨æˆ‘ä»¬å¹³æ—¶é˜…è¯»çš„å¼€æºä»£ç ä¸­ï¼Œå°†è¿”å›å€¼constçš„å†™æ³•ä¹Ÿæ˜¯æå…¶ç½•è§çš„ã€‚ç§ç§è¿¹è±¡è¡¨æ˜ï¼Œè¿™ä¸€ä¸ªitemæ˜¯æå…¶æœ‰æ‚–äºå¸¸è¯†çš„ã€‚\n3. å®è·µå‡ºçœŸçŸ¥ # åœ¨è¶³å¤Ÿå¤šï¼Œè¶³å¤Ÿä¸¥è°¨çš„å·¥ç¨‹å®è·µä¸­ï¼Œæˆ‘ä»¬ä¼šæ‰¾åˆ°æ­£ç¡®çš„ç­”æ¡ˆï¼Œä¸€åˆ‡ä¸åˆé€‚çš„ç†è®ºè‡ªç„¶ä¼šä¸æ”»è‡ªç ´ï¼Œæ‰€ä»¥å¤šå‚ä¸å·¥ç¨‹ä¸€å®šæ˜¯å¥½çš„ã€‚\n","date":"20 August 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/posts/1759232872971-post3/","section":"Posts","summary":"","title":"å…³äºcppä¸­constè¿”å›å€¼","type":"posts"},{"content":"","date":"15 July 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/tags/%E5%A4%8F%E5%87%A0%E6%8A%8A%E6%83%B3/","section":"Tags","summary":"","title":"å¤å‡ æŠŠæƒ³","type":"tags"},{"content":"","date":"15 July 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/categories/%E6%83%B3%E6%B3%95%E6%9E%84%E6%80%9D/","section":"Categories","summary":"","title":"æƒ³æ³•æ„æ€","type":"categories"},{"content":"æ•…äº‹å¤§æ¦‚å°±æ˜¯æˆ‘çªç„¶æƒ³åšä¸€ä¸ªtodoç±»è½¯ä»¶ï¼Œåœ¨æˆ‘å’Œdeepseekåˆ‡ç£‹äº†åˆ›æ–°ç‚¹ï¼ŒåŠŸèƒ½ç‚¹ç­‰ä¹‹åï¼Œdeepseekç»™å‡ºäº†å¦‚ä¸‹ä¸æ˜è§‰å‰çš„é¡¹ç›®è§„åˆ’è¯´æ˜ä¹¦\næ™ºèƒ½ä»»åŠ¡ååŒç®¡ç†å¹³å°éœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦ # æ–‡æ¡£ç¼–å·ï¼šTDMS-RS-2025-v1.2\nå‘å¸ƒæ—¥æœŸï¼š2025å¹´7æœˆ15æ—¥\n1. ç³»ç»Ÿæ¦‚è¿° # å¼€å‘åŸºäºQt/C++ä¸SQLite/PostgreSQLçš„è·¨å¹³å°ä»»åŠ¡ç®¡ç†ç³»ç»Ÿï¼Œé›†æˆAIå¢å¼ºèƒ½åŠ›ï¼Œæ”¯æŒä¸ªäººè‡³å›¢é˜Ÿçº§ä»»åŠ¡ç®¡ç†ï¼Œå®ç°ä»»åŠ¡è§„åˆ’â†’æ‰§è¡Œç›‘æ§â†’çŸ¥è¯†æ²‰æ·€â†’æ™ºèƒ½è¿›åŒ–çš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚\n2. åŠŸèƒ½éœ€æ±‚ # 2.1 æ ¸å¿ƒä»»åŠ¡ç®¡ç†æ¨¡å— # åŠŸèƒ½ç¼–å· éœ€æ±‚æè¿° æŠ€æœ¯å®ç°è¦ç‚¹ TD-0100 å¤šè§†å›¾ä»»åŠ¡å±•ç¤º QTabWidget + QStackedWidget - çœ‹æ¿è§†å›¾ï¼ˆKanbanï¼‰ QGraphicsViewæ‹–æ‹½æ³³é“ - æ—¶é—´çº¿è§†å›¾ï¼ˆGanttï¼‰ QCustomPlotåŠ¨æ€å›¾è¡¨ - åˆ—è¡¨è§†å›¾/æ ‘çŠ¶è§†å›¾ QTreeView + QStandardItemModel TD-0200 ä»»åŠ¡å…ƒç´ ç®¡ç† æ•°æ®åº“å…³ç³»è®¾è®¡ - ä»»åŠ¡å±æ€§ï¼šæ ‡é¢˜/æè¿°/ä¼˜å…ˆçº§/æ ‡ç­¾ SQLite BLOBå­˜å‚¨å¯Œæ–‡æœ¬ - å­ä»»åŠ¡åˆ†è§£ï¼ˆæ— é™å±‚çº§ï¼‰ é‚»æ¥è¡¨ç»“æ„å­˜å‚¨ - é™„ä»¶ç®¡ç†ï¼ˆæ–‡æ¡£/å›¾ç‰‡/é“¾æ¥ï¼‰ QFileSystemWatcherç›‘æ§ç›®å½• TD-0300 æ™ºèƒ½æé†’ç³»ç»Ÿ QCalendarWidgeté›†æˆ - æ—¶é—´æé†’ï¼ˆç»å¯¹/ç›¸å¯¹æ—¶é—´ï¼‰ åŸºäºcronè¡¨è¾¾å¼è§£æå™¨ - ä½ç½®æé†’ï¼ˆGPSè§¦å‘ï¼‰ QtPositioningæ¨¡å— - è®¾å¤‡çŠ¶æ€æé†’ï¼ˆç©ºé—²æ—¶æ¨é€ï¼‰ QSystemIdleDetector 2.2 ååŒå·¥ä½œæ¨¡å— # åŠŸèƒ½ç¼–å· éœ€æ±‚æè¿° æŠ€æœ¯å®ç°è¦ç‚¹ CL-0100 å›¢é˜Ÿç©ºé—´ç®¡ç† OAuth2.0è®¤è¯ä½“ç³» - è§’è‰²æƒé™æ§åˆ¶ï¼ˆæ‰€æœ‰è€…/ç¼–è¾‘è€…/æŸ¥çœ‹è€…ï¼‰ RBACæ¨¡å‹æ•°æ®åº“è®¾è®¡ - é¡¹ç›®ç©ºé—´éš”ç¦» SQLite ATTACH DATABASE CL-0200 å®æ—¶åä½œåŠŸèƒ½ WebSocket + Operational Transform - ä»»åŠ¡åˆ†é…ä¸@æåŠé€šçŸ¥ QNetworkSessionç®¡ç†è¿æ¥ - ååŒç¼–è¾‘å†²çªè§£å†³ CRDTç®—æ³•å®ç° - ç‰ˆæœ¬å†å²è¿½æº¯ï¼ˆå¯å›æ»šï¼‰ SQLiteæ—¶é—´æ—…è¡Œæ‰©å±• CL-0300 æ²Ÿé€šé›†æˆ libcurlç½‘ç»œåº“ - è¯„è®ºçº¿ç¨‹ï¼ˆMarkdownæ”¯æŒï¼‰ QTextDocumentè§£æ - é‚®ä»¶åŒæ­¥ï¼ˆä»»åŠ¡å˜æ›´é€šçŸ¥ï¼‰ SMTPåè®®å®ç° 2.3 AIå¢å¼ºæ¨¡å— # åŠŸèƒ½ç¼–å· éœ€æ±‚æè¿° æŠ€æœ¯å®ç°è¦ç‚¹ AI-0100 è‡ªç„¶è¯­è¨€ä»»åŠ¡è§£æ ONNXè¿è¡Œæ—¶æœ¬åœ°æ¨ç† - ä»»åŠ¡è¯­ä¹‰è§£æ„ï¼ˆæå–å®ä½“/å…³ç³»ï¼‰ å¾®è°ƒBERTæ¨¡å‹ï¼ˆ\u0026lt;50MBï¼‰ - è‡ªåŠ¨ç”Ÿæˆå­ä»»åŠ¡æ ‘ å†³ç­–æ ‘ç®—æ³•ç”Ÿæˆ AI-0200 åŠ¨æ€è§„åˆ’å¼•æ“ QtConcurrentå¹¶è¡Œè®¡ç®— - æ—¶é—´é¢„ä¼°ï¼ˆåŸºäºå†å²æ•ˆç‡åˆ†æï¼‰ ARIMAæ—¶é—´åºåˆ—é¢„æµ‹ - æ™ºèƒ½æ’ç¨‹ï¼ˆèµ„æºå†²çªæ£€æµ‹ï¼‰ çº¦æŸæ»¡è¶³é—®é¢˜æ±‚è§£å™¨ - é£é™©é¢„è­¦ï¼ˆå…³é”®è·¯å¾„æ ‡è¯†ï¼‰ å›¾è®ºç®—æ³•åº”ç”¨ AI-0300 çŸ¥è¯†å¢å¼ºç³»ç»Ÿ DuckDBå‘é‡æ•°æ®åº“ - ä»»åŠ¡å…³è”æ–‡æ¡£æ¨è Sentence-BERTç›¸ä¼¼åº¦åŒ¹é… - ä»£ç ç‰‡æ®µè‡ªåŠ¨ç”Ÿæˆï¼ˆå¼€å‘ä»»åŠ¡ï¼‰ OpenAI Codexæœ¬åœ°åŒ–æ¨¡å‹ 2.4 åˆ†æé¢„æµ‹æ¨¡å— # åŠŸèƒ½ç¼–å· éœ€æ±‚æè¿° æŠ€æœ¯å®ç°è¦ç‚¹ AN-0100 ç”Ÿäº§åŠ›åˆ†æ QtChartsæ•°æ®å¯è§†åŒ– - ä¸ªäººæ•ˆèƒ½çƒ­åŠ›å›¾ï¼ˆä¸“æ³¨æ—¶æ®µåˆ†æï¼‰ QSensoræ•°æ®é‡‡é›† - å›¢é˜Ÿè´Ÿè½½å‡è¡¡å›¾ åŠ›å¯¼å‘å›¾ç®—æ³• AN-0200 é¢„æµ‹æ€§æŠ¥å‘Š SQLçª—å£å‡½æ•°åˆ†æ - é¡¹ç›®å®Œæˆæ¦‚ç‡é¢„æµ‹ è’™ç‰¹å¡æ´›æ¨¡æ‹Ÿ - å»¶æœŸé£é™©æŒ‡æ•°è®¡ç®— é€»è¾‘å›å½’æ¨¡å‹ 3. éåŠŸèƒ½æ€§éœ€æ±‚ # 3.1 æ€§èƒ½éœ€æ±‚ # gantt title å…³é”®æ€§èƒ½æŒ‡æ ‡ dateFormat YYYY-MM-DD section å“åº”æ—¶é—´ ä»»åŠ¡åŠ è½½(1000æ¡) ï¼šactive, p1, 2025-08-01, 1.2s AIè§£æå“åº”(P95) ï¼š p2, after p1, 0.8s ååŒæ“ä½œåŒæ­¥ ï¼š p3, after p2, 0.3s section èµ„æºå ç”¨ å†…å­˜å¸¸é©» ï¼šcrit, 2025-08-01, 120MB å­˜å‚¨å‹ç¼©æ¯” ï¼š \u0026gt;=5:1 3.2 å®‰å…¨éœ€æ±‚ # æ•°æ®åŠ å¯†ï¼šSQLiteé¡µçº§AES-256åŠ å¯†ï¼ˆSQLCipheræ‰©å±•ï¼‰ éšç§ä¿æŠ¤ï¼šAIå¤„ç†æœ¬åœ°åŒ–ï¼ˆå¯é€‰å…³é—­äº‘åŒæ­¥ï¼‰ å®¡è®¡è¿½è¸ªï¼šæ“ä½œæ—¥å¿—HMAC-SHA256ç­¾å 3.3 å¯é æ€§éœ€æ±‚ # å´©æºƒæ¢å¤ï¼šè‡ªåŠ¨ä¿å­˜ç‚¹ï¼ˆ15åˆ†é’Ÿå¢é‡å¤‡ä»½ï¼‰ å†²çªè§£å†³ï¼šä¸‰é˜¶æ®µååŒå†²çªå¤„ç†ç­–ç•¥ï¼š å®¢æˆ·ç«¯è‡ªåŠ¨åˆå¹¶ï¼ˆåŸºäºCRDTï¼‰ ç”¨æˆ·å†³ç­–ç•Œé¢ï¼ˆå¯è§†åŒ–å·®å¼‚å¯¹æ¯”ï¼‰ ç‰ˆæœ¬åˆ†æ”¯å­˜æ¡£ 3.4 å…¼å®¹æ€§éœ€æ±‚ # å¹³å° æ”¯æŒçº§åˆ« æŠ€æœ¯æ–¹æ¡ˆ Windows å®Œæ•´åŠŸèƒ½ MSVC 2022ç¼–è¯‘ macOS å®Œæ•´åŠŸèƒ½+åŸç”ŸUI Qt for macOS Linux å®Œæ•´åŠŸèƒ½ Wayland/X11åŒæ”¯æŒ Android æ ¸å¿ƒåŠŸèƒ½ Qt 6.5 Mobileæ¨¡å— Web åªè¯»è§†å›¾ WebAssemblyç¼–è¯‘ 4. ç³»ç»Ÿæ¶æ„ # 4.1 é€»è¾‘æ¶æ„ # +-----------------------+ | Presentation | | QWidgets / QtQuick | +----------+------------+ | (ä¿¡å·æ§½) +----------v------------+ | Business Logic | | - ä»»åŠ¡ç®¡ç†æ ¸å¿ƒ | | - AIæ¨ç†å¼•æ“ | | - ååŒæ§åˆ¶å™¨ | +----------+------------+ | (DAOæ¥å£) +----------v------------+ | Data Layer | | - SQLite OLTP | | - DuckDB OLAP | | - æ¨¡å‹æ–‡ä»¶å­˜å‚¨ | +-----------------------+ 4.2 éƒ¨ç½²æ¶æ„ # graph TD A[æ¡Œé¢å®¢æˆ·ç«¯] --\u0026gt; B[æœ¬åœ°æ•°æ®åº“] A --\u0026gt; C[AIæ¨¡å‹ä»“åº“] A \u0026lt;--\u0026gt; D[ååŒæœåŠ¡å™¨] D --\u0026gt; E[(PostgreSQLé›†ç¾¤)] D --\u0026gt; F[Rediså®æ—¶é˜Ÿåˆ—] G[ç§»åŠ¨ç«¯] --\u0026gt; D H[Webç«¯] --\u0026gt; D 5. AIé›†æˆæ–¹æ¡ˆ # 5.1 æ™ºèƒ½è§„åˆ’å·¥ä½œæµ # sequenceDiagram participant User participant UI participant AI Engine participant Database User-\u0026gt;\u0026gt;UIï¼š è¾“å…¥â€œå¼€å‘é‚®ä»¶å®¢æˆ·ç«¯ï¼Œéœ€åŠ å¯†æ¨¡å—ï¼Œä¸¤å‘¨å®Œæˆâ€ UI-\u0026gt;\u0026gt;AI Engineï¼š å‘é€è‡ªç„¶è¯­è¨€è¯·æ±‚ AI Engine-\u0026gt;\u0026gt;AI Engineï¼š å®ä½“è¯†åˆ«ï¼ˆæŠ€æœ¯æ ˆ/æ—¶é—´/åŠŸèƒ½ï¼‰ AI Engine-\u0026gt;\u0026gt;Databaseï¼š æŸ¥è¯¢ç›¸ä¼¼ä»»åŠ¡å†å²æ•°æ® Database--\u0026gt;\u0026gt;AI Engineï¼š è¿”å›å†å²æ‰§è¡ŒæŒ‡æ ‡ AI Engine-\u0026gt;\u0026gt;AI Engineï¼š ç”Ÿæˆä»»åŠ¡åˆ†è§£æ ‘ AI Engine-\u0026gt;\u0026gt;UIï¼š è¿”å›ç»“æ„åŒ–è§„åˆ’ï¼š â€¢ å­ä»»åŠ¡ï¼šUIæ¡†æ¶/è®¤è¯æ¨¡å—/åŠ å¯†é›†æˆ â€¢ æ—¶é—´çº¿ï¼šç”˜ç‰¹å›¾+é£é™©æç¤º UI-\u0026gt;\u0026gt;Userï¼š å¯è§†åŒ–å±•ç¤ºå¯ç¼–è¾‘æ–¹æ¡ˆ 5.2 å…³é”®æŠ€æœ¯å®ç° # // AIä»»åŠ¡è§£ææ ¸å¿ƒç±» class TaskParser : public QObject { Q_OBJECT public: explicit TaskParser(QObject *parent = nullptr); Q_INVOKABLE ParsedTask parseDescription(const QString \u0026amp;text); private: // ONNXæ¨ç†å¼•æ“ Ort::Session *nlpSession; // æœ¬åœ°çŸ¥è¯†å›¾è°± DuckDBConnection *knowledgeGraph; }; // è¿”å›æ•°æ®ç»“æ„ struct ParsedTask { QString title; QVector\u0026lt;Subtask\u0026gt; subtasks; QMap\u0026lt;QString, QTime\u0026gt; timeEstimates; QVector\u0026lt;KnowledgeLink\u0026gt; relatedResources; }; 6. äº¤ä»˜ç‰©è§„åˆ’ # 6.1 é˜¶æ®µåŒ–äº¤ä»˜ # è¿­ä»£ åŠŸèƒ½é›† AIèƒ½åŠ› å‘¨æœŸ MVP åŸºç¡€ä»»åŠ¡ç®¡ç†+æœ¬åœ°AIè§£æ L1ï¼šå…³é”®è¯æå– 8å‘¨ v1.0 å›¢é˜ŸååŒ+åŠ¨æ€è§„åˆ’ L2ï¼šæ—¶é—´é¢„ä¼° 12å‘¨ v1.5 é¢„æµ‹åˆ†æ+è·¨å¹³å° L3ï¼šé£é™©å»ºæ¨¡ 6å‘¨ v2.0 ARé›†æˆ+ä¼ä¸šçº§æ‰©å±• L4ï¼šè‡ªé€‚åº”å·¥ä½œæµ 10å‘¨ 6.2 è´¨é‡ä¿éšœ # è‡ªåŠ¨åŒ–æµ‹è¯•è¦†ç›–ç‡ï¼š æ ¸å¿ƒé€»è¾‘ï¼šâ‰¥85%ï¼ˆQTestæ¡†æ¶ï¼‰ UIäº¤äº’ï¼šâ‰¥70%ï¼ˆSquishè‡ªåŠ¨åŒ–ï¼‰ AIæ¨¡å‹è¯„ä¼°ï¼š ä»»åŠ¡åˆ†è§£å‡†ç¡®ç‡ï¼šF1-score â‰¥0.82 æ—¶é—´é¢„ä¼°è¯¯å·®ï¼šMAPE â‰¤15% 7. åˆ›æ–°ä»·å€¼çŸ©é˜µ # quadrantChart title åŠŸèƒ½ä»·å€¼åˆ†æ x-axis å¼€å‘æˆæœ¬ â†’ y-axis ç”¨æˆ·ä»·å€¼ â†‘ quadrant-1 æˆ˜ç•¥æ ¸å¿ƒ quadrant-2 å·®å¼‚åŒ–ä¼˜åŠ¿ quadrant-3 åŸºç¡€å¿…å¤‡ quadrant-4 ä¼˜åŒ–é€‰é¡¹ â€œåŠ¨æ€AIè§„åˆ’â€ï¼š [0.7, 0.95] â€œååŒå†²çªè§£å†³â€ï¼š [0.6, 0.8] â€œå¤šè§†å›¾çœ‹æ¿â€ï¼š [0.3, 0.9] â€œçŸ¥è¯†å›¾è°±â€ï¼š [0.65, 0.7] â€œARé›†æˆâ€ï¼š [0.85, 0.6] æœ¬éœ€æ±‚ä¹¦å®Œæ•´æ¶µç›–ä¼ ç»Ÿä»»åŠ¡ç®¡ç†æ ¸å¿ƒåŠŸèƒ½ï¼ˆçœ‹æ¿/ååŒ/æé†’ï¼‰ä¸AIåˆ›æ–°ç‚¹ï¼ˆæ™ºèƒ½è§„åˆ’/é¢„æµ‹åˆ†æï¼‰ï¼Œå»ºè®®é‡‡ç”¨æ¨¡å—åŒ–å¼€å‘ç­–ç•¥ï¼š\nåŸºç¡€æ¡†æ¶æ­å»ºï¼šå®ç°TD-0100/TD-0200æ¨¡å—ï¼ˆ4å‘¨ï¼‰ ååŒæ ¸å¿ƒå¼€å‘ï¼šå®ŒæˆCLç³»åˆ—åŠŸèƒ½ï¼ˆ6å‘¨ï¼‰ AIå¼•æ“é›†æˆï¼šéƒ¨ç½²AI-0100/AI-0200ï¼ˆ8å‘¨ï¼‰ åˆ†æé¢„æµ‹æ‰©å±•ï¼šæ„å»ºANæ¨¡å—ï¼ˆ4å‘¨ï¼‰ å…·ä½“å†…å®¹æˆ‘è§‰å¾—éå¸¸å¥½ï¼Œæ‰€ä»¥æ‰“ç®—æœè¿™ä¸ªæ–¹å‘åšï¼Œè™½ç„¶å¾ˆæ˜æ˜¾æˆ‘åšä¸æˆå¾ˆå‰å®³çš„æ ·å­ä½†è‡³å°‘å¯ä»¥åšç€ç©ç©ã€‚\nèµ·æ‰‹ # æˆ‘è‚¯å®šä¸æ„¿æ„ç”¨qtåŸç”Ÿçš„ç»„ä»¶ï¼Œå› ä¸ºå¤ªä¸‘ï¼Œè‡ªå·±æ“ç»„ä»¶åˆå¤ªéº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘å¹²è„†ä¸Šç½‘æ‰¾å¼€æºé¡¹ç›®ã€‚æœ‰ä¸€ä¸ªQFluentWidgetçš„é¡¹ç›®ï¼Œä½†æ˜¯å®ƒçš„cppçš„ç‰ˆæœ¬è¦å‡ åƒå—é’±ä¹°ï¼Œæ‰€ä»¥æˆ‘åªå¥½æ”¾å¼ƒã€‚åé¢æ‰¾åˆ°äº†ElaWidgetToolsï¼Œä»Šå¤©ä¸‹åˆåˆšé…å¥½ElaWidgetToolsï¼Œé¢„è®¡åé¢ä»¥ElaWidgetToolsä½œä¸ºä¸»è¦UIåº“ã€‚ ç›®å‰é¡¹ç›®åˆšåˆšå¼€å§‹ï¼Œå¸Œæœ›æˆ‘ä¸è¦åˆåšæˆä¸€å¨ã€‚\n","date":"15 July 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/posts/1759232853936-post1/","section":"Posts","summary":"","title":"æ„æƒ³ä¸€ä¸ªæ™ºèƒ½todoé¡¹ç›®è¿›åº¦ç®¡ç†è½¯ä»¶","type":"posts"},{"content":"","date":"15 July 2025","externalUrl":null,"permalink":"/Eric-s-Blog-v2/tags/%E6%B2%A1%E6%9C%89%E5%AE%8C%E6%88%90/","section":"Tags","summary":"","title":"æ²¡æœ‰å®Œæˆ","type":"tags"},{"content":"","externalUrl":null,"permalink":"/Eric-s-Blog-v2/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"","externalUrl":null,"permalink":"/Eric-s-Blog-v2/series/","section":"Series","summary":"","title":"Series","type":"series"}]